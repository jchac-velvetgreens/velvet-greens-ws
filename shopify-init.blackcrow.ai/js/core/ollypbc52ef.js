(function(){try{
"use strict";(()=>{function ma(){return a.TAG_SRC||"JS"}function v(){return ma()==="ShopifyAppExtension"}function K(t,e,r,o){function n(i){typeof o=="function"&&o(i)}try{fetch(t,e).then(i=>{if(i.ok)typeof r=="function"&&r(i);else if(e?.mode!=="no-cors"){let s=`${i.status} ${i.statusText}`;try{i.json().then(c=>{let u=c.errors[0];s=`${u.error_type}: ${u.error_message}`,n(new Error(s))}).catch(()=>{n(new Error(s))})}catch{n(new Error(s))}}}).catch(n)}catch(i){n(i)}}function Sm(){try{return window.location!==window.top.location}catch{return!0}}function qo(){return v()?window.location.hostname:window.top.location.hostname}function Du(){return v()?window.location:Sm()?window.top.location:window.location}function $e(){return Du()?.pathname}function k(){return Du().href}function ge(){return window?.navigator?.userAgent}function Yt(t){return performance&&typeof performance.getEntriesByType=="function"&&performance.getEntriesByType(t)||[]}function Ln(){return performance&&typeof performance.now=="function"&&performance.now()||0}function oo(t,e){let r=globalThis.browser;if(v()&&r){K(t,{method:"POST",keepalive:!0,mode:"no-cors",body:e},()=>{},o=>{o.message=`${o.message} - ${t}`,o.status="warn",a.error(o)});return}window?.navigator?.sendBeacon(t,e)}var xm=["clicktripz","example","partner"],Tm=[".shopifypreview.","localhost.","demo.","staging.","development-","development.","dev-","dev.","devstore-","devstore.","development2","sandbox-","sandbox.","-sandbox"],Am=["localhost","127.0.0.1"];function Im(){let t=qo();return t===""||Am.includes(t)}function km(){let t=qo().toLocaleLowerCase();return Tm.some(e=>t.indexOf(e.toLocaleLowerCase())!==-1)}function Rt(t){return xm.indexOf(t.toLowerCase())!==-1||Im()||km()}function he(t,e={},r="info"){if(Rt(l))return;let o="https://monitor-api.blackcrow.ai/",n=!1,i=parseInt("16437",10)||0,s=JSON.stringify({message:t,status:r,service:"javascript-api",version:i,ddsource:"browser",ddtags:`env:${n?"dev":"production"},version:${i}`,"logger.name":"monitor-api","http.useragent":ge(),"view.site":l,...e});oo(o,s)}function Dn(t){let e=Math.random();(t.overrideSampling||e>=.3&&e<.4)&&he(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"view.url":k(),"view.referrer":document.referrer})}var Fn=`
`;function ue(t,e){if(typeof t=="string"){let r=t.split(Fn);return r.splice(1,e),r.join(Fn)}return""}function Fu(t){return typeof t=="string"?t.split(Fn).filter(o=>{o=o.toLowerCase();let n=p.toLowerCase(),i="ollypbc.js".toLowerCase();return!(o.includes(n)&&o.includes(i))}).join(Fn):t}function A(t){let e=new Error(t);return e.name="GlobalInterfaceError",e.status="warn",e.stack=ue(e.stack,1),e}var d=window.IntentProperties?window.IntentProperties.namespace||"intent":"blackcrow",a=window.blackcrow||window.intent||{},f=[];Array.isArray(a)&&(f=a,a={});typeof a.push!="function"&&(a.push=t=>f.push(t));a.TAG_SRC=window.blackcrowTagSrc||"JS";function Om(){try{if(window?.blackcrowBundleName)return window.blackcrowBundleName;if(document?.currentScript instanceof HTMLScriptElement)return new URL(document.currentScript.src)?.pathname?.split("/")?.pop()?.split(".")[0]||"";throw new Error("Failed to obtain bundle name from current script or window")}catch(t){return Dn(A(`Error determining bundle name dynamically: ${t}`)),"blackcrow"}}var m=Om();a.BUNDLE_NAME=m;a.BUILD_NUMBER="16437";window.blackcrow=a;window.intent=a;var l=a.SITE_NAME||"olly",ga="init.blackcrow.ai";if(document.currentScript&&document.currentScript instanceof HTMLElement){let e=document.currentScript.src.split("/")[2];if(!e)throw new Error("Failed to extract CDN host from tag");ga=e}else a.TAG_SRC==="ShopifyAppExtension"&&(ga="shopify-init.blackcrow.ai");var p=`https://${ga}/`;function Cm(t){let e=!0;return t.skipNotify&&(e=!1),t.message.indexOf("com.gargoylesoftware.htmlunit")!==-1&&(e=!1),e}function Nm(t,e){let o=`BlackCrow${e?` ${e}`:""} ${t.stack}`;globalThis.console&&(globalThis.console.error?globalThis.console.error(o):globalThis.console.log(o))}function Rm(t){let e=new Error(t);return ue(e.stack,1)}function Mn(t,e={}){if(!t)return;t.stack||(t.stack=Rm(t.msg)),!1&&Nm(t,e.appName),Cm(t)&&typeof Mn.sendErrorToServer=="function"&&Mn.sendErrorToServer(t)}Mn.sendErrorToServer=Dn;a.error=Mn;function $n(t,e){let r=document.createElement("link");r.rel=e,r.href=t,document.head.appendChild(r)}a.TAG_SRC!=="ShopifyAppExtension"&&!window.blackcrowpreconnected&&($n("https://api.blackcrow.ai/","preconnect"),$n("https://api.blackcrow.ai/","dns-prefetch"),$n(p,"preconnect"),$n(p,"dns-prefetch"),window.blackcrowpreconnected=1);function S(t,e,r){if(t)if(typeof t.length<"u"){for(let o=0,n=t.length;o<n;o+=1)if(e.call(r,t[o],o,t)===!1)return}else{let o=Object.keys(t);for(let n=0,i=o.length;n<i;n+=1)if(e.call(r,t[o[n]],o[n],t)===!1)return}}var Lm="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Mu=(t=21)=>{let e="",r=t;for(;r--;)e+=Lm[Math.random()*64|0];return e};var $u=Mu;function Ge(t,e){if(v())return window.blackcrow.cookie.get(t);e=e||document.cookie;let r={};return S(e.split(/\s?;\s?/),o=>{let n=o.split(/\s?=\s?/);r[n.shift().trim()]=n.join("=").trim()}),r[t]}async function I(t,e){try{return v()?await globalThis.browser.cookie.get(t):Ge(t,e)}catch{}return null}var ha="_bcai_h",Go="_bcai_i",ya="_bcai_e",Bn="_bcai_t",Bu="_bcai_up",va="_bcai_lpi",_a="_bcai_vn",wa="_bcai_vs",Un="_bcai_v",jo="_bcai_pu",Ea="_bcai_lpv",ba="_bcai_spv",Vn="_bcai_em",Pa="_bcai_fn",Sa="_bcai_ln",Wn="_bcai_ph",Uu="_bcai_koc",Vu="_bcai_khs",Wu="_bcai_kps",xa="_bcai_kid",qu="_bcai_pwo_ebc",Ho="_bcai_isn",Ta="_bcai_aos_pes",no="_bcai_urr",Aa="fbclid",Lt="_fbc",ct="_fbp",zo="ps_id",qn="__kla_id";var Jo;function Ia(){if(Jo)return Jo;let t=document.location.hostname.split("."),e,r=t.length;if(r===1)Jo="";else{for(;r>2;){r-=1,e=t.slice(1).join("."),document.cookie=`${Bn}=1; domain=${e}`;let o=Ge(Bn);if(document.cookie=`${Bn}=1; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=${e}`,!o)break;t.shift()}Jo=t.join(".")}return Jo}function Y(t,e,r){try{let o;if(r){let i=new Date;i.setTime(i.getTime()+r*60*1e3),o=`;expires=${i.toUTCString()}`}else o="";let n=`${t}=${e}${o};domain=${Ia()};path=/`;v()?(browser.cookie.set(n),window.blackcrow.cookie.set(t,e)):document.cookie=n}catch{}}var Er;function Dt(){return Er||(Er=Ge(Go),Er||(Er=$u(),Y(Go,Er,1051200)),Er)}function Dm(t,e){var r,o,n,i,s,c,u,g,h,E;for(r=t.length&3,o=t.length-r,n=e,s=3432918353,u=461845907,E=0;E<o;)h=t.charCodeAt(E)&255|(t.charCodeAt(++E)&255)<<8|(t.charCodeAt(++E)&255)<<16|(t.charCodeAt(++E)&255)<<24,++E,h=(h&65535)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(h&65535)*u+(((h>>>16)*u&65535)<<16)&4294967295,n^=h,n=n<<13|n>>>19,i=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(i&65535)+27492+(((i>>>16)+58964&65535)<<16);switch(h=0,r){case 3:h^=(t.charCodeAt(E+2)&255)<<16;case 2:h^=(t.charCodeAt(E+1)&255)<<8;case 1:h^=t.charCodeAt(E)&255,h=(h&65535)*s+(((h>>>16)*s&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(h&65535)*u+(((h>>>16)*u&65535)<<16)&4294967295,n^=h}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0}var Fm=4294967295,Mm=108;function ka(t){return Dm(t||"",Mm)/Fm}function le(t={}){let e=Ge("_shopify_y")||Dt(),r=t.name||"",{force:o,allocations:n}=t,i=ka(`${e}${r}`);if(o)return n.find(g=>g.name===o)?.value;let s=0,c=[];S(t.allocations,g=>{if(c.push({min:s,max:s+g.percent,value:g.value}),s+=g.percent,s>1)throw new Error("Bucket allocation exceeds 100%")});let u;return S(c,g=>i>=g.min&&i<g.max?(u=g.value,!1):!0),u}function Ce(){return document.referrer}function io(){return document.title}function $m(t,e){let r=e.split("[");return r.length>1?t&&t[r[0]]&&t[r[0]][parseInt(r[1],10)]:t&&t[e]}function b(t,e){if(!(!t||!e||typeof e!="string"))return e.split(".").reduce($m,t)}function br(t,e,r,o,n){!t||!e||typeof e!="string"||(e.indexOf(".")!==-1?(e=e.split("."),br(t,e.shift(),r,e,n)):!o||o.length===0?(!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=r):((!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=t[e]||{}),br(t[e],o.shift(),r,o,n)))}a.storage=a.storage||{};function Bm(t,e){let r=a.storage[t].audience;typeof r=="object"&&e?.audience===!1?a.storage[t]={audience:r}:a.storage[t]={}}function pe(t){t&&(a.storage[t]=a.storage[t]||{});function e(){return a.storage[t]}return{clear:r=>{t==="bound_events"&&r?Bm(t,r):a.storage[t]={}},getAll:()=>e()||{},get:r=>b(e(),r),set:(r,o)=>{let n=e();typeof r=="string"?br(n,r,o):S(r,(i,s)=>{br(n,s,i)})},push:(r,o)=>{let n=e(),i=b(n,r);Array.isArray(i)?i.push(o):br(n,r,[o])}}}var Oa=pe("page"),Ca="history";function Um(t,e){return typeof e=="function"?e.toString().replace(/\s+/g," "):e}function Gu(){return console.group(`${d} history`),S(Oa.get(Ca),t=>{console.groupCollapsed(t.name),console.log("data",JSON.stringify(t.data,Um,4)),console.log(t.source),console.groupEnd()}),console.groupEnd(),""}function ju(){return Oa.get(Ca)}function fe(t,e){let r=new Error("");r.name="source",r.stack=ue(r.stack,1),Oa.push(Ca,{name:t,data:e,source:r})}var Vm=Object.prototype.toString,Na=Array.prototype.slice;function P(t,...e){return t=t||{},S(e,r=>{S(r,(o,n)=>{let i=Vm.call(o).split(" ").pop();if(i!=="Undefined]"){if(!o||o===o.window||o.nodeType||o._isVue){t[n]=o;return}if(i==="Object]"){t[n]=t[n]||{},P(t[n],o);return}if(i==="Array]"){t[n]=t[n]||[],t[n]=Na.call(t[n]).concat(o);return}if(i==="NodeList]"||i==="HTMLCollection]"){t[n]=t[n]||[],t[n]=Na.call(t[n]).concat(Na.call(o));return}t[n]=o}})},this),t}window.blackcrow.pushedData=window.blackcrow.pushedData||{};function Ra(){let t=window.blackcrow.pushedData;t&&t.winLocation!==k()&&(window.blackcrow.pushedData={})}function Gn(t){P(window.blackcrow.pushedData,t,{winLocation:k()})}function jn(t){window.blackcrow.pushedData={...t,winLocation:k()}}function R(t){return b(window.blackcrow.pushedData,t)}var La=pe("events_api_response"),Da=pe("api_config");function ao(t){let e=new Error(t);return e.name="SequencingError",e.status="warn",e.stack=ue(e.stack,1),e}var Hu=!1,zu=!1;function Ju(t,e){if(t){let r=e.get(`data.${t}`);if(typeof r=="string"){let o=r.toLowerCase();return o==="off"||o==="false"?!1:r}return r}return e.get("data")}function Fa(t){Da.set("data",t),zu=!0}function $(t){return zu===!1&&a.error(new ao("Attempting to access apiConfig before it has been set!")),Ju(t,Da)}function Zo(t){La.set("data",t),Hu=!0}function Ma(t){return Hu===!1&&a.error(new ao("Attempting to access events api response before it has been set!")),Ju(t,La)}function $a(){return!!Ma("history_id")}function Wm(t){let e=new Error(t);return e.name="URIDecodingError",e.status="warn",e.stack=ue(e.stack,1),e}function we(t){let e={};if(typeof t=="string"&&t.length){let r=t.split("?");r.shift(),r=r.join("?"),r=r.split("#")[0],S(r.split("&"),o=>{let n=o;try{n=decodeURIComponent(n)}catch{a.error(new Wm(`Unable to decode URI component: ${n}`))}let i=n.indexOf("="),s=i>0?[n.slice(0,i),n.slice(i+1)]:[n];typeof s[1]<"u"&&(e[s[0]]=s[1])})}return e}function de(t,e){let r=e?we(e):we(k()),o=Object.keys(r).find(n=>n?.toLowerCase()===t?.toLowerCase());return r[o]}var Zu="config.visitor.query_string";function qm(t){let e=t?b(t,Zu):$(Zu);return e?{param:e.param,separator:e.separator,index:e.index}:{}}function Gm(t){let e=t.param;if(e)return de(e)}function jm(t,e){let r=e.separator,o=e.index;return r&&o?t.split(r)[o]||void 0:t}function Ku(t){let e=qm(t),r=Gm(e);if(r)return jm(r,e)}var Ba,Ua;function Hm(){let t,e=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga;return e&&typeof e.getAll=="function"&&S(e.getAll(),r=>{try{let o=r.get("clientId");if(o)return t=o,!1}catch{}}),t}async function zm(){try{if(typeof Ua<"u")return Ua;let t,e=await I("_ga");if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return Ua=t,t}catch(t){a.error(t);return}}async function Xt(t){try{if(Ba)return Ba;let e=R("google_id")||Ku(t)||window.gaGlobal&&window.gaGlobal.vid||Hm()||await zm();return Ba=e,e}catch(e){a.error(e);return}}var Yu="blackcrow",Xu="cookie",Qu="global",ed="google",Va="pushed_data";var Pr,tt=Yu.toUpperCase(),rt=Un,Hn=!1;function td(t,e,r){Y(Un,t,1051200),Y(wa,e,1051200),Y(_a,r,1051200)}async function ot(){if(Pr)return{id:Pr,source:tt,name:rt,fallback:Hn};if(Pr=await I(Un),Pr)return tt=await I(wa)||tt,rt=await I(_a)||rt,td(Pr,tt,rt),{id:Pr,source:tt,name:rt,fallback:Hn};let t=$("config.visitor.id_source"),e=$("config.visitor.id_name"),r=R("visitor_id");if(r&&(tt=Va.toUpperCase(),rt="visitor_id"),t===Xu){let o=await I(e);o&&(r=o,tt=t.toUpperCase(),rt=e)}else if(t===Qu){let o=b(window,e);o&&(r=o,tt=t.toUpperCase(),rt=e)}else if(t===Va){let o=R(e);o&&(r=o,tt=t.toUpperCase(),rt=e)}else if(t===ed){let o=await Xt();o&&(r=o,tt=t.toUpperCase(),rt=e)}return r||(r=Dt(),Hn=!0),Pr=r,td(r,tt,rt),{id:r,source:tt,name:rt,fallback:Hn}}async function Jm(t){try{if(t.overrideSampling||le({name:"error_sampling",allocations:[{percent:.1,value:!0}]})){let r=await ot();he(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"usr.id":r.id,"view.url":R("page_url")||k(),"view.referrer":R("page_referrer_url")||Ce()})}fe(t.name,t)}catch{}}function rd(){a.error.sendErrorToServer=Jm}function Zm(t){let e={name:"other",major:0,minor:0};if(/googlebot/.test(t)||/adsbot/.test(t)||/bingbot/.test(t)||/bingpreview/.test(t)||/slurp/.test(t)||/storebot/.test(t)||/spider/.test(t)||/crawler/.test(t)||/yandexbot/.test(t)||/ptst[ \/]/.test(t)||/externalhit/.test(t))return e.name="bot",e;let o=/(msie) ([\w.]+)/.exec(t)||/(ucbrowser)[ \/]([\w.]+)/.exec(t)||/(miuibrowser)[ \/]([\w.]+)/.exec(t)||/(opera mini)[ \/]([\w.]+)/.exec(t)||/(opr)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(firefox)[ \/]([\w.]+)/.exec(t)||/(trident)(?:.*? rv:([\w.]+))?/.exec(t)||/(edg)[ \/]([\w.]+)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t);if(o){o[1]==="opr"?o[1]="opera":o[1]==="trident"?o[1]="msie":o[1]==="edg"&&(o[1]="edge"),e.name=o[1].replace(/\s+/,"");let n=(o[2]||"").split(/\.|-|_/);e.major=parseInt(n[0],10)||0,e.minor=parseInt(n[1],10)||0}return e}function Km(t){return!!(t.match(/ipad/)||t.match(/android/)&&!t.match(/mobi|mini|fennec/)||t.match(/macintosh/)&&window.navigator.maxTouchPoints>1)}function Ym(t){return!!t.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)}function Xm(t){return Ym(t)?"mobile":Km(t)?"tablet":"desktop"}function Sr(t){t=t||"";let e=t.toLowerCase();return{browser:Zm(e),deviceType:Xm(e)}}function _t(t){let e=new Error(t);return e.name="NotSupportedError",e.status="warn",e.stack=ue(e.stack,1),e}function Qm(){try{return!new Error("")}catch(t){return t}}function eg(){let t=Qm();if(t)throw t.name="NotSupportedError",t.status="warn",t.message="Missing feature: errorConstructor",t}function tg(){let{browser:t}=Sr(ge());if(typeof t=="object"){let e=t.name,r=t.major;if(e==="bot"||e==="msie"||e==="edge"&&r<15||e==="firefox"&&r<54||e==="chrome"&&r<42||e==="safari"&&r<10||e==="ucbrowser"||e==="miuibrowser"||e==="opera"&&r<38||e==="operamini")return!1}return!0}function od(){return de("bcai-bypass")==="true"}function nd(){if(!tg())throw new _t("Browser not supported");eg()}function Be(){return!!b(window,"Shopify")}function Wa(){return Be()&&$e()?.includes("products")}function id(){return Be()&&$e()?.includes("/search")}function rg(){return Be()&&$e()==="/"}function zn(){return Be()&&$e()?.includes("/cart")}function ad(){return!!b(window,"Shopify.Checkout")}function qa(){let t=k();return t&&t.includes("/checkouts")}function Ga(){let t=k();return t&&(t.includes("/thank_you")||t.includes("/purchase/thanks")||t.includes("/thank-you"))}function og(){let t=b(window,"Shopify.Checkout.isOrderStatusPage"),e=b(window,"Shopify.checkout");return t!==void 0||e!==void 0}function so(){return b(window,"Shopify.Checkout.currency")||b(window,"cart_json.currency")||b(window,"Shopify.currency.active")||b(window,"afterpay_shop_currency")}function Jn(){return b(window,"Shopify.Checkout.totalPrice")?.toString()}function Zn(){if(!Be())return;let t=b(window,"Shopify.Checkout.step");if(t)switch(t){case"payment_method":return"payment";case"shipping_method":return"shipping";case"contact_information":return"contact";case"thank_you":return"confirmation";default:return t}return og()?"order_status":Wa()?"products":rg()?"index":$e()}function Ko(){return globalThis?.Shopify?.routes?.root}function ja(){return globalThis?.Shopify?.routes?.cart_url}function sd(){let t=Ko(),e=ja();return t?`${t}cart.js`:e?`${e}.js`:"/cart.js"}function Ha(){return v()&&b(window,"shopifyEvent.name")==="checkout_completed"}function za(){return v()&&b(window,"shopifyEvent.name")==="payment_info_submitted"}function Ja(){return v()&&b(window,"shopifyEvent.name")==="page_viewed"}function Kn(){return Ha()||za()?window?.shopifyCheckout:{}}var ng="https://init.blackcrow.ai/",ig="https://shopify-init.blackcrow.ai/";function Za(){let t="ollypbc.js"?.replace(".js","");if(!t?.length)throw A("Error determining bundle name");let e=p;return e?.includes("init.blackcrow.ai")||(e=Be()?ig:ng,a.error(A(`ollypbc.js is not hosted on the blackcrow CDN but on ${p}.`))),`${e}config/${t}.json`}async function cd(){let t=await fetch(Za(),{method:"GET"});if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);let e=await t.json(),r=atob(e.data);return JSON.parse(r)}function Yo(t,e,r){if(t){let n=(t.options||{}).origEvent||{};if(clearTimeout(n.timeout),typeof t.callback=="function"&&!n.timeoutReached){try{t.callback(e)}catch(i){a.error(i)}typeof r=="function"&&r()}}}var ag=pe("bound_events"),sg=pe("triggered_events");function D(t,e,r,o={}){let n={appName:t,eventName:e,callback:r,options:o};ag.push(`${t}.${e}`,n),S(sg.get(`${t}.${e}`),i=>{Yo(n,i.data,i.onExec)})}function Ue(t,e,r=!0,o="error"){let n=new Error(t);return n.name=`${e||""}RequestError`,n.status=o,n.skipNotify=r,n.stack=ue(n.stack,1),n}function re(t,...e){return new Promise(r=>{setTimeout(r,t,[...e])}).catch(r=>a.error(r))}function Yn(t,e,r){return function(...n){try{return t.apply({},n)}catch(i){r&&r.interval&&clearInterval(r.interval),a.error(i,{appName:e})}}}function cg(t,e,...r){return setTimeout.apply(globalThis,[Yn(t,this.appName),e].concat(r))}function ug(t,e,...r){let o={},n=setInterval.apply(globalThis,[Yn(t,this.appName,o),e].concat(r));return o.interval=n,n}var Ka=class{constructor(e,r){this.asyncFn=e,this.interval=r,this.running=!1}start(){this.running||(this.running=!0,this.cycle())}stop(){this.running&&(this.running=!1)}async cycle(){try{await this.asyncFn()}catch{}try{await re(this.interval),this.running&&this.cycle()}catch(e){a.error(e),this.stop()}}};function dg(t,e,r,o){let n=r.wrapped||Yn(r,this.appName);r.wrapped=n,t.addEventListener?t.addEventListener(e,n,o):t.attachEvent&&t.attachEvent(e,n)}function lg(t,e,r,o){r?t.removeEventListener(e,r.wrapped,o):t.removeEventListener(e)}var _={fn:Yn,addListener:dg,removeListener:lg,setInterval:ug,SafeAsyncInterval:Ka,setTimeout:cg};function ut(t,e,r,o){function n(c){let u=new Ue(c.message,e.servletName);a.error(u,{customDimensions:{url:t}}),typeof o=="function"&&_.fn(o)(u)}function i(c){if(typeof c!="object"){n(new Error("JSON is not an object"));return}typeof r=="function"&&_.fn(r)(c||{})}function s(c){c.json().then(_.fn(i)).catch(u=>{n(new Error(`Invalid JSON ${u.message}`))})}K(t,e,s,n)}function Ya(){let t=Math.round(Ln());if(!t||t<1)return"0";if(t<10)return"10";let e="0";return S(`${t}`,(r,o)=>{o===0?e=r:e+="0"}),e}var Xa=document.documentElement,ud=window.screen,dd=Math.max;function ld(){let t=window?.innerHeight+window?.scrollY||0;return dd(Xa?.offsetHeight,Xa?.scrollHeight,t)}function pd(){return v()?window.outerHeight:ud?.height}function fd(){return v()?window.outerWidth:ud?.width}function Xn(){return dd(window.pageYOffset,Xa?.scrollTop)}async function ye(t){try{let e=v()?await globalThis.browser.localStorage.get(t):window.localStorage.getItem(t);return e?JSON.parse(e):null}catch{}return null}async function Q(t){try{if(v()){let e=await globalThis.browser.sessionStorage.getItem(t);return JSON.parse(e)}return JSON.parse(window.sessionStorage.getItem(t))}catch{}return null}var Qa,es;async function pg(){try{if(typeof es<"u")return es;let t,e=await I(ct);if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return es=t,t}catch(t){a.error(t);return}}async function md(){try{if(Qa)return Qa;let t=R("facebook_id")||await pg();return Qa=t,t}catch(t){a.error(t);return}}var ts;function fg(){let t=b(window,"Shopify.checkout.customer_id")||b(window,"ShopifyAnalytics.meta.page.customerId")||b(window,"__st.cid");if(t)return t.toString()}function gd(){if(v())return window?.shopifyCheckout?.order?.customer?.id;if(ts)return ts;let t=fg();return ts=t,t}var rs;async function mg(){try{return JSON.parse(window.atob(await I(qn))).$exchange_id}catch{return}}async function co(){try{if(rs)return rs;let t=await mg();return rs=t,t}catch(t){a.error(t);return}}function hd(){return window?.ju_config?.ju_vid}function yd(){return window?.bouncex?.cookie?.hardID}function vd(){return window?.bouncex?.cookie?.softID}function _d(){return window?.edgemesh?.id}function Ve(t,e){try{e&&(v()?(window.blackcrow.localStorage.set(t,JSON.stringify(e)),browser.localStorage.setItem(t,JSON.stringify(e))):window.localStorage.setItem(t,JSON.stringify(e)))}catch{}}function Qt(t){return`${Math.random().toString(36).substring(2,3)}${btoa(t)}`}function xr(t){return t?atob(t.substring(1)):void 0}function Xo(t){try{return document.querySelectorAll(`:is(${t})`)}catch{}try{return document.querySelectorAll(`:matches(${t})`)}catch{}try{return document.querySelectorAll(`:-webkit-any(${t})`)}catch{}try{return document.querySelectorAll(`:-moz-any(${t})`)}catch{return[]}}function wd(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.email&&t(r.email)}})}function Ed(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{email:r}=e.detail.values;r&&t(r)}})}function bd(t){D("predictive_offer","submit",e=>{e?.type==="email"&&e?.email&&t(e.email)})}function Pd(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=email]");e&&r&&_.addListener(e,"click",()=>{t(r[0]&&r[0].value)})}function Qn(){return b(window,"ShopifyCustomer.email")||b(window,"Shopify.checkout.email")||b(window,"Shopify.Checkout.customer.email")}function Sd(){return b(window,"userProperties.email")}function xd(){let t=b(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$email}function as(t){if(t)return t.trim()}function ss(t){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)}function Tr(t){let e=as(t);return e&&ss(e)?e:void 0}function Ar(t){let e=Tr(t);return e?Qt(e):void 0}function J(t){let e=Ar(t);e&&Ve(Vn,e)}function os(t,e=()=>{}){let r=["glproVideoMsgEmailField","gift"],o=r.some(n=>t?.className?.includes(n))||r.some(n=>t?.parentNode?.className?.toLowerCase().includes(n));o&&he("email_capture_ignored",{inputNodeClassName:t?.className,parentNodeClassName:t?.parentNode?.className}),t.value&&!o&&e(t.value)}function gg(t,e){let r=t.textContent||t.innerText;return r&&(r=r.toLowerCase()),r&&r.indexOf(e.toLowerCase())!==-1}function ns(t){return gg(t,"email")}function hg(t){if(t.labels){if(Array.from(t.labels).some(r=>ns(r)))return!0}else if(t.id&&Array.from(document.getElementsByTagName("label")).some(r=>r.htmlFor===t.id&&ns(r)))return!0;if(t.parentNode){let e=t.parentNode;return e.tagName.toLowerCase()==="label"&&ns(e)}return!1}function yg(t){return Array.from(t).filter(r=>hg(r))}var is='input[type="email"], input[autocomplete~="email"], input[placeholder~="email" i], input[type="text"][id*="email" i], input[type="text"][name*="email" i]';function cs(){let t=Xo(is);if(!t.length){let e=document.querySelectorAll('input[type="text"]');e.length&&(t=yg(e))}return t}function ei(t=e=>{}){let e=cs();S(e,r=>{os(r,t)}),_.addListener(window,"focusout",r=>{let o=r.target;o.matches(is)||Array.isArray(e)&&e.includes(o)?os(o,t):o.shadowRoot&&o.shadowRoot.querySelectorAll(is).forEach(n=>{os(n,t)})},!0)}function Td(t){let e=Qn()||Sd()||xd();e&&t(e),wd(r=>{t(r)}),Ed(r=>{t(r)}),bd(r=>{t(r)}),Pd(r=>{t(r)}),ei(r=>{t(r)})}function Ad(t=()=>{}){let e=Qn()||Sd()||xd();return e?(J(e),t()):(wd(r=>{J(r)}),bd(r=>{J(r)}),Pd(r=>{J(r)}),ei(r=>{J(r),t()}),Ed(r=>{J(r)})),e}async function Ee(t=!0){try{let e=await ye(Vn)||await I(Vn);return e?t?xr(e):e:void 0}catch(e){a.error(e);return}}function er(t,e){var r=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(r>>16);return o<<16|r&65535}function vg(t,e){return t<<e|t>>>32-e}function ti(t,e,r,o,n,i){return er(vg(er(er(e,t),er(o,i)),n),r)}function be(t,e,r,o,n,i,s){return ti(e&r|~e&o,t,e,n,i,s)}function Pe(t,e,r,o,n,i,s){return ti(e&o|r&~o,t,e,n,i,s)}function Se(t,e,r,o,n,i,s){return ti(e^r^o,t,e,n,i,s)}function xe(t,e,r,o,n,i,s){return ti(r^(e|~o),t,e,n,i,s)}function _g(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var r,o,n,i,s,c=1732584193,u=-271733879,g=-1732584194,h=271733878;for(r=0;r<t.length;r+=16)o=c,n=u,i=g,s=h,c=be(c,u,g,h,t[r],7,-680876936),h=be(h,c,u,g,t[r+1],12,-389564586),g=be(g,h,c,u,t[r+2],17,606105819),u=be(u,g,h,c,t[r+3],22,-1044525330),c=be(c,u,g,h,t[r+4],7,-176418897),h=be(h,c,u,g,t[r+5],12,1200080426),g=be(g,h,c,u,t[r+6],17,-1473231341),u=be(u,g,h,c,t[r+7],22,-45705983),c=be(c,u,g,h,t[r+8],7,1770035416),h=be(h,c,u,g,t[r+9],12,-1958414417),g=be(g,h,c,u,t[r+10],17,-42063),u=be(u,g,h,c,t[r+11],22,-1990404162),c=be(c,u,g,h,t[r+12],7,1804603682),h=be(h,c,u,g,t[r+13],12,-40341101),g=be(g,h,c,u,t[r+14],17,-1502002290),u=be(u,g,h,c,t[r+15],22,1236535329),c=Pe(c,u,g,h,t[r+1],5,-165796510),h=Pe(h,c,u,g,t[r+6],9,-1069501632),g=Pe(g,h,c,u,t[r+11],14,643717713),u=Pe(u,g,h,c,t[r],20,-373897302),c=Pe(c,u,g,h,t[r+5],5,-701558691),h=Pe(h,c,u,g,t[r+10],9,38016083),g=Pe(g,h,c,u,t[r+15],14,-660478335),u=Pe(u,g,h,c,t[r+4],20,-405537848),c=Pe(c,u,g,h,t[r+9],5,568446438),h=Pe(h,c,u,g,t[r+14],9,-1019803690),g=Pe(g,h,c,u,t[r+3],14,-187363961),u=Pe(u,g,h,c,t[r+8],20,1163531501),c=Pe(c,u,g,h,t[r+13],5,-1444681467),h=Pe(h,c,u,g,t[r+2],9,-51403784),g=Pe(g,h,c,u,t[r+7],14,1735328473),u=Pe(u,g,h,c,t[r+12],20,-1926607734),c=Se(c,u,g,h,t[r+5],4,-378558),h=Se(h,c,u,g,t[r+8],11,-2022574463),g=Se(g,h,c,u,t[r+11],16,1839030562),u=Se(u,g,h,c,t[r+14],23,-35309556),c=Se(c,u,g,h,t[r+1],4,-1530992060),h=Se(h,c,u,g,t[r+4],11,1272893353),g=Se(g,h,c,u,t[r+7],16,-155497632),u=Se(u,g,h,c,t[r+10],23,-1094730640),c=Se(c,u,g,h,t[r+13],4,681279174),h=Se(h,c,u,g,t[r],11,-358537222),g=Se(g,h,c,u,t[r+3],16,-722521979),u=Se(u,g,h,c,t[r+6],23,76029189),c=Se(c,u,g,h,t[r+9],4,-640364487),h=Se(h,c,u,g,t[r+12],11,-421815835),g=Se(g,h,c,u,t[r+15],16,530742520),u=Se(u,g,h,c,t[r+2],23,-995338651),c=xe(c,u,g,h,t[r],6,-198630844),h=xe(h,c,u,g,t[r+7],10,1126891415),g=xe(g,h,c,u,t[r+14],15,-1416354905),u=xe(u,g,h,c,t[r+5],21,-57434055),c=xe(c,u,g,h,t[r+12],6,1700485571),h=xe(h,c,u,g,t[r+3],10,-1894986606),g=xe(g,h,c,u,t[r+10],15,-1051523),u=xe(u,g,h,c,t[r+1],21,-2054922799),c=xe(c,u,g,h,t[r+8],6,1873313359),h=xe(h,c,u,g,t[r+15],10,-30611744),g=xe(g,h,c,u,t[r+6],15,-1560198380),u=xe(u,g,h,c,t[r+13],21,1309151649),c=xe(c,u,g,h,t[r+4],6,-145523070),h=xe(h,c,u,g,t[r+11],10,-1120210379),g=xe(g,h,c,u,t[r+2],15,718787259),u=xe(u,g,h,c,t[r+9],21,-343485551),c=er(c,o),u=er(u,n),g=er(g,i),h=er(h,s);return[c,u,g,h]}function wg(t){var e,r="",o=t.length*32;for(e=0;e<o;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function Eg(t){var e,r=[];for(r[(t.length>>2)-1]=void 0,e=0;e<r.length;e+=1)r[e]=0;var o=t.length*8;for(e=0;e<o;e+=8)r[e>>5]|=(t.charCodeAt(e/8)&255)<<e%32;return r}function bg(t){return wg(_g(Eg(t),t.length*8))}function Pg(t){var e="0123456789abcdef",r="",o,n;for(n=0;n<t.length;n+=1)o=t.charCodeAt(n),r+=e.charAt(o>>>4&15)+e.charAt(o&15);return r}function Sg(t){return unescape(encodeURIComponent(t))}function xg(t){return bg(Sg(t))}function Tg(t){return Pg(xg(t))}function us(t){return Tg(t)}function ds(t){return($("experiments")||[]).find(r=>r.name===t)||{}}function ls(t){let e=ds(t);if(!e.name)return e;let r=we(k());function o(i,s){let c,u;if(Array.isArray(i)&&i.length&&i[0].value&&typeof i[0].percent=="number")c=`${t}_${s}`,u=i;else if(i.allocations){let g=i.name||s;c=`${t}_${g}`,u=i.allocations}if(c&&u){let g=t,h=i.short_name||s;return le({name:c,allocations:u,force:r[`bcai_${g}_${h}`]})}return i}function n(i,s){if(!i)return i;let c=Array.isArray(i)?[]:{},u;return Object.keys(i).forEach(g=>{let h=s?`${s}_${g}`:g;u=o(i[g],h),c[g]=typeof u=="object"?n(u,h):u}),c}return{name:e.name,active:e.active,data:n(e.data)}}async function ps(){try{if(ls("pwo_additional_context")?.active){let e=await Ee();if(e)return us(`${e}bcai${l}`)}return}catch(t){a.error(t);return}}function Id(){return window?.__fudge__?.deviceId}var kd=t=>async()=>{try{return R(t)||await Q(t)||await ye(t)||await I(t)}catch(e){a.error(e);return}},Qo=t=>async()=>{try{return await I(t)}catch(e){a.error(e);return}},ve=(t,e)=>{let r;return async()=>{try{return r=r||await e(),{platform:t,id:r}}catch(o){a.error(o);return}}},Ag=ve("fa",md),Ig=ve("ga",Xt),kg=ve("cdp",kd("cdp_id")),Og=ve("shop_cid",gd),Cg=ve("shop_aid",Qo("_shopify_y")),Ng=ve("kl_cid",co),Rg=ve("attv_cid",Qo("__attentive_id")),Lg=ve("ju_cid",hd),Dg=ve("bx_hid",yd),Fg=ve("bx_sid",vd),Mg=ve("tab_cid",kd("taboola global:user-id")),$g=ve("bc_cid",Qo(Go)),Bg=ve("_bc_i",Dt),Ug=ve("_bt_uid",Qo("tag_user_id")),Vg=ve("_bc_em",ps),Wg=ve("edme_id",_d),qg=ve("fdg_id",Id),Gg=ve("_bcai_z",Qo("_bcai_z"));async function fs(){try{return[await Ag(),await Ig(),await kg(),await Og(),await Cg(),await Ng(),await Rg(),await Mg(),await $g(),await Bg(),await Lg(),await Dg(),await Fg(),await Ug(),await Vg(),await Wg(),await qg(),await Gg()]}catch(t){return a.error(t),[]}}var ms;async function gs(){try{return ms||await I(ha)||void 0}catch(t){return a.error(t),ms||void 0}}function Od(t){t&&(ms=t,Y(ha,t,1051200))}async function Cd(){try{let e=(await gs())?.split("_",3);if(e)return{page_correlation_id:e[0],session_id:e[1]};throw new ao("Attempted to parse historyId before it has been set!")}catch(t){a.error(t);return}}var en=pe("page"),jg={page:{ignored:!1,log_purchase:!1}};function Nd(t){return{page:{ignored:t.ignored,log_purchase:t.log_purchase}}}function Rd(t={},e){let r=R("page_id"),o=jg;r!==void 0&&t?S(t.filter(c=>c.pageName),c=>{if(c.pageName===r)return o=Nd(c),!1}):r===void 0&&t&&S(t.filter(c=>c.pattern),c=>{try{let u=e.match(c.pattern);if(u){if(r=c.pageName,o=Nd(c),u.length>1)for(let g=1;g<u.length;g+=1)r=r.replace(`$${g}`,u[g]);return!1}}catch{}}),r||(r="other");let n=en.get("lastUrl"),i=en.get("lastId"),s=r!==i||e!==n;return en.set("lastUrl",e),en.set("lastId",r),{id:r,config:o,isNewPage:s,currentUrl:e,lastUrl:n}}function Ir(){return en.get("lastId")}var hs={};function Ld(t){hs=t}async function Dd(t,e,r){try{let o={},n=Object.keys(hs||{});for(let i=0;i<n.length;i+=1){let s=n[i],c=hs[s];typeof c=="function"?o[s]=await c(t[s],e,r):typeof c<"u"&&(o[s]=c)}return o}catch(o){return a.error(o),{}}}function Hg(t,e){return e||(t==="_shopify_y"?"aid":t)}async function zg(t){try{let e,r=t.value,o=t.nameOverride,n=await I(r);return r&&n&&(e={name:Hg(r,o),value:n}),e}catch(e){a.error(e);return}}async function ee(t){try{let e=[];for(let r=0;r<t.length;r+=1){let o=t[r];if(o.source==="cookie"){let i=await zg(o);i&&e.push(i)}}return e}catch(e){return a.error(e),[]}}function We(t,e){let r=[];return t&&e&&r.push({name:t,value:e}),r}function Fd(){let t=$e(),e=/.*(\/checkouts\/[a-z]{1,3}\/)/gm;if(t?.match(e))return t=t.replace(e,""),t?.replace(/\/$/,"").split("/")[0];if(t?.includes("/checkouts/"))return t=t.replace(/.*checkouts\//,""),t?.replace(/\/$/,"").split("/")[0]}function Jg(){let t="0123456789abcdef";return t.charAt(Math.floor(Math.random()*t.length))}function tn(t){return new Array(t).fill(".",0,t).map(()=>Jg()).join("")}function rn(){return`${tn(8)}-${tn(4)}-${tn(4)}-${tn(4)}-${tn(12)}`}function tr(t){return t!==void 0?(t*.01).toLocaleString("en-US",{currency:"USD",minimumFractionDigits:2,useGrouping:!1}):void 0}function on(t){return t?typeof t=="string"?tr(t.replace(/\D/g,"")*1):t.toString():"0.00"}async function nn(t){try{let[e]=await ee(t);return e?.value?{external_id:e.value}:void 0}catch(e){a.error(e);return}}function Md(){let t=document.getElementById("shopify-pay-alternate-title");if(b(window,"ShopifyPay")&&t)return{custom_dimensions:{payment_type:"shop-pay"}};if(b(window,"Shopify.checkout")){let e=document.getElementsByClassName("payment-icon");if(e.length&&e[0].textContent)return{custom_dimensions:{payment_type:e[0].textContent.trim()}}}}function ys(){let t={},e=b(window,"Shopify.checkout"),r=b(window,"shopifyEvent.name");if(r&&P(t,{shopify_event_name:r}),e&&(P(t,{event_id:e.order_id,total_price:on(e.total_price),currency:e.presentment_currency,shipping_method:e.shipping_rate?.title,shipping_price:on(e.shipping_rate?.price),cart:e.line_items&&e.line_items.map(o=>({id:o.product_id,price:on(o.price),quantity:o.quantity,categories:[o.title],msrp:on(o.line_price),color:o.variant_title,brand:o.vendor}))}),e.discount)){let o=e.discount;P(t,{discounts:[{code:o.code,discount_amount:o.amount,discount_currency:e.currency,discount_percent:o.rate,applicable:o.applicable,reason:o.reason}]})}return t}function vs(t){return{destination_airport:t.destination_airport,destination_city:t.destination_city,destination_country:t.destination_country,destination_state:t.destination_state,end_date:t.end_date,lodging_id:t.lodging_id,origin_airport:t.origin_airport,rooms:t.rooms,start_date:t.start_date,travelers:t.travelers}}function _s(){return R("partner_controlled_experiments")}var Zg=.02,$d=le({name:"performance_sampling",allocations:[{percent:Zg,value:!0}]});function an(t=`${p}js/core/`){try{let e=Yt("resource").find(r=>r.name.includes(t));return e&&e.startTime}catch{a.error(new _t("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Kg(){try{let t=Yt("resource").find(e=>e.name.includes("gtm.js"));return t&&t.startTime}catch{a.error(new _t("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Bd(){try{let t=Yt("resource").find(e=>e.name.includes(`${p}js/core/`));if(t){let{name:e}=t;if(e.includes("shopify-init"))return"SHOPIFY";if(e.includes("source=gtm"))return"GTM"}return"JS"}catch{a.error(new _t("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Yg(){let t=an(),e=Bd();if(t&&e==="GTM"){let r=Kg();if(r)return t-r}}function Xg(){try{let t=Yt("resource").find(e=>e.name.includes("https://api.blackcrow.ai/v1/events/view"));return t&&t.startTime}catch{a.error(new _t("Unable to get time to view request: Browser does not support PerformanceResourceTiming interface"));return}}function Ud(){if($d){let t=an(),e=Bd()||"unknown",r=e==="GTM"?Yg()||"unknown":"N/A";t&&he(`Initial script load after ${t} ms`,{"script.start_time":t,"script.load_method":e,"script.time_since_gtm_start":r,"view.url":R("page_url")||k(),"view.referrer":R("page_referrer_url")||Ce()})}}function Vd(){if($d){let t=Xg()-an();t&&he(`Time to initiate view request: ${t} ms`,{"script.time_to_view":t,"view.url":R("page_url")||k(),"view.referrer":R("page_referrer_url")||Ce()})}}function Wd(){return{nb:{active:!!window.Northbeam},tw:{active:!!window.TriplePixel},bt:{active:!!window.edgetag},rb:{active:!!window.Rebuy},np:{active:!!window.fetchNovelSession},yp:{active:!!window.Yotpo},jm:{active:!!window.judgeme},lx:{active:!!window.LOOX},rp:{active:!!window.alchemy},ub:{active:!!window.ub?.page},ip:{active:!!window._instapageSnowplow},oke:{active:!!window.okeConnectApi},sg:{active:!!window.shogunAnalytics}}}var H={VIEW:"view",PURCHASE:"purchase",DELAYED_PURCHASE:"delayed_purchase",BAD_ACTOR_TIMEOUT:"bad_actor_timeout",BAD_ACTOR_BEFOREUNLOAD:"bad_actor_beforeunload",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",PWO_DECISION:"pwo_decision",PRED_WELCOME_DECISION:"pred_welcome_decision",EXIT_INTENT:"exit_intent",SITE_SPEED_BUCKETING:"site_speed_bucketing",SITE_SPEED_FID_METRIC:"site_speed_fid_metric",SITE_SPEED_LCP_METRIC:"site_speed_lcp_metric"};function ri(){return{api_client_type:"JS",api_client_version:"16437",api_client_source:ma()}}function wt(t){let e=R(`custom_${t}`);return typeof e=="object"?Array.isArray(e)?String(e):JSON.stringify(e):e}function Qg(t,...e){return t=t||{},S(e,r=>{S(r,(o,n)=>{(o||o===0||o===!1)&&(t[n]=o)})}),t}function eh(){return{coupon:R("coupon"),shipping_method:R("shipping_method"),shipping_price:R("shipping_price"),total_price:R("total_price"),zip_code:R("zip_code"),custom_1:wt(1),custom_2:wt(2),custom_3:wt(3),custom_4:wt(4),custom_5:wt(5),custom_6:wt(6),custom_7:wt(7),custom_8:wt(8),custom_9:wt(9),custom_10:wt(10),traffic_groups:R("traffic_groups"),partner_controlled_experiments:_s(),referrer_source:R("referrer_source"),referrer_medium:R("referrer_medium"),referrer_campaign:R("referrer_campaign"),referrer_term:R("referrer_term"),cart:R("cart"),currency:R("currency"),is_logged_in_user:R("user_is_logged_in"),user_has_subscription:R("user_has_subscription")}}async function th(t){try{let e=await ot();return{metadata:ri(),build:"16437",site_name:l,custom_dimensions:R("custom_dimensions"),device_info:ge(),device_width:fd(),device_height:pd(),page_id:t,page_url:R("page_url")||k(),page_referrer_url:R("page_referrer_url")||Ce(),page_title:R("page_title")||io(),page_time:Ya(),visitor_id:e.id,internal_id:Dt(),member_id:R("member_id"),history_id:await gs(),user_identifiers:await fs(),user_metadata:{visitor_id:{source:e.source,name:e.name,fallback_used:e.fallback}},bundle_load_start:an(),attr:Wd()}}catch(e){return a.error(e),{}}}function rh(t){return t?["view","purchase","delayed_purchase"].includes(t):!0}function oh(t){return t?["view","purchase"].includes(t):!0}function nh(t){return t?t==="purchase":!0}var ih={travel:vs};function ah(){let t={};return S(ih,(e,r)=>{let o=R(`${r}`);o&&(t[r]=e(o))}),t}function sh(t){["custom_dimensions","event_id"].forEach(r=>{t[r]===void 0&&(t[r]="")})}function ch(t){return[H.PWO_DECISION,H.PWO_OPEN_ATTEMPT,H.PWO_IMPR,H.PWO_EMAIL_LEAD,H.PWO_SMS_LEAD,H.PWO_CLOSE].includes(t)}function uh(t){return[H.SITE_SPEED_BUCKETING,H.SITE_SPEED_FID_METRIC,H.SITE_SPEED_LCP_METRIC].includes(t)}async function ws(t,e={}){try{let r=e.page_id||Ir(),o=await th(r);rh(t)&&(o={...o,...eh()},P(o,ah(),ys())),nh(t)&&o.purchase_type===void 0&&(o.purchase_type=""),(ch(t)||uh(t))&&(o={...o,...e}),sh(o),S(o,(i,s)=>{typeof e[s]<"u"&&(o[s]=e[s])}),oh(t)||P(o,{custom_dimensions:await Cd()});let n=await Dd(o,t,r);return Qg({},o,n)}catch(r){return a.error(r),{}}}var dh=500,Es={},bs={};function Ps(){bs={},Es={}}function qd(t){return bs[t]||0}function lh(t){let e=!1,r=t==="view"?1:$(`config.events.${t}.dedupe.limit_per_page`);return r&&(e=qd(t)>=r),e?"limit_per_page":""}function ph(t,e){return t.startsWith("datalayer-")?"":e-(Es[t]||0)<dh?"debounce":""}async function fh(t,e,r){try{let o="",n=e.event_id,i=$(`config.events.${t}.dedupe.time_threshold`);if(n||i){let s=await ye(ya)||{},c=s[t]||{};i&&r-(c.time||0)<parseInt(i,10)&&(o="time_threshold"),!o&&n&&n===c.id&&(o="repeat_id"),o||(s[t]={time:r,id:n},Ve(ya,s))}return o}catch(o){return a.error(o),""}}async function Gd(t,e){try{let r=Date.now(),o=ph(t,r)||lh(t)||await fh(t,e,r);return o||(bs[t]=qd(t)+1,Es[t]=r),o}catch(r){a.error(r);return}}var Ss="EventsAPI";async function ce(t,e,r,o){try{let n=`https://api.blackcrow.ai/v1/events/${t}?`;Rt(l)&&(n=`https://api.sandbox.blackcrow.ai/v1/events/${t}?`);let i=await ws(t,e);i.event_name=t;let s=await Gd(t,i);if(s){a.error(new Ue(`Duplicate ${t}: ${s}`,Ss));return}let c=JSON.stringify(i),u={servletName:Ss,method:"POST",cache:"no-cache",body:c};fe(`request: ${t}`,{body:c}),ut(n,u,r,o)}catch(n){a.error(new Ue(n,Ss))}}function jd(t){let e="https://api.blackcrow.ai/v1/events/platform?";Rt(l)&&(e="https://api.sandbox.blackcrow.ai/v1/events/platform?"),t.event_name="platform";let r=JSON.stringify(t);oo(e,r)}var y={START:"start",SESSION:"session",SET:"set",EXTEND:"extend",REFRESH:"refresh",PARTNER_EVENT:"partner_event",VIEW:"view",VIEW_RESPONSE:"view_response",PURCHASE:"purchase",SCORES_UPDATE:"scores_update",IDENTIFY:"identify",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",OVERRIDES:"overrides",CLEAR_OVERRIDES:"clear_overrides",EXIT_INTENT:"exit_intent",ADD_TO_CART:"add_to_cart",INITIATE_CHECKOUT:"initiate_checkout"};var mh=["purchase","referral","call","update_account"],gh=["purchase","referral","call"];function Hd(t){return mh.indexOf(t)!==-1}function hh(t){let e=t.trigger,r=t.data||{};e==="call"&&(r.purchase_type="call"),gh.indexOf(e)!==-1&&(e=H.PURCHASE),ce(e,r)}function zd(){D("platform",y.PARTNER_EVENT,hh)}function xs({appName:t,eventName:e,data:r,sendFn:o}){let n={namespace:d,app_name:t,event_name:e,data:r};if(o)o(n,"*");else try{window.top.postMessage(n,"*")}catch(i){if(i instanceof DataCloneError)a.error(new _t("Attempting to post invalid message object"));else throw i}}var yh=pe("bound_events"),vh=pe("triggered_events");function Te(t,e,r,o){o=o||{},o.noCache||vh.push(`${t}.${e}`,{data:r,onExec:o.onExec});let n=yh.get(`${t}.${e}`);S(n,i=>{Yo(i,r,o.onExec)}),o.postMessage&&xs({appName:t,eventName:e,data:r})}function U(t,e=()=>{},r=9,o=300,n=!1){try{return t()}catch(i){return r?_.setTimeout(()=>U(t,e,r-1,n?o*2:o,n),o):e(i)}}function _h(){v()||(a.postMessageEventListener&&_.removeListener(window,"message",a.postMessageEventListener),a.postMessageEventListener=t=>{let e=t.data||{};e.namespace===d&&(fe(`trigger: ${e.event_name}`,e.data),Te(e.app_name||"platform",e.event_name,e.data))},_.addListener(window,"message",a.postMessageEventListener))}function uo(t){if(!t)return;let e=t.app_name||"platform",r=t.data,o=t.trigger;if(o){fe(`trigger: ${o}`,t),o===y.EXTEND?Gn(r):o===y.SET?jn(r):Hd(o)?Te(e,y.PARTNER_EVENT,t):Te(e,o,r);return}let n=t.bind;if(n){fe(`bind: ${n}`,t),D(e,n,t.callback,{origEvent:t});return}fe("unrecognized",t)}function Jd(){S(f,t=>{uo(t)})}function Zd(){return U(()=>_h(),t=>a.error(t)),uo}function Ts(){Zd(),a.push=uo,a.history=Gu}var Kd="IntentProperties";function Ft(t){return t?b(window[Kd],t):window[Kd]}function As(){let t=Ft();if(t){let e={page_id:t.page_id,visitor_id:t.visitor_id||t.publisher_user_id,member_id:t.member_id,user_is_logged_in:t.is_logged_in_user,user_has_subscription:t.user_has_subscription,page_url:t.page_url,page_referrer_url:t.page_referrer_url,page_title:t.page_title,referrer_source:t.referrer_source,site_currency:t.site_currency,site_country:t.site_country,site_language:t.site_language,site_name:t.site_name,traffic_groups:t.traffic_groups,custom_1:t.site_custom_1,custom_2:t.site_custom_2,custom_3:t.site_custom_3,custom_4:t.site_custom_4,custom_5:t.site_custom_5,custom_6:t.site_custom_6,custom_7:t.site_custom_7};t.cart&&(e.cart=t.cart),t.travel&&(e.travel=P({},{start_date:t.travel.start_date,end_date:t.travel.end_date,origin_airport:t.travel.origin_airport,destination_airport:t.travel.destination_airport,travelers:t.travel.travelers})),uo({trigger:y.EXTEND,data:e})}}var wh=pe("bound_events"),Eh=pe("triggered_events");function Is(){wh.clear($("config.clearBindings")),Eh.clear()}function Yd(){let t=b(window,"Shopify.checkout.total_tax");if(t)return t;let e=document.querySelectorAll("[data-checkout-total-taxes-target]");return e.length?e[0].textContent.startsWith("$")?e[0].textContent.trim().substring(1):e[0].textContent.trim():"0.00"}function ie(t){/complete|interactive|loaded/.test(document.readyState)?t():_.addListener(document,"DOMContentLoaded",()=>{t()})}async function ks(){try{let t=await I("cart"),e=await I(va);return t&&Y(va,t),!t||!e||e!==t}catch{return!0}}function bh(){return{total_price:Ft("total_price"),coupon:Ft("coupon"),shipping_method:Ft("shipping_method"),shipping_price:Ft("shipping_price"),zip_code:Ft("zip_code")}}function Os(t){if(!t)return;let e=t.amount??0;return tr(e*100)}function Xd(){if(v()){let r=window.shopifyCheckout;return r?{event_id:r.order?.id,total_price:Os(r.totalPrice),shipping_price:Os(r.shippingLine?.price),custom_dimensions:{tax_amount:Os(r.totalTax)}}:{}}let t=Md(),e={custom_dimensions:{tax_amount:window.Shopify?Yd():void 0},total_price:window.cart_json?.total_price};return P({},t,e)}function Ph(){window.IntentProperties&&Gn(bh()),Y(Bu,!0,1051200),ce(H.PURCHASE,Xd())}async function Cs(){$("page.log_purchase")&&await ks()&&(Ph(),ie(()=>{ce(H.DELAYED_PURCHASE,Xd())}))}var dt="audience";function nt(t){return Ma(`apps.${t}`)}var Qd="o",el=`${d}_audience|score_update`,Ns=`${d}_score`,tl=`contextData.${Ns}`;function j(t){let e=Number(t);return isNaN(e)?t:e}var B="Integration not available";function oe(t,e){return(r,o,n)=>{if(!r)return;function i(s){s.message===B?a.error(new A(`${t} globals not found`),{appName:o}):a.error(s)}U(()=>e(r,o,n),i)}}var Rs="adobe_analytics";function xh(t,e,r){let o=b(window,"s.tl");if(typeof o=="function"){let n={contextData:{[Ns]:j(t.score)},linkTrackVars:tl};o(!0,Qd,el,n),typeof r=="function"&&r(Rs,n);return}throw new Error(B)}var Ls={name:Rs,send:oe(Rs,xh)};var rl="event";function V(t,e="|"){return t.filter(r=>r!=null&&r!=="").join(e)}var Ds="dynamic_yield";function Th(t){return t==="1"?"low":t==="2"?"medium":"high"}function Ah(t,e,r){let o=b(window,"DY.API"),n;t.threshold_group_count==="3"&&(n=Th(t.score));let i=V([d,t.comparison_group.toLowerCase(),n||`score_${t.score}`]);if(typeof o=="function"){let s=j(t.score);o(rl,{name:i,properties:{}}),typeof r=="function"&&r(Ds,{EVENT_PREFIX:`${d}_${e}`,score:s})}else throw new Error(B)}var Fs={name:Ds,send:oe(Ds,Ah)};function sn(t){let e=new Error(t);return e.name="ConfigDataError",e.status="warn",e.stack=ue(e.stack,1),e}function ol(t,e){let r=encodeURIComponent(t);return e&&(r=r.replace(/%2C/g,",")),r}function Ae(t,e=!0){let r=[];return S(t,(o,n)=>{if(o!=null&&o!==""){let i=typeof o;i==="function"?o=o.name:i==="object"&&(Array.isArray(o)?o=o.toString():o=JSON.stringify(o)),r.push(`${ol(n,e)}=${ol(o,e)}`)}}),r.join("&")}function Ms(t,e){return typeof t=="string"&&typeof e=="string"?t.localeCompare(e,void 0,{sensitivity:"accent"})===0:t===e}function nl(t){let e=`${t}`;return e.length===1?`0${e}`:e}function kr(t){if(t)return new Date(t?.replace(/-/g,"/"))}function oi(t,e=""){if(t)return`${t.getFullYear()}${e}${nl(t.getMonth()+1)}${e}${nl(t.getDate())}`}function Ih(t){if(t&&t.formBuckets){let e=new Date,r=t.formBuckets||[],o=r.filter(i=>!i.startDate&&!i.endDate),n=r.filter(i=>i.startDate&&kr(i.startDate)<=e&&(!i.endDate||kr(i.endDate)>=e));if(n.length!==0){let i="01-Jan-2100 04:00:00 UTC";n.sort((u,g)=>kr(g.startDate)-kr(u.startDate)),n.sort((u,g)=>{let h=u.endDate||i,E=g.endDate||i;return kr(h)-kr(E)});let s=n[0].startDate,c=n[0].endDate;n=n.filter(u=>u.startDate===s&&u.endDate===c)}t.formBuckets=n.length>0?n:o,t.formBuckets.length===0&&delete t.formBuckets}return t}function $s(t,e="PWO",r=["formBuckets","overlayBuckets","overlayBuckets_triggerBuckets","overlayBuckets_triggerBuckets_formBuckets"]){if(t?.overlaySetting===void 0||t?.overlaySetting===null)return t;let o=we(k());function n(s,c){let u,g;if(Array.isArray(s)&&s.length){let h=JSON.parse(JSON.stringify(s));typeof h[0].percent!="number"&&r.includes(c)&&(h[0].percent=1),typeof h[0].percent=="number"&&(u=`${e}_${c}`,g=h.map(E=>({percent:E.percent,value:{...E}})))}if(u&&g){let h=e,E=s.short_name||c;return le({name:u,allocations:g,force:o[`bcai_${h}_${E}`]})}return s}function i(s,c){if(s==null)return s;let u=Array.isArray(s)?[]:{},g;return Object.keys(s).forEach(h=>{let E=c?`${c}_${h}`:h;g=n(s[h],E),u[h]=typeof g=="object"?i(g,E):g}),u}return{...t,overlaySetting:i(Ih(t.overlaySetting))}}function kh(t){let e=k()?.toLowerCase();return e&&t?.length?t.find(r=>e.match(r.toLowerCase())):!1}function Oh(t,e){let r=t.filter(n=>Ms(n.app,e));return r.length?r.find(n=>kh(n.allowedUrlPatterns))||r.find(n=>!n.allowedUrlPatterns?.length)||{}:{}}function lt(t){if(t){let e=$("apps")||[];if(e)return Oh(e,t)}return{}}function ni(t){let e=lt(t).platforms||[],r=[];return e.forEach(o=>{r.push(o.platform.toLowerCase())}),r}function z(t,e){if(t&&e){let r=lt(t);if(r)return(r.platforms||[]).find(i=>Ms(i.platform,e))||{}}return{}}function ii(t){return t?$s(lt(t),t).overlaySetting||{}:{}}function Or(t){return t?lt(t).identitySetting||{}:{}}function Cr(t,e){let r=Or(t).platforms?.filter(i=>i.platform?.toLowerCase()===e),o=[],n=k();return n&&(o=r?.filter(i=>i.allowedUrlPatterns?.some(s=>n.includes(s)))),o.length||(o=r?.filter(i=>!i.allowedUrlPatterns?.length)),o}function ai(){return Cr("identity","facebook_ads").length>0}function il(t,e){return Cr(t,e).some(r=>r.loadPixel)}async function Et(t,e=10,r=300,o=!1){let n=e,i=r,s;do try{return await t()}catch(c){n-=1,n&&(await re(i),i=o?i*2:i,s=c)}while(n);throw s}var sl="event",cn="owox",si=[];async function Ch(t){let e=await Xt();if(e)t(e);else throw new Error(B)}function al(t,e,r,o){t.cid=e,t.z=Date.now(),K(`https://google-analytics.bi.owox.com/${r}?${Ae(t)}`,{method:"GET"},()=>o(cn,t))}function Nh(t,e,r){let o=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,i=z(e,cn).tracking_id;if(typeof o=="function"){let s=_.setTimeout(()=>{a.error(new A(`${cn} ready hook not fired`))},5e3);o(c=>{if(clearTimeout(s),i=i||c&&c.get("trackingId"),i||S(o.getAll(),u=>{let g=u.get("trackingId");if(g)return i=g,!1}),i){if(!t)return;let u=`${d}_${e}`,g=V([u,t.integration_product,t.conversion_product,t.conversion_type]),h=V([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]);si.push({v:1,ni:1,t:sl,tid:i,dl:k(),ec:g,ea:h,el:j(t.score)}),Array.isArray(si)&&Et(Ch(E=>{let q=si;si={push:me=>{al(me,E,i,r)}},q.forEach(me=>{al(me,E,i,r)})}))}else a.error(new sn(`${cn} tracking id not found`))})}}var Bs={eventHitType:sl,name:cn,send:Nh};var Rh=le({name:"kpi_sampling",allocations:[{percent:.1,value:!0}]});async function Mt(t,e,r){try{if(Rh){let o=await ot();he(`${r} ${e}`,{"evt.name":r,"evt.integration":e,appName:t,"usr.id":o.id,"view.url":R("page_url")||k(),"view.referrer":R("page_referrer_url")||Ce()})}}catch(o){a.error(o)}}var Us={[Ls.name]:Ls,[Fs.name]:Fs,[Bs.name]:Bs};function Vs(t,e,r){Mt(dt,t,e),fe(`${dt} ${e}: ${t}`,r)}function Lh(t,e){Us[t]!==void 0&&e&&S(e,r=>{r.name&&Us[t].send(r,dt,(o,n)=>{Vs(o,"score_push",n)})})}function Dh(){let t=nt(`${dt}.scores`);t&&t.length&&Te(dt,y.SCORES_UPDATE,t,{onExec:()=>{Vs(l,y.SCORES_UPDATE,t)}});let e=t?t[0]:null;if(e){let r={score:parseInt(e.score,10),comparison_group:e.comparison_group,threshold_group_count:e.threshold_group_count};Te(dt,"score_update",P({},r),{onExec:()=>{Vs(l,"score_update",r)}})}}function Fh(t){let e=nt(`${dt}.integrations`),r=[];return S(e,o=>{let n=o.platform;t[n]&&r.push(t[n].then(()=>{Lh(n,o.scores)}))}),Dh(),Promise.all(r)}var cl={appName:dt,platforms:Us,sendAppScores:Fh};function dl(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.phone&&t(`+1${r.phone}`)}})}function ll(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{phone:r}=e.detail.values;r&&t(r.includes("+")?r:`+${r}`)}})}function pl(t){D("predictive_offer","submit",e=>{e?.type==="sms"&&e?.phone_number&&t(e.phone_number)})}function fl(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=tel]");e&&r&&_.addListener(e,"click",()=>{if(r[0]){let o=r[0].value;t(o)}})}function ml(){return b(window,"Shopify.checkout.phone")}function gl(){let t=b(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$phone}function qs(t){let e=t.match("\\+")?t:`+1${t}`;return e=e.replace(/^(\+)|\D/g,"$1"),e}function Gs(t){return new RegExp(/^\+\d{10,14}$/g).test(t)}function Nr(t){let e=qs(t);return Gs(e)?Qt(e):void 0}function te(t){let e=Nr(t);e&&Ve(Wn,e)}function ul(t,e=()=>{}){t.value&&e(t.value)}var Ws='input[type="tel"], input[autocomplete~="tel"], input[type="text"][id*="phone" i], input[type="text"][name*="phone" i]';function hl(t=()=>{}){let e=Xo(Ws);S(e,r=>{ul(r,t)}),_.addListener(document,"focusout",r=>{let o=r.target;if(o.matches(Ws)){let n=o.value;n&&t(n)}else o.shadowRoot&&o.shadowRoot.querySelectorAll(Ws).forEach(n=>{ul(n,t)})},!0)}function yl(t){let e=ml()||gl();e&&t(e),dl(r=>{t(r)}),ll(r=>{t(r)}),pl(r=>{t(r)}),fl(r=>{t(r)}),hl(r=>{t(r)})}function vl(t=()=>{}){let e=ml()||gl();return e?(te(e),t()):(dl(r=>{te(r)}),pl(r=>{te(r)}),fl(r=>{te(r)}),hl(r=>{te(r),t()}),ll(r=>{te(r)})),e}async function Rr(t=!0){try{let e=await ye(Wn)||await I(Wn);return e?t?xr(e):e:void 0}catch(e){a.error(e);return}}function Mh(t){let e=document.getElementById("continue_button"),r=document.getElementById("checkout_shipping_address_first_name"),o=document.getElementById("checkout_shipping_address_last_name");e&&r&&o&&_.addListener(e,"click",()=>{t(r.value,o.value)})}function _l(){Mh((t,e)=>{Ve(Pa,Qt(t)),Ve(Sa,Qt(e))})}async function wl(){try{let t=await ye(Pa);return t?xr(t):void 0}catch(t){a.error(t);return}}async function El(){try{let t=await ye(Sa);return t?xr(t):void 0}catch(t){a.error(t);return}}function $h(t){if(t)return t.replace(/['.,/#!$%^&*;:{}=\-_`~()]/g,"")}function ci(t){let e=$h(t);return e?Qt(e):void 0}function Bh(t,e){let r=t[e];if(r){let{first_name:o,last_name:n}=r;if(n){let i={fn:o,ln:n};return o&&(i.fln=`${o} ${n}`),P({},i)}}}function bl(){let t=[],e=Be()&&b(window,"Shopify.checkout");return e&&["billing_address","credit_card","shipping_address"].forEach(r=>{let o=Bh(e,r);o&&t.push(o)}),t.length?t:void 0}function js(t,e){let r=document.createElement(t);return Object.keys(e).forEach(n=>{r[n]=e[n]}),r}function Hs(t){if(!t||!crypto||!crypto.subtle||typeof crypto.subtle.digest!="function")return Promise.resolve(void 0);let e=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",e).then(r=>Array.from(new Uint8Array(r))).then(r=>r.map(o=>o.toString(16).padStart(2,"0")).join(""))}function ui(t){let e=Object.keys(t).map(r=>Hs(t[r]).then(o=>{t[r]=o}));return Promise.all(e).then(()=>P({},t))}var Uh="facebook_ads";async function zs(){try{let t=await Rr(),e={em:await Ee(),ph:t&&t.replace(/\D/g,""),fn:await wl(),ln:await El()};return P({},e)}catch(t){return a.error(t),{}}}async function Pl(t,e,r,o,n){try{let i=`https://www.facebook.com/tr?id=${t}&ev=${o}&noscript=1`,s=await zs(),c=await ui(s),u=await I(ct),g=await I(Lt);return S(c,(h,E)=>{i+=`&ud[${E}]=${h}`}),S(n,(h,E)=>{i+=`&cd[${E}]=${h?.toString()}`}),r&&(i+=`&ud[external_id]=${r}`),e&&(i+=`&eid=${e}`,i+="&cdl=API_unavailable",i+="&rqm=GET",i+="&coo=false"),u&&(i+=`&fbp=${u}`),g&&(i+=`&fbc=${g}`),i}catch(i){return a.error(i),`https://www.facebook.com/tr?id=${t}&ev=${o}`}}function Sl(t,e,r){return Pl(t,void 0,void 0,e,r).then(o=>{let n=js("img",{width:1,height:1,src:o});n.style.display="none",document&&document.body&&typeof document.body.append=="function"&&document.body.append(n)})}function di(t,e,r,o,n,i){return Pl(t,e,r,o,n).then(s=>{s+="&",s+=Ae({dl:k(),rl:document.referrer}),U(()=>{K(s,{method:"GET"},i,c=>{throw c})},c=>a.error(new Error(`${Uh} api call failed with message ${c.message}`)),9,300,!0)})}var rr="measure";function li(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.config&&window.ShopifyAnalytics.lib.config["Facebook Pixel"]&&window.ShopifyAnalytics.lib.config["Facebook Pixel"].conversionsAPIEnabled}var xl=0;function Tl(){return xl+=1,xl}function Js(){(function(t,e,r,o,n,i,s){t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},t._fbq||(t._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],i=e.createElement(r),i.async=!0,i.src=o,s=e.getElementsByTagName(r)[0],s.parentNode.insertBefore(i,s))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js")}function Zs(t){return e=>{e.message===B?a.error(new A(t)):a.error(e)}}function pi(t,e){v()||(Js(),window.fbq("init",t,e))}var un="facebook_ads",Il="trackCustom";function kl(t,e){window.fbq("init",t,e)}function Ol(t){if(typeof window.fbq!="function"||typeof window.fbq.getState!="function")throw new Error(B);if(typeof window.fbq.getState().then=="function")window.fbq.getState().then(({pixels:e})=>{e&&e.length>0&&t(e)});else if(window.fbq.getState().pixels&&window.fbq.getState().pixels.length>0)t(window.fbq.getState().pixels);else throw new Error(B)}function fi(){return $("facebookAccounts")||[]}function Cl(t){return t===void 0?li():t}function Nl(t,e){t.forEach(r=>{let o=r.pixelId,n=r.advancedMatching;if(o){let i=Cl(n)?e:{};v()||kl(o,i)}})}function Vh(t,e,r){let o=fi();o.length&&Nl(o,e),r()}function Wh(t,e,r){Js();let o=fi();function n(){Ol(i=>{i.forEach(s=>{Cl()&&kl(s.id,e)})})}U(()=>{if(typeof window.fbq!="function")throw new Error(B);o.length?Nl(o,e):n(),r()},Zs(`${un} globals not found`))}function Rl(t,e,r){return function(){typeof t=="function"&&t(un,{eventName:e,eventObject:r})}}function qh(t,e,r,o){let n=Rl(o,e,r),i=fi();i.length&&i.forEach(s=>{let c=s.pixelId;di(c,void 0,void 0,e,r,n)})}function Gh(t,e,r,o){let n=Rl(o,e,r);Ol(()=>{window.fbq(Il,e,r),n()})}function jh(t,e){fi().forEach(o=>{let n=o.pixelId;n&&Sl(n,t,e)})}function Hh(t,e,r,o){return n=>(jh(t,e),typeof o=="function"&&o(`${un}`,{eventName:t,eventObject:e},"score_push_img_pixel"),r(n))}function zh(t){return`${d}_${t}`}function Jh(t,e,r){let o;return t===rr?o=V([d,r],"_"):o=V([e,r]),o}function Zh(t,e){return{app_name:t,integration_product:e.integration_product,conversion_product:e.conversion_product,conversion_type:e.conversion_type,comparison_population:e.comparison_population,comparison_group:e.comparison_group,comparison_type:e.comparison_type,threshold_setter:e.threshold_setter,threshold_group_count:e.threshold_group_count,score:j(e.score),event_date:oi(new Date,"-"),eventDate:oi(new Date)}}function Ll(t,e){let r=zh(t);return{eventName:Jh(t,r,e.integration_product),eventObject:Zh(r,e)}}function Kh(t,e,r){if(!t)return;let o=Ll(e,t);qh(e,o.eventName,o.eventObject,r)}function Yh(t,e,r){if(!t)return;let o=Ll(e,t),n=o.eventName,i=o.eventObject;U(()=>Gh(e,n,i,r),Hh(n,P({},i,{eventHitId:Tl()}),Zs(`${un} globals not found`),r),80,150)}function Xh(t,e,r){v()?Kh(t,e,r):Yh(t,e,r)}async function Al(t,e){try{let r=await zs();v()?Vh(t,r,e):Wh(t,r,e)}catch(r){a.error(r)}}var or={eventHitType:Il,name:un,identify:Al,setup:Al,send:Xh};var Ks={[or.name]:or};function Qh(t,e,r="score_push"){Mt(rr,t,r),fe(`${rr} ${r}: ${t}`,e)}function ey(t,e){Ks[t]!==void 0&&e&&e.length>0?(Y(jo,"scored",30),S(e,r=>{r.name&&Ks[t].send(r,rr,Qh)})):Y(jo,"enabled",30)}function ty(t){let e=de("blackcrow_promising_user")||"";return t==="enabled"||t===void 0&&e.toLowerCase()==="active"||t===void 0&&k().toLowerCase().indexOf("blackcrow_promising_user%3dactive")>0}async function ry(t){try{let e=nt(`${rr}.integrations`),r=await I(jo),o=[];return r==="scored"?Y(jo,"scored",30):ty(r)&&S(e,n=>{let i=n.platform;t[i]&&o.push(t[i].then(()=>{ey(i,n.scores)}))}),Promise.all(o)}catch(e){return a.error(e),Promise.resolve([])}}var Dl={appName:rr,platforms:Ks,sendAppScores:ry};var W="pwo",Fl="alia",Ml="amped",mi="attentive",nr="justuno",gi="klaviyo",hi="postscript",$l="recart",Bl="sendlane",Ul="wisepops",Vl="yotpo",Wl="smart_id",Lr={DO_NOT_SEND:"true"},ir={DELAY:"delay",SESSION_VIEW_COUNT:"page_view",EXIT_INTENT:"exit_intent"};var Dr=class{static getPlatformName(){return mi}isIdentified(){return de("utm_source")==="attentive"}setup(){}isInitialized(){return!0}static getInstance(){return new Dr}};function Ys(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get(t,e){return e==="push"?function(){let r;(r=window._klOnsite).push.apply(r,arguments)}:function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];let i=typeof o[o.length-1]=="function"?o.pop():void 0;return new Promise(c=>{window._klOnsite.push([e].concat(o,[function(u){i&&i(u),c(u)}]))})}}})}catch{window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){let e;(e=window._klOnsite).push.apply(e,arguments)}}}}function yi(){return A("Klaviyo globals not found.")}function dn(t){let e=window?.klaviyo?.push||window?._learnq?.push||window?._klOnsite?.push;if(typeof e=="function")return e(t);throw yi()}function vi(){return!!(window._klOnsite?._loaded||window._learnq?._loaded)}function _i(t,e={}){return t&&P(e,{$email:t}),e}function Xs(){return window?.klaviyo?.identify||window?._learnq?.identify}function ln(t){let e=Xs();return typeof e=="function"?e(t):dn(["identify",t])}function ql(){if(typeof window?.klaviyo?.isIdentified=="function")return window.klaviyo.isIdentified();if(typeof window?._learnq?.isIdentified=="function")return window._learnq.isIdentified();throw yi()}function Qs(){return window?.klaviyo?.openForm}function Gl(t){let e=Qs();if(typeof e=="function")return e(t);throw yi()}async function jl(){if(typeof window?.klaviyo?.account=="function")return window.klaviyo.account();if(typeof window?._learnq?.account=="function")return window._learnq.account();throw yi()}function Hl(t,e,r=500){let o,n=new _.SafeAsyncInterval(async()=>{try{let i=await I(t);if(o===void 0)o=i;else if(o&&i!==o)try{await e(i)}catch(s){a.error(s),n.stop()}finally{o=i}}catch{}},r);return n.start(),n}function Ie(t,e){try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}async function zl(t,e){try{v()?await globalThis.browser.sessionStorage.setItem(t,JSON.stringify(e)):window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}function ar(t,e,r=new Error("Request timed out")){let o=new Promise((n,i)=>{_.setTimeout(()=>{i(r)},e)});return Promise.race([t,o])}var Fr=class extends Error{constructor(r){super(r);this.status="warn"}};function pn(t,...e){return new Promise((r,o)=>{t(...e,n=>r(n),n=>o(n))})}function wi(t,e){return pn(K,t,e)}var Ne=class{constructor(){this.applicationName=W?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return gi}setupEmailListenerCallback(){ie(()=>{ei(e=>{let r=Tr(e);r&&ln(_i(r))})})}async sendIdentityIfUnidentified(){try{if(await this.isIdentified()===!1){let r=await Ee();r?ln(_i(r)):this.setupEmailListenerCallback()}}catch(e){a.error(e)}}handlePostSetup(){if(Zn()==="confirmation"){let e=Hl(qn,async()=>{try{let r=await co();r&&(await ce("kl_purchase",{kl_cid:r}),e.stop())}catch(r){a.error(r)}});return Ee().then(r=>{let o=r||Qn();o&&ln(_i(o))}).catch(r=>a.error(r))}return this.sendIdentityIfUnidentified()}static isKlaviyoLoaded(){return vi()&&typeof Xs()=="function"}setup(){return Ne.isKlaviyoLoaded()||Ys(),new Promise((e,r)=>U(()=>{if(!Ne.isKlaviyoLoaded())throw new Error(`${Ne.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,this.handlePostSetup().catch(o=>{a.error(o)}).finally(e)},()=>{let o=A(`[${this.applicationName}] ${Ne.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}setIdentifiedByKlaviyoInSession(){Ie(xa,!0)}async isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Ne.getPlatformName()} was not initialized.`);if(await Q(xa))return!0;if(de("_kx"))return this.setIdentifiedByKlaviyoInSession(),!0;let r=`[${this.applicationName}] ${Ne.getPlatformName()}.isIdentified() Promise did not resolve.`,o=await ar(Et(async()=>{let n=await ql();if(typeof n!="boolean")throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Ne.getPlatformName()}.isIdentified() is not returning a boolean.`);return n}),4e3,new Fr(r));return o===!0&&this.setIdentifiedByKlaviyoInSession(),o}async addAttributesToUserProfile(e){ln(P({},{$email:await Ee(),$phone:await Rr()},e)),e.blackcrow_identified&&(dn(["track","Black Crow Identified"]),await this.callServerEvent(e).catch(r=>a.error(r)))}async callServerEvent(e){let r=await jl(),o=await Rr(),n=await Ee(),i={method:"POST",headers:{accept:"application/json",revision:"2023-12-15","content-type":"application/json"},body:JSON.stringify({data:{type:"event",attributes:{properties:{},time:new Date().toISOString(),metric:{data:{type:"metric",attributes:{name:"Black Crow Identified"}}},profile:{data:{type:"profile",attributes:P({email:n,phone_number:o},{properties:{...e}})}}}}})};return wi(`https://a.klaviyo.com/client/events/?company_id=${r}`,i)}static getInstance(){return new Ne}};function ne(t,e){a.push({trigger:t,data:e})}function ec(t){try{t instanceof Error&&t.stack&&(t.stack=Fu(t.stack))}catch{}}function Jl(t){return typeof t=="string"?t:t instanceof Request?t.url??"":""}function fn(t,e){if(typeof e!="function")return;let r=window.fetch;window.fetch=(...o)=>r.apply(this,o).then(n=>{try{Jl(o[0]).match(t)&&e(n.clone())}catch(i){a.error(new Ue(`Fetch Sniffer for "${t}" failing with "${i?.message}" possibly due to unexpected ${o}.`))}return n}).catch(n=>{throw ec(n),n})}function bt(t,e,r){let o=window.fetch;window.fetch=function(...n){try{if(Jl(n[0]).match(t)){if(r)return o.apply(this,n).then(_.setTimeout(()=>e(n),500)).catch(i=>{throw ec(i),i});e(n)}}catch{a.error(new Ue(`Fetch Intercept Error For URL: ${t}`))}return o.apply(this,n).catch(i=>{throw ec(i),i})}}var Pt=class{constructor(){this.appLogAppenders={}}static booleanToEmoji(e){return e?"\u2705":"\u274C"}static formatDiagnosticStatus({state:e,message:r}){return`${e!==void 0?`${Pt.booleanToEmoji(e)} - `:""}${r}`}static formatDiagnosticGroup({title:e,lines:r}){return`${e}:
${r.map(o=>Pt.formatDiagnosticStatus(o)).join(`
`)}`}static async formatAppLogAppender(e){return e.getLogData().then(r=>r.map(o=>Pt.formatDiagnosticGroup(o)).join(`
`))}static isDiagnosticLoggingEnabledForApp(e){return we(window.location.search)?.bcaiDiag?.includes(e)}setAppLogAppender(e,r){this.appLogAppenders[r]=e}getAppLogAppender(e){return this.appLogAppenders[e]}async logDiagnostics(e,r){try{if(!Pt.isDiagnosticLoggingEnabledForApp(r))return;let o=this.appLogAppenders[r];globalThis?.console?.log(`[${r} Diagnostics]
${e?`${e}
`:""}${o?await Pt.formatAppLogAppender(o):""}`)}catch(o){a.error(o)}}};var St=class{static get diagnostics(){return this.diagnosticsInstance||(this.diagnosticsInstance=new Pt),this.diagnosticsInstance}static getAppLogAppender(e){return St.diagnostics.getAppLogAppender(e)}static setAppLogAppender(e,r){St.diagnostics.setAppLogAppender(e,r)}static logDiagnostics(e,r){St.diagnostics.logDiagnostics(e,r)}};async function oy(){try{return Number(await I(Ea))||0}catch(t){return a.error(t),0}}async function He(){try{return Number(await I(ba))||0}catch(t){return a.error(t),0}}async function Zl(){try{let t=await oy();Y(Ea,t+1,1051200);let e=await He();e<1&&Te("platform",y.SESSION),Y(ba,e+1,30)}catch(t){a.error(t)}}var G;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let i={};for(let s of n)i[s]=s;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(c=>typeof n[n[c]]!="number"),s={};for(let c of i)s[c]=n[c];return t.objectValues(s)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.push(s);return i},t.find=(n,i)=>{for(let s of n)if(i(s))return s},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}t.joinValues=o,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(G||(G={}));var rc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(rc||(rc={}));var x=G.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),sr=t=>{switch(typeof t){case"undefined":return x.undefined;case"string":return x.string;case"number":return isNaN(t)?x.nan:x.number;case"boolean":return x.boolean;case"function":return x.function;case"bigint":return x.bigint;case"symbol":return x.symbol;case"object":return Array.isArray(t)?x.array:t===null?x.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?x.promise:typeof Map<"u"&&t instanceof Map?x.map:typeof Set<"u"&&t instanceof Set?x.set:typeof Date<"u"&&t instanceof Date?x.date:x.object;default:return x.unknown}},w=G.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ny=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Je=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},o={_errors:[]},n=i=>{for(let s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(n);else if(s.code==="invalid_return_type")n(s.returnTypeError);else if(s.code==="invalid_arguments")n(s.argumentsError);else if(s.path.length===0)o._errors.push(r(s));else{let c=o,u=0;for(;u<s.path.length;){let g=s.path[u];u===s.path.length-1?(c[g]=c[g]||{_errors:[]},c[g]._errors.push(r(s))):c[g]=c[g]||{_errors:[]},c=c[g],u++}}};return n(this),o}toString(){return this.message}get message(){return JSON.stringify(this.issues,G.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},o=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):o.push(e(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};Je.create=t=>new Je(t);var mn=(t,e)=>{let r;switch(t.code){case w.invalid_type:t.received===x.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case w.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,G.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:r=`Unrecognized key(s) in object: ${G.joinValues(t.keys,", ")}`;break;case w.invalid_union:r="Invalid input";break;case w.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${G.joinValues(t.options)}`;break;case w.invalid_enum_value:r=`Invalid enum value. Expected ${G.joinValues(t.options)}, received '${t.received}'`;break;case w.invalid_arguments:r="Invalid function arguments";break;case w.invalid_return_type:r="Invalid function return type";break;case w.invalid_date:r="Invalid date";break;case w.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:G.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case w.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case w.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case w.custom:r="Invalid input";break;case w.invalid_intersection_types:r="Intersection results could not be merged";break;case w.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case w.not_finite:r="Number must be finite";break;default:r=e.defaultError,G.assertNever(t)}return{message:r}},Xl=mn;function iy(t){Xl=t}function bi(){return Xl}var Pi=t=>{let{data:e,path:r,errorMaps:o,issueData:n}=t,i=[...r,...n.path||[]],s={...n,path:i},c="",u=o.filter(g=>!!g).slice().reverse();for(let g of u)c=g(s,{data:e,defaultError:c}).message;return{...n,path:i,message:n.message||c}},ay=[];function T(t,e){let r=Pi({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,bi(),mn].filter(o=>!!o)});t.common.issues.push(r)}var _e=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let o=[];for(let n of r){if(n.status==="aborted")return L;n.status==="dirty"&&e.dirty(),o.push(n.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,r){let o=[];for(let n of r)o.push({key:await n.key,value:await n.value});return _e.mergeObjectSync(e,o)}static mergeObjectSync(e,r){let o={};for(let n of r){let{key:i,value:s}=n;if(i.status==="aborted"||s.status==="aborted")return L;i.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||n.alwaysSet)&&(o[i.value]=s.value)}return{status:e.value,value:o}}},L=Object.freeze({status:"aborted"}),Ql=t=>({status:"dirty",value:t}),Re=t=>({status:"valid",value:t}),oc=t=>t.status==="aborted",nc=t=>t.status==="dirty",gn=t=>t.status==="valid",Si=t=>typeof Promise<"u"&&t instanceof Promise,O;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(O||(O={}));var it=class{constructor(e,r,o,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Kl=(t,e)=>{if(gn(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Je(t.common.issues);return this._error=r,this._error}}};function F(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:o,description:n}=t;if(e&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(s,c)=>s.code!=="invalid_type"?{message:c.defaultError}:typeof c.data>"u"?{message:o??c.defaultError}:{message:r??c.defaultError},description:n}}var M=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return sr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new _e,ctx:{common:e.parent.common,data:e.data,parsedType:sr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Si(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let o=this.safeParse(e,r);if(o.success)return o.data;throw o.error}safeParse(e,r){var o;let n={common:{issues:[],async:(o=r?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Kl(n,i)}async parseAsync(e,r){let o=await this.safeParseAsync(e,r);if(o.success)return o.data;throw o.error}async safeParseAsync(e,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sr(e)},n=this._parse({data:e,path:o.path,parent:o}),i=await(Si(n)?n:Promise.resolve(n));return Kl(o,i)}refine(e,r){let o=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let s=e(n),c=()=>i.addIssue({code:w.custom,...o(n)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(c(),!1)):s?!0:(c(),!1)})}refinement(e,r){return this._refinement((o,n)=>e(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(e){return new Ke({schema:this,typeName:N.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return pt.create(this,this._def)}nullable(){return Wt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ze.create(this,this._def)}promise(){return dr.create(this,this._def)}or(e){return Ur.create([this,e],this._def)}and(e){return Vr.create(this,e,this._def)}transform(e){return new Ke({...F(this._def),schema:this,typeName:N.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Hr({...F(this._def),innerType:this,defaultValue:r,typeName:N.ZodDefault})}brand(){return new xi({typeName:N.ZodBranded,type:this,...F(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ho({...F(this._def),innerType:this,catchValue:r,typeName:N.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return zr.create(this,e)}readonly(){return vo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},sy=/^c[^\s-]{8,}$/i,cy=/^[a-z][a-z0-9]*$/,uy=/^[0-9A-HJKMNP-TV-Z]{26}$/,dy=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ly=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,py="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",tc,fy=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,my=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,gy=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function hy(t,e){return!!((e==="v4"||!e)&&fy.test(t)||(e==="v6"||!e)&&my.test(t))}var ze=class extends M{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==x.string){let i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_type,expected:x.string,received:i.parsedType}),L}let o=new _e,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let s=e.data.length>i.value,c=e.data.length<i.value;(s||c)&&(n=this._getOrReturnCtx(e,n),s?T(n,{code:w.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&T(n,{code:w.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")ly.test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"email",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")tc||(tc=new RegExp(py,"u")),tc.test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"emoji",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")dy.test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"uuid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")sy.test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"cuid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")cy.test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"cuid2",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")uy.test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"ulid",code:w.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),T(n,{validation:"url",code:w.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"regex",code:w.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),T(n,{code:w.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),T(n,{code:w.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),T(n,{code:w.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?gy(i).test(e.data)||(n=this._getOrReturnCtx(e,n),T(n,{code:w.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="ip"?hy(e.data,i.version)||(n=this._getOrReturnCtx(e,n),T(n,{validation:"ip",code:w.invalid_string,message:i.message}),o.dirty()):G.assertNever(i);return{status:o.value,value:e.data}}_regex(e,r,o){return this.refinement(n=>e.test(n),{validation:r,code:w.invalid_string,...O.errToObj(o)})}_addCheck(e){return new ze({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...O.errToObj(e)})}url(e){return this._addCheck({kind:"url",...O.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...O.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...O.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...O.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...O.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...O.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...O.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...O.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...O.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...O.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...O.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...O.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...O.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...O.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...O.errToObj(r)})}nonempty(e){return this.min(1,O.errToObj(e))}trim(){return new ze({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ze({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ze.create=t=>{var e;return new ze({checks:[],typeName:N.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...F(t)})};function yy(t,e){let r=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,n=r>o?r:o,i=parseInt(t.toFixed(n).replace(".","")),s=parseInt(e.toFixed(n).replace(".",""));return i%s/Math.pow(10,n)}var xt=class extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==x.number){let i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_type,expected:x.number,received:i.parsedType}),L}let o,n=new _e;for(let i of this._def.checks)i.kind==="int"?G.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{code:w.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),T(o,{code:w.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),T(o,{code:w.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?yy(e.data,i.value)!==0&&(o=this._getOrReturnCtx(e,o),T(o,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),T(o,{code:w.not_finite,message:i.message}),n.dirty()):G.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,O.toString(r))}gt(e,r){return this.setLimit("min",e,!1,O.toString(r))}lte(e,r){return this.setLimit("max",e,!0,O.toString(r))}lt(e,r){return this.setLimit("max",e,!1,O.toString(r))}setLimit(e,r,o,n){return new xt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:O.toString(n)}]})}_addCheck(e){return new xt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:O.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:O.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:O.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:O.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:O.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&G.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(r)&&Number.isFinite(e)}};xt.create=t=>new xt({checks:[],typeName:N.ZodNumber,coerce:t?.coerce||!1,...F(t)});var Tt=class extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==x.bigint){let i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_type,expected:x.bigint,received:i.parsedType}),L}let o,n=new _e;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),T(o,{code:w.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),T(o,{code:w.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),T(o,{code:w.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):G.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,O.toString(r))}gt(e,r){return this.setLimit("min",e,!1,O.toString(r))}lte(e,r){return this.setLimit("max",e,!0,O.toString(r))}lt(e,r){return this.setLimit("max",e,!1,O.toString(r))}setLimit(e,r,o,n){return new Tt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:O.toString(n)}]})}_addCheck(e){return new Tt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:O.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Tt.create=t=>{var e;return new Tt({checks:[],typeName:N.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...F(t)})};var Mr=class extends M{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==x.boolean){let o=this._getOrReturnCtx(e);return T(o,{code:w.invalid_type,expected:x.boolean,received:o.parsedType}),L}return Re(e.data)}};Mr.create=t=>new Mr({typeName:N.ZodBoolean,coerce:t?.coerce||!1,...F(t)});var Ut=class extends M{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==x.date){let i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_type,expected:x.date,received:i.parsedType}),L}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return T(i,{code:w.invalid_date}),L}let o=new _e,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),T(n,{code:w.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):G.assertNever(i);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ut({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:O.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:O.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Ut.create=t=>new Ut({checks:[],coerce:t?.coerce||!1,typeName:N.ZodDate,...F(t)});var po=class extends M{_parse(e){if(this._getType(e)!==x.symbol){let o=this._getOrReturnCtx(e);return T(o,{code:w.invalid_type,expected:x.symbol,received:o.parsedType}),L}return Re(e.data)}};po.create=t=>new po({typeName:N.ZodSymbol,...F(t)});var $r=class extends M{_parse(e){if(this._getType(e)!==x.undefined){let o=this._getOrReturnCtx(e);return T(o,{code:w.invalid_type,expected:x.undefined,received:o.parsedType}),L}return Re(e.data)}};$r.create=t=>new $r({typeName:N.ZodUndefined,...F(t)});var Br=class extends M{_parse(e){if(this._getType(e)!==x.null){let o=this._getOrReturnCtx(e);return T(o,{code:w.invalid_type,expected:x.null,received:o.parsedType}),L}return Re(e.data)}};Br.create=t=>new Br({typeName:N.ZodNull,...F(t)});var ur=class extends M{constructor(){super(...arguments),this._any=!0}_parse(e){return Re(e.data)}};ur.create=t=>new ur({typeName:N.ZodAny,...F(t)});var Bt=class extends M{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Re(e.data)}};Bt.create=t=>new Bt({typeName:N.ZodUnknown,...F(t)});var ft=class extends M{_parse(e){let r=this._getOrReturnCtx(e);return T(r,{code:w.invalid_type,expected:x.never,received:r.parsedType}),L}};ft.create=t=>new ft({typeName:N.ZodNever,...F(t)});var fo=class extends M{_parse(e){if(this._getType(e)!==x.undefined){let o=this._getOrReturnCtx(e);return T(o,{code:w.invalid_type,expected:x.void,received:o.parsedType}),L}return Re(e.data)}};fo.create=t=>new fo({typeName:N.ZodVoid,...F(t)});var Ze=class extends M{_parse(e){let{ctx:r,status:o}=this._processInputParams(e),n=this._def;if(r.parsedType!==x.array)return T(r,{code:w.invalid_type,expected:x.array,received:r.parsedType}),L;if(n.exactLength!==null){let s=r.data.length>n.exactLength.value,c=r.data.length<n.exactLength.value;(s||c)&&(T(r,{code:s?w.too_big:w.too_small,minimum:c?n.exactLength.value:void 0,maximum:s?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(T(r,{code:w.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(T(r,{code:w.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((s,c)=>n.type._parseAsync(new it(r,s,r.path,c)))).then(s=>_e.mergeArray(o,s));let i=[...r.data].map((s,c)=>n.type._parseSync(new it(r,s,r.path,c)));return _e.mergeArray(o,i)}get element(){return this._def.type}min(e,r){return new Ze({...this._def,minLength:{value:e,message:O.toString(r)}})}max(e,r){return new Ze({...this._def,maxLength:{value:e,message:O.toString(r)}})}length(e,r){return new Ze({...this._def,exactLength:{value:e,message:O.toString(r)}})}nonempty(e){return this.min(1,e)}};Ze.create=(t,e)=>new Ze({type:t,minLength:null,maxLength:null,exactLength:null,typeName:N.ZodArray,...F(e)});function lo(t){if(t instanceof X){let e={};for(let r in t.shape){let o=t.shape[r];e[r]=pt.create(lo(o))}return new X({...t._def,shape:()=>e})}else return t instanceof Ze?new Ze({...t._def,type:lo(t.element)}):t instanceof pt?pt.create(lo(t.unwrap())):t instanceof Wt?Wt.create(lo(t.unwrap())):t instanceof at?at.create(t.items.map(e=>lo(e))):t}var X=class extends M{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=G.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==x.object){let g=this._getOrReturnCtx(e);return T(g,{code:w.invalid_type,expected:x.object,received:g.parsedType}),L}let{status:o,ctx:n}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),c=[];if(!(this._def.catchall instanceof ft&&this._def.unknownKeys==="strip"))for(let g in n.data)s.includes(g)||c.push(g);let u=[];for(let g of s){let h=i[g],E=n.data[g];u.push({key:{status:"valid",value:g},value:h._parse(new it(n,E,n.path,g)),alwaysSet:g in n.data})}if(this._def.catchall instanceof ft){let g=this._def.unknownKeys;if(g==="passthrough")for(let h of c)u.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(g==="strict")c.length>0&&(T(n,{code:w.unrecognized_keys,keys:c}),o.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let g=this._def.catchall;for(let h of c){let E=n.data[h];u.push({key:{status:"valid",value:h},value:g._parse(new it(n,E,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let g=[];for(let h of u){let E=await h.key;g.push({key:E,value:await h.value,alwaysSet:h.alwaysSet})}return g}).then(g=>_e.mergeObjectSync(o,g)):_e.mergeObjectSync(o,u)}get shape(){return this._def.shape()}strict(e){return O.errToObj,new X({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,o)=>{var n,i,s,c;let u=(s=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,r,o).message)!==null&&s!==void 0?s:o.defaultError;return r.code==="unrecognized_keys"?{message:(c=O.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new X({...this._def,unknownKeys:"strip"})}passthrough(){return new X({...this._def,unknownKeys:"passthrough"})}extend(e){return new X({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new X({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:N.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new X({...this._def,catchall:e})}pick(e){let r={};return G.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(r[o]=this.shape[o])}),new X({...this._def,shape:()=>r})}omit(e){let r={};return G.objectKeys(this.shape).forEach(o=>{e[o]||(r[o]=this.shape[o])}),new X({...this._def,shape:()=>r})}deepPartial(){return lo(this)}partial(e){let r={};return G.objectKeys(this.shape).forEach(o=>{let n=this.shape[o];e&&!e[o]?r[o]=n:r[o]=n.optional()}),new X({...this._def,shape:()=>r})}required(e){let r={};return G.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof pt;)i=i._def.innerType;r[o]=i}}),new X({...this._def,shape:()=>r})}keyof(){return ep(G.objectKeys(this.shape))}};X.create=(t,e)=>new X({shape:()=>t,unknownKeys:"strip",catchall:ft.create(),typeName:N.ZodObject,...F(e)});X.strictCreate=(t,e)=>new X({shape:()=>t,unknownKeys:"strict",catchall:ft.create(),typeName:N.ZodObject,...F(e)});X.lazycreate=(t,e)=>new X({shape:t,unknownKeys:"strip",catchall:ft.create(),typeName:N.ZodObject,...F(e)});var Ur=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o=this._def.options;function n(i){for(let c of i)if(c.result.status==="valid")return c.result;for(let c of i)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let s=i.map(c=>new Je(c.ctx.common.issues));return T(r,{code:w.invalid_union,unionErrors:s}),L}if(r.common.async)return Promise.all(o.map(async i=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(n);{let i,s=[];for(let u of o){let g={...r,common:{...r.common,issues:[]},parent:null},h=u._parseSync({data:r.data,path:r.path,parent:g});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:g}),g.common.issues.length&&s.push(g.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let c=s.map(u=>new Je(u));return T(r,{code:w.invalid_union,unionErrors:c}),L}}get options(){return this._def.options}};Ur.create=(t,e)=>new Ur({options:t,typeName:N.ZodUnion,...F(e)});var Ei=t=>t instanceof qr?Ei(t.schema):t instanceof Ke?Ei(t.innerType()):t instanceof Gr?[t.value]:t instanceof At?t.options:t instanceof jr?Object.keys(t.enum):t instanceof Hr?Ei(t._def.innerType):t instanceof $r?[void 0]:t instanceof Br?[null]:null,mo=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.object)return T(r,{code:w.invalid_type,expected:x.object,received:r.parsedType}),L;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(T(r,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),L)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,o){let n=new Map;for(let i of r){let s=Ei(i.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of s){if(n.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);n.set(c,i)}}return new mo({typeName:N.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...F(o)})}};function ic(t,e){let r=sr(t),o=sr(e);if(t===e)return{valid:!0,data:t};if(r===x.object&&o===x.object){let n=G.objectKeys(e),i=G.objectKeys(t).filter(c=>n.indexOf(c)!==-1),s={...t,...e};for(let c of i){let u=ic(t[c],e[c]);if(!u.valid)return{valid:!1};s[c]=u.data}return{valid:!0,data:s}}else if(r===x.array&&o===x.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let s=t[i],c=e[i],u=ic(s,c);if(!u.valid)return{valid:!1};n.push(u.data)}return{valid:!0,data:n}}else return r===x.date&&o===x.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Vr=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=(i,s)=>{if(oc(i)||oc(s))return L;let c=ic(i.value,s.value);return c.valid?((nc(i)||nc(s))&&r.dirty(),{status:r.value,value:c.data}):(T(o,{code:w.invalid_intersection_types}),L)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,s])=>n(i,s)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};Vr.create=(t,e,r)=>new Vr({left:t,right:e,typeName:N.ZodIntersection,...F(r)});var at=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.array)return T(o,{code:w.invalid_type,expected:x.array,received:o.parsedType}),L;if(o.data.length<this._def.items.length)return T(o,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),L;!this._def.rest&&o.data.length>this._def.items.length&&(T(o,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((s,c)=>{let u=this._def.items[c]||this._def.rest;return u?u._parse(new it(o,s,o.path,c)):null}).filter(s=>!!s);return o.common.async?Promise.all(i).then(s=>_e.mergeArray(r,s)):_e.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new at({...this._def,rest:e})}};at.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new at({items:t,typeName:N.ZodTuple,rest:null,...F(e)})};var Wr=class extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.object)return T(o,{code:w.invalid_type,expected:x.object,received:o.parsedType}),L;let n=[],i=this._def.keyType,s=this._def.valueType;for(let c in o.data)n.push({key:i._parse(new it(o,c,o.path,c)),value:s._parse(new it(o,o.data[c],o.path,c))});return o.common.async?_e.mergeObjectAsync(r,n):_e.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,o){return r instanceof M?new Wr({keyType:e,valueType:r,typeName:N.ZodRecord,...F(o)}):new Wr({keyType:ze.create(),valueType:e,typeName:N.ZodRecord,...F(r)})}},go=class extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.map)return T(o,{code:w.invalid_type,expected:x.map,received:o.parsedType}),L;let n=this._def.keyType,i=this._def.valueType,s=[...o.data.entries()].map(([c,u],g)=>({key:n._parse(new it(o,c,o.path,[g,"key"])),value:i._parse(new it(o,u,o.path,[g,"value"]))}));if(o.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let u of s){let g=await u.key,h=await u.value;if(g.status==="aborted"||h.status==="aborted")return L;(g.status==="dirty"||h.status==="dirty")&&r.dirty(),c.set(g.value,h.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let u of s){let g=u.key,h=u.value;if(g.status==="aborted"||h.status==="aborted")return L;(g.status==="dirty"||h.status==="dirty")&&r.dirty(),c.set(g.value,h.value)}return{status:r.value,value:c}}}};go.create=(t,e,r)=>new go({valueType:e,keyType:t,typeName:N.ZodMap,...F(r)});var Vt=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==x.set)return T(o,{code:w.invalid_type,expected:x.set,received:o.parsedType}),L;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(T(o,{code:w.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(T(o,{code:w.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function s(u){let g=new Set;for(let h of u){if(h.status==="aborted")return L;h.status==="dirty"&&r.dirty(),g.add(h.value)}return{status:r.value,value:g}}let c=[...o.data.values()].map((u,g)=>i._parse(new it(o,u,o.path,g)));return o.common.async?Promise.all(c).then(u=>s(u)):s(c)}min(e,r){return new Vt({...this._def,minSize:{value:e,message:O.toString(r)}})}max(e,r){return new Vt({...this._def,maxSize:{value:e,message:O.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Vt.create=(t,e)=>new Vt({valueType:t,minSize:null,maxSize:null,typeName:N.ZodSet,...F(e)});var cr=class extends M{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.function)return T(r,{code:w.invalid_type,expected:x.function,received:r.parsedType}),L;function o(c,u){return Pi({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bi(),mn].filter(g=>!!g),issueData:{code:w.invalid_arguments,argumentsError:u}})}function n(c,u){return Pi({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,bi(),mn].filter(g=>!!g),issueData:{code:w.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof dr){let c=this;return Re(async function(...u){let g=new Je([]),h=await c._def.args.parseAsync(u,i).catch(me=>{throw g.addIssue(o(u,me)),g}),E=await Reflect.apply(s,this,h);return await c._def.returns._def.type.parseAsync(E,i).catch(me=>{throw g.addIssue(n(E,me)),g})})}else{let c=this;return Re(function(...u){let g=c._def.args.safeParse(u,i);if(!g.success)throw new Je([o(u,g.error)]);let h=Reflect.apply(s,this,g.data),E=c._def.returns.safeParse(h,i);if(!E.success)throw new Je([n(h,E.error)]);return E.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new cr({...this._def,args:at.create(e).rest(Bt.create())})}returns(e){return new cr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,o){return new cr({args:e||at.create([]).rest(Bt.create()),returns:r||Bt.create(),typeName:N.ZodFunction,...F(o)})}},qr=class extends M{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};qr.create=(t,e)=>new qr({getter:t,typeName:N.ZodLazy,...F(e)});var Gr=class extends M{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return T(r,{received:r.data,code:w.invalid_literal,expected:this._def.value}),L}return{status:"valid",value:e.data}}get value(){return this._def.value}};Gr.create=(t,e)=>new Gr({value:t,typeName:N.ZodLiteral,...F(e)});function ep(t,e){return new At({values:t,typeName:N.ZodEnum,...F(e)})}var At=class extends M{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),o=this._def.values;return T(r,{expected:G.joinValues(o),received:r.parsedType,code:w.invalid_type}),L}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),o=this._def.values;return T(r,{received:r.data,code:w.invalid_enum_value,options:o}),L}return Re(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return At.create(e)}exclude(e){return At.create(this.options.filter(r=>!e.includes(r)))}};At.create=ep;var jr=class extends M{_parse(e){let r=G.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==x.string&&o.parsedType!==x.number){let n=G.objectValues(r);return T(o,{expected:G.joinValues(n),received:o.parsedType,code:w.invalid_type}),L}if(r.indexOf(e.data)===-1){let n=G.objectValues(r);return T(o,{received:o.data,code:w.invalid_enum_value,options:n}),L}return Re(e.data)}get enum(){return this._def.values}};jr.create=(t,e)=>new jr({values:t,typeName:N.ZodNativeEnum,...F(e)});var dr=class extends M{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==x.promise&&r.common.async===!1)return T(r,{code:w.invalid_type,expected:x.promise,received:r.parsedType}),L;let o=r.parsedType===x.promise?r.data:Promise.resolve(r.data);return Re(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};dr.create=(t,e)=>new dr({type:t,typeName:N.ZodPromise,...F(e)});var Ke=class extends M{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===N.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:s=>{T(o,s),s.fatal?r.abort():r.dirty()},get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let s=n.transform(o.data,i);return o.common.issues.length?{status:"dirty",value:o.data}:o.common.async?Promise.resolve(s).then(c=>this._def.schema._parseAsync({data:c,path:o.path,parent:o})):this._def.schema._parseSync({data:s,path:o.path,parent:o})}if(n.type==="refinement"){let s=c=>{let u=n.refinement(c,i);if(o.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(o.common.async===!1){let c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?L:(c.status==="dirty"&&r.dirty(),s(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>c.status==="aborted"?L:(c.status==="dirty"&&r.dirty(),s(c.value).then(()=>({status:r.value,value:c.value}))))}if(n.type==="transform")if(o.common.async===!1){let s=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!gn(s))return s;let c=n.transform(s.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(s=>gn(s)?Promise.resolve(n.transform(s.value,i)).then(c=>({status:r.value,value:c})):s);G.assertNever(n)}};Ke.create=(t,e,r)=>new Ke({schema:t,typeName:N.ZodEffects,effect:e,...F(r)});Ke.createWithPreprocess=(t,e,r)=>new Ke({schema:e,effect:{type:"preprocess",transform:t},typeName:N.ZodEffects,...F(r)});var pt=class extends M{_parse(e){return this._getType(e)===x.undefined?Re(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};pt.create=(t,e)=>new pt({innerType:t,typeName:N.ZodOptional,...F(e)});var Wt=class extends M{_parse(e){return this._getType(e)===x.null?Re(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Wt.create=(t,e)=>new Wt({innerType:t,typeName:N.ZodNullable,...F(e)});var Hr=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return r.parsedType===x.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Hr.create=(t,e)=>new Hr({innerType:t,typeName:N.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...F(e)});var ho=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return Si(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Je(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Je(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};ho.create=(t,e)=>new ho({innerType:t,typeName:N.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...F(e)});var yo=class extends M{_parse(e){if(this._getType(e)!==x.nan){let o=this._getOrReturnCtx(e);return T(o,{code:w.invalid_type,expected:x.nan,received:o.parsedType}),L}return{status:"valid",value:e.data}}};yo.create=t=>new yo({typeName:N.ZodNaN,...F(t)});var vy=Symbol("zod_brand"),xi=class extends M{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},zr=class extends M{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?L:i.status==="dirty"?(r.dirty(),Ql(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?L:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(e,r){return new zr({in:e,out:r,typeName:N.ZodPipeline})}},vo=class extends M{_parse(e){let r=this._def.innerType._parse(e);return gn(r)&&(r.value=Object.freeze(r.value)),r}};vo.create=(t,e)=>new vo({innerType:t,typeName:N.ZodReadonly,...F(e)});var tp=(t,e={},r)=>t?ur.create().superRefine((o,n)=>{var i,s;if(!t(o)){let c=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,u=(s=(i=c.fatal)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:!0,g=typeof c=="string"?{message:c}:c;n.addIssue({code:"custom",...g,fatal:u})}}):ur.create(),_y={object:X.lazycreate},N;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(N||(N={}));var wy=(t,e={message:`Input not instance of ${t.name}`})=>tp(r=>r instanceof t,e),rp=ze.create,op=xt.create,Ey=yo.create,by=Tt.create,np=Mr.create,Py=Ut.create,Sy=po.create,xy=$r.create,Ty=Br.create,Ay=ur.create,Iy=Bt.create,ky=ft.create,Oy=fo.create,Cy=Ze.create,Ny=X.create,Ry=X.strictCreate,Ly=Ur.create,Dy=mo.create,Fy=Vr.create,My=at.create,$y=Wr.create,By=go.create,Uy=Vt.create,Vy=cr.create,Wy=qr.create,qy=Gr.create,Gy=At.create,jy=jr.create,Hy=dr.create,Yl=Ke.create,zy=pt.create,Jy=Wt.create,Zy=Ke.createWithPreprocess,Ky=zr.create,Yy=()=>rp().optional(),Xy=()=>op().optional(),Qy=()=>np().optional(),ev={string:t=>ze.create({...t,coerce:!0}),number:t=>xt.create({...t,coerce:!0}),boolean:t=>Mr.create({...t,coerce:!0}),bigint:t=>Tt.create({...t,coerce:!0}),date:t=>Ut.create({...t,coerce:!0})},tv=L,C=Object.freeze({__proto__:null,defaultErrorMap:mn,setErrorMap:iy,getErrorMap:bi,makeIssue:Pi,EMPTY_PATH:ay,addIssueToContext:T,ParseStatus:_e,INVALID:L,DIRTY:Ql,OK:Re,isAborted:oc,isDirty:nc,isValid:gn,isAsync:Si,get util(){return G},get objectUtil(){return rc},ZodParsedType:x,getParsedType:sr,ZodType:M,ZodString:ze,ZodNumber:xt,ZodBigInt:Tt,ZodBoolean:Mr,ZodDate:Ut,ZodSymbol:po,ZodUndefined:$r,ZodNull:Br,ZodAny:ur,ZodUnknown:Bt,ZodNever:ft,ZodVoid:fo,ZodArray:Ze,ZodObject:X,ZodUnion:Ur,ZodDiscriminatedUnion:mo,ZodIntersection:Vr,ZodTuple:at,ZodRecord:Wr,ZodMap:go,ZodSet:Vt,ZodFunction:cr,ZodLazy:qr,ZodLiteral:Gr,ZodEnum:At,ZodNativeEnum:jr,ZodPromise:dr,ZodEffects:Ke,ZodTransformer:Ke,ZodOptional:pt,ZodNullable:Wt,ZodDefault:Hr,ZodCatch:ho,ZodNaN:yo,BRAND:vy,ZodBranded:xi,ZodPipeline:zr,ZodReadonly:vo,custom:tp,Schema:M,ZodSchema:M,late:_y,get ZodFirstPartyTypeKind(){return N},coerce:ev,any:Ay,array:Cy,bigint:by,boolean:np,date:Py,discriminatedUnion:Dy,effect:Yl,enum:Gy,function:Vy,instanceof:wy,intersection:Fy,lazy:Wy,literal:qy,map:By,nan:Ey,nativeEnum:jy,never:ky,null:Ty,nullable:Jy,number:op,object:Ny,oboolean:Qy,onumber:Xy,optional:zy,ostring:Yy,pipeline:Ky,preprocess:Zy,promise:Hy,record:$y,set:Uy,strictObject:Ry,string:rp,symbol:Sy,transformer:Yl,tuple:My,undefined:xy,union:Ly,unknown:Iy,void:Oy,NEVER:tv,ZodIssueCode:w,quotelessJson:ny,ZodError:Je});var rv=["delay","page_view","exit_intent","none"],ip=C.object({desktop:C.string(),mobile:C.string(),profile:C.string()}).partial(),ap=C.object({name:C.string(),percent:C.number().lte(1).default(1),formConfig:ip}).partial(),ov=C.object({triggerType:C.enum(rv),triggerCount:C.number().int(),scoreThreshold:C.number(),formConfig:ip}).partial(),nv=C.object({name:C.string(),scoreName:C.string(),percent:C.number().lte(1).default(1),showOverlayOnATC:C.boolean(),showSecondOverlayOnExitIntent:C.boolean(),formBuckets:ap,maxTotalOverlays:C.number().int().gte(0),triggers:C.array(ov)}).partial(),iv=nv.required({name:!0}),av=C.object({name:C.string(),percent:C.number().lte(1).default(1),triggerBuckets:iv}).partial(),sv=av.required({name:!0}),cv=C.object({zIndex:C.string()}).partial(),uv=C.object({renderer:C.string().toLowerCase(),rendererVersion:C.string(),identifyPlatforms:C.array(C.string()),ignoredPagePaths:C.array(C.string()),overlayClosedCookieDuration:C.number(),version:C.coerce.number(),excludedQueryParams:C.array(C.object({name:C.string(),value:C.string()})),styleSettings:C.array(cv),blockOverlayOnCssSelectors:C.array(C.string()),formBuckets:ap,overlayBuckets:sv}).partial(),sp=uv.required({renderer:!0});var _o=class{constructor(e){this.setting=sp.parse(e)}static safeFromConfigJSON(){try{return this.isDisabled()?void 0:new _o(ii(W))}catch(e){a.error(new Error(`[PWO] Error parsing overlay setting: ${e}`));return}}static fromConfigJSON(){return new _o(ii(W))}static isDisabled(){return Object.keys(ii(W)||{})?.length===0}get rendererName(){return this.setting.renderer}get rendererVersion(){return this.setting.rendererVersion}get identifyPlatforms(){return this.setting.identifyPlatforms}get ignoredPagePaths(){return this.setting.ignoredPagePaths}get overlayClosedCookieDuration(){return this.setting.overlayClosedCookieDuration}get version(){return this.setting.version}get excludedQueryParams(){return this.setting.excludedQueryParams}get blockOverlayOnCssSelectors(){return this.setting.blockOverlayOnCssSelectors}get styleSettings(){return this.setting.styleSettings}get formBuckets(){return this.setting.formBuckets}get overlayBuckets(){return this.setting.overlayBuckets}get triggerBuckets(){return this.setting.overlayBuckets?.triggerBuckets}get maxTotalOverlays(){return this.setting.overlayBuckets?.triggerBuckets?.maxTotalOverlays}get showSecondOverlayOnExitIntent(){return this.setting.overlayBuckets?.triggerBuckets?.showSecondOverlayOnExitIntent}get showOverlayOnATC(){return this.triggerBuckets?.showOverlayOnATC}hasExcludedUrlParams(){return!!this.setting.excludedQueryParams?.some(({name:e,value:r})=>de(e,void 0)?.toLowerCase()===r.toLowerCase())}get scoreName(){return this.triggerBuckets?.scoreName}get defaultFormConfig(){return this.setting.formBuckets?.formConfig}get triggerBucketFormConfig(){return this.setting.overlayBuckets?.triggerBuckets?.formBuckets?.formConfig}hasValidOverlayBucketFormConfig(){return this.triggerBucketFormConfig!==void 0&&Object.keys(this.triggerBucketFormConfig).length>0}extractRelevantFormConfig(){let e=this.defaultFormConfig;return this.hasValidOverlayBucketFormConfig()&&(e=this.triggerBucketFormConfig),{formId:Sr(ge()).deviceType==="mobile"?e?.mobile:e?.desktop,profile:e?.profile}}get identifierNames(){return this.identifyPlatforms||[this.rendererName]}},Ye=_o;var qt=class{constructor(e){this.name=e}set(e,r){Y(this.name,e,r)}get(){return Ge(this.name)}reset(){Y(this.name,"",-1)}};var ac=class{constructor(){this.SEPARATOR="|";this.overlayHistoryCookie=new qt(Vu)}get(){let e=this.overlayHistoryCookie.get();return e?e.split(this.SEPARATOR):[]}push(e){let r=this.get();r.push(e),this.overlayHistoryCookie.set(r.join(this.SEPARATOR),30)}count(e){return this.get().filter(r=>r===e).length}totalCount(){return this.get().length}},lr=class{constructor(){this.overlayClosedCookieDuration=30;this.openedOverlayEventData=[];this.history=new ac}static overlayWasClosed(){return!!lr.overlayClosedCookie.get()}static piiWasSubmitted(){return!!lr.piiSubmittedCookie.get()}static setPIISubmitCookie(){lr.piiSubmittedCookie.set("true",1051200)}closeOverlay(){this.openOverlayTriggerType=void 0}setOverlayClosedCookie(){this.isOverlayOpenedByATC()||lr.overlayClosedCookie.set("true",this.overlayClosedCookieDuration)}closeOverlayAndSetCookie(){this.closeOverlay(),this.setOverlayClosedCookie()}isOverlayOpen(){return!!this.openOverlayTriggerType}piiWasSubmitted(){return lr.piiWasSubmitted()}submitPII(){lr.setPIISubmitCookie()}setOverlayClosedDuration(e=30){this.overlayClosedCookieDuration=e}totalOverlaysOpenedCount(){return this.history.totalCount()}overlayOpenedEvent(e){e&&this.openedOverlayEventData.push(e)}handleOpenAttemptOutcome(e){let r=e?.resolved_form_id;if(r){if(!this.openedOverlayEventData.length){a.error(new Fr(`[PWO] Impression failed to render for formId: ${r}`));return}if(this.openedOverlayEventData.every(n=>!n.rendered_form_id||`${n.rendered_form_id}`?.trim()==="")){he("[PWO] All rendered form Ids undefined. Could be justuno overlay.");return}if(this.openedOverlayEventData.find(n=>`${n.rendered_form_id}`===r))he("[PWO] Impression rendered successfully.");else{let n=this.openedOverlayEventData.map(i=>!i.rendered_form_id||`${i.rendered_form_id}`==""?"<missing_id>":i.rendered_form_id);a.error(new Fr(`[PWO] Impression failed to render for formId: ${r} and external impression rendered form ids: ${n}`))}}}openAttemptEvent(e){this.openedOverlayEventData=[],_.setTimeout(()=>this.handleOpenAttemptOutcome(e),5e3)}openStandardOverlay(){this.openOverlayTriggerType="s",this.history.push("s")}standardOverlaysOpenedCount(){return this.history.count("s")}isOverlayOpenedByStandard(){return this.openOverlayTriggerType==="s"}openAtcOverlay(){this.openOverlayTriggerType="a",this.history.push("a")}atcOverlaysOpenedCount(){return this.history.count("a")}isOverlayOpenedByATC(){return this.openOverlayTriggerType==="a"}openExitOverlay(){this.openOverlayTriggerType="e",this.history.push("e")}exitOverlaysOpenedCount(){return this.history.count("e")}isOverlayOpenedByExitTrigger(){return this.openOverlayTriggerType==="e"}},mt=lr;mt.overlayClosedCookie=new qt(Uu),mt.piiSubmittedCookie=new qt(Wu);function dv(t){if(!t)return!1;let e=t.getBoundingClientRect(),r=getComputedStyle(t);return r.display!=="none"&&r.visibility!=="hidden"&&e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function lv(t){return[...document.querySelectorAll(t)].some(r=>dv(r))}function cp(t=[]){return t.some(lv)}function Le(){return we(window.location.search)?.pwoOverride==="true"}function wo(){return we(window.location.search)?.pwoOverrideEligible==="true"}var It=class{constructor(e){this.overlayLimitTracker=e}static alreadyExcludedByChannel(){return!!It.pwoExcludedByChannelNameCookie.get()}static shouldBeExcludedByChannel(){let e=Ye.safeFromConfigJSON();return!!(e&&e.hasExcludedUrlParams())}static doExcludeByChannel(){It.pwoExcludedByChannelNameCookie.set(!0,void 0)}static meetsExitOverlayConditions(){let e=mt.piiWasSubmitted(),r=It.isExcludedByChannel();return!(e||r)}static isEligibleForATCTrigger(e,r){return e.overlay_eligible||wo()?!r.channel_excluded&&!r.identified&&!r.pii_submitted:!1}static isExcludedByChannel(){return this.alreadyExcludedByChannel()?!0:this.shouldBeExcludedByChannel()?(this.doExcludeByChannel(),!0):!1}static isOverlayClearedToDisplay(){let e=Ye.safeFromConfigJSON();return!cp(e?.blockOverlayOnCssSelectors)}isEligibleForExitOverlay(){return It.meetsExitOverlayConditions()&&this.overlayLimitTracker.canOpenExitOverlay()&&It.isOverlayClearedToDisplay()}shouldTriggerATCOverlay(e,r){return It.isEligibleForATCTrigger(e,r)&&this.overlayLimitTracker.canOpenAtcOverlay()&&It.isOverlayClearedToDisplay()}isEligibleForStandardOverlay(e){return e.isUserIdentified().then(o=>!o&&this.overlayLimitTracker.canOpenStandardOverlay()&&It.isOverlayClearedToDisplay())}},Jr=It;Jr.pwoExcludedByChannelNameCookie=new qt(qu);var Ti=class{constructor(e){this.maxTotalOverlays=1/0;this.maxStandardOverlays=1;this.maxATCOverlays=1;this.maxExitOverlays=1;this.interactionTracker=e}setMaxTotalOverlays(e=1/0){this.maxTotalOverlays=e}totalOverlayLimitReached(){return this.interactionTracker.totalOverlaysOpenedCount()>=this.maxTotalOverlays}standardOverlayLimitReached(){return this.interactionTracker.standardOverlaysOpenedCount()>=this.maxStandardOverlays}canOpenStandardOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.interactionTracker.piiWasSubmitted()&&!this.standardOverlayLimitReached()&&!this.totalOverlayLimitReached()}atcOverlayLimitReached(){return this.interactionTracker.atcOverlaysOpenedCount()>=this.maxATCOverlays}canOpenAtcOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.atcOverlayLimitReached()&&!this.totalOverlayLimitReached()}exitOverlayLimitReached(){return this.interactionTracker.exitOverlaysOpenedCount()>=this.maxExitOverlays}canOpenExitOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.exitOverlayLimitReached()&&!this.totalOverlayLimitReached()}};var pv={["s"]:"openStandardOverlay",["a"]:"openAtcOverlay",["e"]:"openExitOverlay"},fv={["s"]:"isOverlayOpenedByStandard",["a"]:"isOverlayOpenedByATC",["e"]:"isOverlayOpenedByExitTrigger"},ke=class{constructor(){this._overlayTracker=new mt,this._overlayLimitTracker=new Ti(this._overlayTracker),this._overlayEligibility=new Jr(this._overlayLimitTracker)}static overlayWasClosed(){return mt.overlayWasClosed()}static piiWasSubmitted(){return mt.piiWasSubmitted()}static setPIISubmitCookie(){mt.setPIISubmitCookie()}setOverlayOpen(e){this._overlayTracker[pv[e]]()}isOverlayOpen(){return this._overlayTracker.isOverlayOpen()}closeOverlay(e=!1){e&&this._overlayTracker.setOverlayClosedCookie(),this._overlayTracker.closeOverlay()}wasOverlayOpenedBy(e){return this._overlayTracker[fv[e]]()}submitPII(){this._overlayTracker.submitPII()}overlayOpenedEvent(e){this._overlayTracker.overlayOpenedEvent(e)}openAttemptEvent(e){this._overlayTracker.openAttemptEvent(e)}setOverlayClosedDuration(e){this._overlayTracker.setOverlayClosedDuration(e)}setMaxTotalOverlays(e){this._overlayLimitTracker.setMaxTotalOverlays(e)}static isExcludedByChannel(){return Jr.isExcludedByChannel()}static isOverlayClearedToDisplay(){return Jr.isOverlayClearedToDisplay()}isEligibleForATCOverlay(e,r){return this._overlayEligibility.shouldTriggerATCOverlay(e,r)}isEligibleForExitOverlay(){return this._overlayEligibility.isEligibleForExitOverlay()}isEligibleForStandardOverlay(e){return this._overlayEligibility.isEligibleForStandardOverlay(e)}};var Ii=class{constructor(){this.failureReasons=[];this.activeTriggers=[]}setAppState(e){this.appState=e}setPwoResponse(e){this.pwoResponse=e}setPwoSettings(e){this.pwoSettings=e}setIdentified(e){this.identified=e}addFailureReason(e){this.failureReasons.push(e)}setTriggers(e){this.activeTriggers=e}get ignoredText(){return Le()?" (overridden)":""}async getLogData(){try{this.sessionPageViews=await He();let e=[],r=this.getFailureReasons();return r&&e.push(r),e.push(this.getEnvironmentStatus()),e.push(this.getPOSettings()),e.push(this.getResponseStatus()),e.push(this.getUIEligibilityState()),e.push(this.getActiveTriggersStatus()),e}catch(e){return a.error(e),[{title:"Error",lines:[{state:!1,message:"Error geting PO diagnostics"}]}]}}getFailureReasons(){if(this.failureReasons.length!==0)return{title:"Failures",lines:this.failureReasons.map(e=>({state:!1,message:e}))}}getResponseStatus(){return{title:"PWO Decision Response",lines:this.pwoResponse?[{state:this.pwoResponse.overlay_eligible,message:this.pwoResponse.overlay_eligible?"User eligible for overlay.":`User not eligible for overlay.${this.ignoredText}`},{state:!!this.pwoResponse.form_id,message:`FormId is present: ${this.pwoResponse.form_id}`},{state:!!this.pwoResponse.trigger_type,message:`ML Trigger is present: ${this.pwoResponse.trigger_type}`},{state:this.pwoResponse.minimum_page_views<=(this.sessionPageViews??0),message:`Session passed minimum amount of page views of ${this.pwoResponse.minimum_page_views}${this.ignoredText}`}]:[{state:!1,message:"PWO Decision response not received yet."}]}}getUIEligibilityState(){let e=this.appState?[{state:!this.appState.isOverlayOpen(),message:`Overlay not already open.${this.ignoredText}`},{state:!ke.overlayWasClosed(),message:`Overlay not previously presented and dismissed.${this.ignoredText}`},{state:!ke.piiWasSubmitted(),message:`PII not submitted.${this.ignoredText}`},{state:!ke.isExcludedByChannel(),message:`Channel not excluded.${this.ignoredText}`},{state:ke.isOverlayClearedToDisplay(),message:`Overlay not blocked (blockOverlayOnCssSelectors).${this.ignoredText}`}]:[{state:!1,message:"PO Not initialized."}];return e.push({state:this.identified===!1,message:this.identified===void 0?"User identification unknown":`User not identified.${this.ignoredText}`}),{title:"UI Eligibility Status",lines:e}}getPOSettings(){return{title:"PO Config Settings",lines:[{state:!!this.pwoSettings,message:"PO Config present."},{state:!Ye.isDisabled(),message:"PO config is active"},{state:!!this.pwoSettings?.rendererName,message:`Renderer name is set: ${this.pwoSettings?.rendererName}`},{state:!!this.pwoSettings?.identifierNames,message:"IdentifierPlatforms are set"}]}}getEnvironmentStatus(){return{title:"Environment",lines:[{state:!v(),message:"Bundle not loaded by webpixel."},{state:Le(),message:"PWO Override enabled (when enabled, will override/bypass checks)"},{state:wo(),message:"PWO Override Eligible enabled (when enabled ignores pwo_decision overlay_eligible)"}]}}getActiveTriggersStatus(){let e=this.activeTriggers.map(r=>({state:!0,message:`${r.triggerName}`}));return this.activeTriggers.length===0&&e.push({state:!1,message:"No active triggers"}),{title:"Active Triggers",lines:e}}};function Zr(){let t=St.getAppLogAppender("PO");return t||(t=new Ii,St.setAppLogAppender(t,"PO")),t}function Z(t){St.logDiagnostics(t,"PO")}function ae(t){Zr().addFailureReason(t),Z("New failure detected")}function mv(t){return[y.PWO_EMAIL_LEAD,y.PWO_SMS_LEAD].includes(t)}var ki,Oi;function se(t,e,r,o){if(!mv(t))return e;let n={em:e?.em,ph:e?.ph};return o&&!n.em&&(n.em=Ar(o),Oi=n.em??Oi),!n.em&&Oi&&(n.em=Oi),r&&!n.ph&&(n.ph=Nr(r),ki=n.ph??ki),!n.ph&&ki&&(n.ph=ki),P({},e,n)}var sc="generatedByRenderer",pr=class{constructor(){this.applicationName=W?.toUpperCase();this.initialized=!1}static getPlatformName(){return Ml}processEvent(e,r){return r?.[sc]==="true"?(delete r[sc],r):[y.PWO_EMAIL_LEAD,y.PWO_SMS_LEAD].includes(e)?Lr:r}sendEvent(e,r,o,n){let i={rendered_form_id:r};i[sc]="true",ne(e,se(e,i,n,o))}setup(){return this.initialized||(D("platform",y.PWO_CLOSE,e=>{e.rendered_form_id===window.__bcai_amped_trigger&&delete window.__bcai_amped_trigger}),bt(/.*[amped.io|intuit.com]\/gateway\/receive.*/gm,e=>{try{let r=e[1]?.body;if(!r)return;let o=JSON.parse(r);if(!o.campaignId)return;let n;if(o.data?.email){let s=Tr(o.data.email);s&&(n=s)}let i;if(o.data?.phone_number){let s=qs(o.data.phone_number);Gs(s)&&(i=s)}n&&this.sendEvent(y.PWO_EMAIL_LEAD,o.campaignId,n,i),i&&this.sendEvent(y.PWO_SMS_LEAD,o.campaignId,n,i)}catch{Z("unable to parse amped payload")}},!1),this.initialized=!0),Promise.resolve()}isInitialized(){return this.initialized}triggerOverlay(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${pr.getPlatformName()} due to an invalid formId: ${e}`);window.__bcai_amped_trigger=r}static getInstance(){return new pr}};var gv=new Map([["OPEN",y.PWO_IMPR],["CLOSE",y.PWO_CLOSE],["EMAIL_LEAD",y.PWO_EMAIL_LEAD],["LEAD",y.PWO_SMS_LEAD]]);function up(t){return gv.get(t)}var fr=class{constructor(){this.windowListenerRegistered=!1;this.applicationName=W?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return mi}setup(){return this.observedEvents={},this.windowListenerRegistered||(this.windowListenerRegistered=!0,_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")!==-1){let r=e.data.__attentive||{};if(r&&up(r.action)){let{action:o,creativeId:n,phone:i,email:s}=r,c=this.observedEvents[n];if(c?.includes(o))return;this.observedEvents[n]=c?[...c,o]:[o];let u=up(o);u===y.PWO_EMAIL_LEAD&&s&&J(s),u===y.PWO_SMS_LEAD&&i&&te(i),u&&ne(u,se(u,{rendered_form_id:n},i,s))}}})),new Promise((e,r)=>U(()=>{if(typeof window.__attentive?.trigger!="function")throw new Error(`${fr.getPlatformName()} globals not found`);e()},()=>{let o=A(`[${this.applicationName}] ${fr.getPlatformName()} globals not found.`);a.error(o),r(o)},100)).then(()=>{this.hasSetupCompletedSuccessfully=!0})}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${fr.getPlatformName()} was not initialized.`);if(!window?.__attentive)throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${fr.getPlatformName()} global is missing.`);delete this.observedEvents[e],window.__attentive.trigger(null,null,null,e)}getOverlayNode(){let e=document.querySelectorAll(fr.DEFAULT_OVERLAY_SELECTOR);if(e.length!==0){if(e.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching Attentive overlay container but found ${e?.length}.`);return e[0]}}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new fr}},Eo=fr;Eo.DEFAULT_OVERLAY_SELECTOR="[id=attentive_overlay]";function hn(t,e){if(typeof e!="function")return;let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e&&_.addListener(this,"load",()=>{this.responseType===""||this.responseType==="text"?e(this.responseText):this.responseType==="json"&&e(JSON.stringify(this.response))})}catch{a.error(new Ue(`XHR Sniffer Error For URL: ${t}`))}return r.apply(this,o)}}function Ci(t,e){let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e(o)}catch{a.error(new Ue(`XHR Intercept Error For URL: ${t}`))}return r.apply(this,o)}}var gt=class{constructor(){this.applicationName=W?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return nr}hasEventBeenObserved(e,r){if(r===y.PWO_IMPR&&e.length===0){if(gt.xhrImpressionCount<=gt.loadImpressionCount)return!0;a.error(A(`[${this.applicationName}] ${gt.getPlatformName()} - Impression event not observed from load ju_windowevent.`))}return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ne(r,se(r,{rendered_form_id:e},o,n)))}getJustunoApp(){if(!window.juapp){let e=(...r)=>{let o=window?.juapp?.q||[];window.juapp&&(window.juapp.q=o),o.push(r)};window.juapp=e}return window.juapp}setup(){return this.observedEvents={},window.ju_windowevent=(e,r)=>{e==="load"&&(gt.loadImpressionCount+=1,this.handleEvent(r,y.PWO_IMPR)),e==="unload"&&this.handleEvent(r,y.PWO_CLOSE)},Ci("(justuno.com|jst.ai)/api/analytics/impression",()=>{gt.xhrImpressionCount+=1,this.handleEvent("",y.PWO_IMPR)}),this.getJustunoApp()("trackFunc","engagement",(e,r,o,n,i,s)=>{let c=s.find(u=>u.name==="phone_number"&&u.value.length>0)?.value;c?(te(c),this.handleEvent(n,y.PWO_SMS_LEAD,c,e)):e&&(J(e),this.handleEvent(n,y.PWO_EMAIL_LEAD,void 0,e))}),new Promise((e,r)=>U(()=>{if(window.ju_loadiframe&&typeof window.ju_loadiframe=="function"&&window.ju_initialized)return this.hasSetupCompletedSuccessfully=!0,e();throw new Error(`${gt.getPlatformName()} globals not found`)},()=>{let o=A(`[${this.applicationName}] ${gt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}getOverlayNode(e){return document.getElementById(`ju_Con_${e}`)??void 0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_loadiframe)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${gt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.ju_loadiframe({campaign_id:e??""})}static getInstance(){return new gt}},bo=gt;bo.loadImpressionCount=0,bo.xhrImpressionCount=0;function hv(t){ie(()=>{_.addListener(document?.documentElement,"mouseleave",t)})}function yv(t){let e=Xn(),r=ld();if(r>0){let o=_.setInterval(()=>{let n=e-Xn();n<0&&(n=0,e=Xn()),(n/r>.3||n>4500)&&(clearInterval(o),t())},150)}}function vv(t){if(v())return;let e=r=>{r.state?.exiting&&(_.removeListener(window,"popstate",e),t())};ie(async()=>{try{let r=await He();window.history.state||(window.history.replaceState({exiting:r===1},"",window.location.href),r===1&&window.history.pushState({exiting:!1},"",window.location.href)),_.addListener(window,"popstate",e)}catch(r){a.error(r)}})}function _v(t){yv(t),vv(t)}function dp(t){Sr(ge()).deviceType!=="mobile"?hv(t):_v(t)}function Po(t){let e=de("bcaiMockScore");if(e)return e;let r=nt(`${dt}.scores`)??[];return t?r.find(({name:o})=>o===t)?.score:void 0}var kt=class{constructor(){this.applicationName=W?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1;this.previousEnrolledWorkflows=[]}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ne(r,se(r,{rendered_form_id:e},o,n)))}handleStateChangeEvent(e){let r=JSON.parse(JSON.stringify(e));delete r.workflowEvalStatus,(!this.previousJustunoAppState||JSON.stringify(this.previousJustunoAppState)!==JSON.stringify(r))&&(r.onsiteOpenState.filter(({workflowID:n})=>!this.previousJustunoAppState||!this.previousJustunoAppState.onsiteOpenState.find(({workflowID:i})=>i===n)).map(({workflowID:n})=>n).forEach(n=>{this.handleEvent(n,y.PWO_IMPR)}),this.previousJustunoAppState=r)}handleFetchInterceptEvent(){let e=(window._jst?.profile?.enrolled_workflows??[]).map(s=>JSON.parse(s)),r=e.filter(s=>s.workflow_id&&!this.previousEnrolledWorkflows.find(c=>c.workflow_id===s.workflow_id&&c.enrolled_time===s.enrolled_time&&c.end_time===s.end_time)),o=window._jst?.profile?.updatedProps?.email,n=window._jst?.profile?.updatedProps?.sms;r.forEach(s=>{o&&(J(o),this.handleEvent(s.workflow_id,y.PWO_EMAIL_LEAD,n,o)),n&&(te(n),this.handleEvent(s.workflow_id,y.PWO_SMS_LEAD,n,o))}),r.filter(s=>s.end_time&&!this.previousEnrolledWorkflows.find(c=>s.workflow_id===c.workflow_id&&s.enrolled_time===c.enrolled_time&&c.end_time===s.end_time)).forEach(s=>{this.handleEvent(s.workflow_id,y.PWO_CLOSE)}),this.previousEnrolledWorkflows=e}setup(){return this.observedEvents={},window.ju_blackcrow={predictions:{submit:{triggeredExperienceIds:[]}}},D("audience",y.SCORES_UPDATE,(e=[])=>{let r=Ye.fromConfigJSON().scoreName,o=e.find(({name:n})=>n===r)?.score;o&&(window.ju_blackcrow.predictions.submit.score=o)}),ar(new Promise((e,r)=>U(()=>{if(window.ju4app!==void 0){window.ju4app("initFunc",()=>{window._jst.store.events.subscribe("stateChange",o=>{this.handleStateChangeEvent(o)}),bt("justone.ai/v1/public/(display|properties|workflows)",()=>{this.handleFetchInterceptEvent()},!0),this.hasSetupCompletedSuccessfully=!0,e()});return}throw new Error(`${kt.getPlatformName()} globals not found`)},()=>{let o=A(`[${this.applicationName}] ${kt.getPlatformName()} globals not found.`);a.error(o),r(o)},15)),5e3,A(`[${this.applicationName}] ${kt.getPlatformName()} Timed out waiting for initFunc.`))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_blackcrow)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${kt.getPlatformName()} was not initialized.`);window.ju_blackcrow&&(delete this.observedEvents[e],window.ju_blackcrow.predictions.submit.score=Po(Ye.fromConfigJSON().scoreName),window.ju_blackcrow.predictions.submit.triggeredExperienceIds?.push(e))}static getPlatformName(){return nr}static getInstance(){return new kt}};var yn=class{static getPlatformName(){return nr}static getInstance(){return Ye.safeFromConfigJSON()?.rendererVersion==="4"?kt.getInstance():bo.getInstance()}};function wv(t){let e=t.type,r=t?.metaData,o=null;switch(e){case"open":o=y.PWO_IMPR;break;case"submit":r?.$email&&(o=y.PWO_EMAIL_LEAD,J(r.$email));break;case"stepSubmit":r?.$phone_number&&(o=y.PWO_SMS_LEAD,te(r.$phone_number));break;case"close":o=y.PWO_CLOSE;break;default:break}return o}var Ev=["open","embedOpen","close","redirectedToUrl","submit","stepSubmit"],ht=class{constructor(){this.applicationName=W?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}hasEventBeenObserved(e,r){return r&&this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}handleEvent(e){let r=e?.formId,o=wv(e);this.hasEventBeenObserved(r,o)||(this.addToObservedEvents(r,o),ne(o,se(o??"unknown",{rendered_form_id:r},e?.metaData?.$phone_number,e?.metaData?.$email)),o===y.PWO_EMAIL_LEAD&&dn(["track","Welcome Form Submit"]))}setup(){return this.observedEvents={},_.addListener(window,"klaviyoForms",e=>{e.detail&&Ev.includes(e.detail.type)&&this.handleEvent(e.detail)}),new Promise((e,r)=>U(()=>{if(!vi()||typeof Qs()!="function")throw new Error(`${ht.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=A(`[${this.applicationName}] ${ht.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${ht.getPlatformName()} was not initialized.`);delete this.observedEvents[e],Gl(e)}getOverlayNode(e=""){if(e==="")return;let r=document.querySelectorAll(`form[data-testid=klaviyo-form-${e}]`);if(r.length===0)return;if(r.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching ${ht.getPlatformName()} form but found ${r?.length}. Form ID: ${e}`);let o=r[0];function n(i){return i instanceof HTMLBodyElement}for(;o&&!n(o.parentElement);)o=o?.parentNode||void 0;return o}static getPlatformName(){return gi}static getInstance(){return new ht}};async function De(t,e=2e3,r=100){let o=Date.now()+e,n=t();for(;!n&&Date.now()<o;)await re(r),n=t();return n}var Kr=class{constructor(){this.applicationName=W?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return hi}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ne(r,se(r,{rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await De(()=>typeof window.postscript?.popups?.open=="function",5*60*1e3)){let r=A(`[${this.applicationName}] ${Kr.getPlatformName()} globals not found.`);throw a.error(r),r}await re(2e3),_.addListener(window,"postscriptPopup",r=>{if(r.detail.type==="impression"){let{popupId:o}=r.detail;this.handleEvent(`${o}`,y.PWO_IMPR)}if(r.detail.type==="close"){let{popupId:o}=r.detail;this.handleEvent(`${o}`,y.PWO_CLOSE)}if(r.detail.type==="formSubmit"){let{values:o,popupId:n}=r.detail,i=o?.email,s=o?.phone;i&&i.length&&(J(i),this.handleEvent(`${n}`,y.PWO_EMAIL_LEAD,s,i)),s&&s.length&&(te(s),this.handleEvent(`${n}`,y.PWO_SMS_LEAD,s,i))}}),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Kr.getPlatformName()} was not initialized.`);let r=Number(e);Number.isNaN(r)&&(r=e),delete this.observedEvents[e],window.postscript.popups.open(r,{activePopupBehavior:"ALWAYS_DISMISS",respectPopupStatus:!1})}static getInstance(){return new Kr}getOverlayNode(){let e=document.querySelectorAll(Kr.DEFAULT_OVERLAY_SELECTOR);if(!(e.length===0&&(e=document.querySelectorAll(Kr.DEFAULT_FALLBACK_SELECTOR),e.length===0))){if(e.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching Postscript overlay container but found ${e?.length}.`);return e[0]}}},Yr=Kr;Yr.DEFAULT_OVERLAY_SELECTOR="[id=ps-desktop-widget__body-container]",Yr.DEFAULT_FALLBACK_SELECTOR="[id=ps__widget_container]";var Ot=class{constructor(){this.applicationName=W?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return $l}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ne(r,se(r,{rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await De(()=>window?._recart?.isReady(),6e3)){let r=A(`[${this.applicationName}] ${Ot.getPlatformName()} globals not found.`);throw a.error(r),r}bt(/https:\/\/api.recart.com\/tracking\/v1\/.*\/optin-context.*/gm,r=>{try{let o=r[1]?.body;if(!o)return;let n=JSON.parse(o),i=document.querySelector("#recart-popup-root")?.shadowRoot?.querySelector("[data-testid]")?.getAttribute("data-testid")?.replace("popup-overlay-","").replace("popup-minimized-","");n?.optinToolId&&(this.optinToolId=n.optinToolId),i&&i!==this.optinToolId&&(this.optinToolId=i),n?.optinToolId&&(this.optinToolId=n.optinToolId,this.handleEvent(n.optinToolId,y.PWO_IMPR));let s=n?.email,c=n?.phoneNumber;s&&this.optinToolId&&(J(s),this.handleEvent(this.optinToolId,y.PWO_EMAIL_LEAD,c,s)),c&&this.optinToolId&&(te(c),this.handleEvent(this.optinToolId,y.PWO_SMS_LEAD,c,s))}catch(o){a.error(A(`[${this.applicationName}] ${Ot.getPlatformName()} could not process impressions event. ${o?.message}`))}},!1),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?._recart?.showOptinTool)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Ot.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window._recart.showOptinTool(e)}static getInstance(){return new Ot}};var Xe=class{constructor(){this.applicationName=W?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Bl}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ne(r,se(r,{rendered_form_id:e},o,n)))}static async loadSendlane(){return window._Sendlane?Promise.resolve():(window._Sendlane=window._Sendlane||[],new Promise((e,r)=>{try{let o=document.createElement("script");o.src="https://sendlane.com/scripts/pusher.js",o.async=!0,o.onload=()=>{e()},document.getElementsByTagName("head")[0]?.appendChild(o)}catch(o){r(o)}}))}static isSendlaneLoaded(){return typeof window._Sendlane?.push=="function"&&window._Sendlane?.baseUrl}async setup(){try{_.addListener(window,"sendlaneForms",r=>{try{if(!(r instanceof CustomEvent))throw new Error("Invalid Sendlane event");let o=r.detail.form_key??r.detail.formKey;switch(r.detail.type){case"open":this.handleEvent(o,y.PWO_IMPR);break;case"close":this.handleEvent(o,y.PWO_CLOSE);break;case"submit":{let{email:n,phone:i,isSubmitSuccess:s}=r.detail.metaData,c=Tr(n);s&&c&&(J(c),this.handleEvent(o,y.PWO_EMAIL_LEAD,i,c)),s&&i&&(te(i),this.handleEvent(o,y.PWO_SMS_LEAD,i,c));break}default:break}}catch(o){a.error(o)}}),this.observedEvents={};let e=A(`[${this.applicationName}] ${Xe.getPlatformName()} globals not found.`);if(window._Sendlane||await ar(Xe.loadSendlane(),5e3,e),Xe.isSendlaneLoaded())this.hasSetupCompletedSuccessfully=!0;else throw e}catch(e){throw a.error(e),e}}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Xe.getPlatformName()} was not initialized.`);return delete this.observedEvents[e],window._Sendlane?.push({form_key:e}),De(()=>window._Sendlane?.openForm).then(()=>{if(window._Sendlane?.openForm)Z(`${Xe.getPlatformName()} triggerring after polling for openForm.`),window._Sendlane.openForm(e);else throw new Error(`${Xe.getPlatformName()} failed to trigger since openForm was not found.`)})}static getInstance(){return new Xe}};var bv=new Map([["before-popup-display",y.PWO_IMPR],["before-form-submit",y.PWO_EMAIL_LEAD],["after-popup-close",y.PWO_CLOSE]]),Gt=class{constructor(){this.applicationName=W?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Ul}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ne(r,se(r,{rendered_form_id:e},o,n)))}addWisepopsEventListeners(){bv.forEach((e,r)=>{window?.wisepops&&(e===y.PWO_EMAIL_LEAD?window.wisepops("listen",r,o=>{let n=o?.target?.elements.email?.value;n&&J(n);let i=o?.target?.elements["phone-number"]?.data,s;if(i){let c=JSON.parse(i);s=`${c?.dialCode}${c?.value}`,s&&te(s)}(n||!s)&&this.handleEvent(o?.detail?.popup?.id?.toString(),e,s,n),s&&this.handleEvent(o?.detail?.popup?.id?.toString(),y.PWO_SMS_LEAD,s,n)}):window.wisepops("listen",r,o=>{this.handleEvent(o?.detail?.popup?.id?.toString(),e)}))})}async setup(){if(this.observedEvents={},!await De(()=>{if(typeof window?.wisepops=="function")return window?.wisepops},5e3)){let r=A(`[${this.applicationName}] ${Gt.getPlatformName()} globals not found.`);throw a.error(r),r}this.addWisepopsEventListeners(),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?.wisepops)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Gt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.wisepops("event",`trigger-${e}`)}static getInstance(){return new Gt}};var Qe=class{constructor(){this.applicationName=W.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return Vl}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),ne(r,se(r,{rendered_form_id:e},o,n)))}setup(){return bt(/.*\/forms-impressions.*/gm,e=>{try{let r=e[1]?.body;if(!r)return;let{tool_id:o}=JSON.parse(r);o&&this.handleEvent(o,y.PWO_IMPR)}catch(r){a.error(A(`[${this.applicationName}] ${Qe.getPlatformName()} could not process impressions event. ${r?.message}`))}},!1),new Promise(e=>(ie(()=>{_.addListener(document,"smsbump-custom-form-event",r=>{let{form_id:o,format_phone:n,phone:i,email:s,event:c}=r?.detail;c==="form_submit"&&(s&&(J(s),this.handleEvent(o,y.PWO_EMAIL_LEAD,n||i,s)),(n||i)&&(te(n||i),this.handleEvent(o,y.PWO_SMS_LEAD,n||i,s)))})}),this.hasSetupCompletedSuccessfully=!0,e()))}createTriggeringElement(){this.blackCrowFormTriggeringElement=document.createElement("div"),this.blackCrowFormTriggeringElement.style.width="0",this.blackCrowFormTriggeringElement.style.height="0",this.blackCrowFormTriggeringElement.style.opacity="0",this.blackCrowFormTriggeringElement.style.pointerEvents="none",document.body.appendChild(this.blackCrowFormTriggeringElement)}static isFormIdVisible(e){return Qe.isFormIdPresent(e)&&document?.getElementById(`smsbump-form-${e}`)?.firstElementChild?.getAttribute("aria-hidden")!=="true"}static isFormIdPresent(e){return!!document?.getElementById(`smsbump-form-${e}`)?.firstElementChild}clickTriggerElement(){this.blackCrowFormTriggeringElement&&this.blackCrowFormTriggeringElement.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))}triggerOverlay(e){if(this.blackCrowFormTriggeringElement||this.createTriggeringElement(),!this.blackCrowFormTriggeringElement||!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Qe.getPlatformName()} was not initialized.`);this.blackCrowFormTriggeringElement.id=`bcai_${e}`,this.blackCrowFormTriggeringElement.className=`bcai_${e}`,delete this.observedEvents[e];let r=1;return De(()=>Qe.isFormIdVisible(e)?!0:(Z(`Yotpo triggering overlay ${e} attempt# ${r}`),r+=1,this.clickTriggerElement(),Qe.isFormIdVisible(e)),15e3,1e3).then(o=>{if(o)Z(`Yotpo overlay ${e} triggered successfully after ${r} attempts.`);else throw A(`[${this.applicationName}] ${Qe.getPlatformName()} could not trigger overlay for form id: ${e}.`)})}getTriggerElement(){if(!(!this.blackCrowFormTriggeringElement||!this.isInitialized()))return this.blackCrowFormTriggeringElement}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new Qe}};var yt=class{constructor(){this.applicationName=W?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return hi}static isPostscriptLoaded(){return typeof window?.postscript?.getSubscriberId=="function"}setup(){return new Promise((e,r)=>U(()=>{if(!yt.isPostscriptLoaded())throw new Error(`${yt.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=A(`[${this.applicationName}] ${yt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${yt.getPlatformName()} was not initialized.`);return!!window?.postscript?.getSubscriberId?.()}static getInstance(){return new yt}};var mr=class{constructor(){this.applicationName=W?.toUpperCase()}static getPlatformName(){return Wl}async isIdentified(){try{let e=await Q(no);return!!(e?.email_collected||e?.sms_collected)}catch(e){return a.error(new Error(`[${this.applicationName}] Error checking if user is identified by ${mr.getPlatformName()}: ${e}`)),!1}}setup(){}isInitialized(){return!0}static getInstance(){return new mr}};var gr=class{constructor(){this.applicationName=W?.toUpperCase();this.initialized=!1}static getPlatformName(){return Fl}sendEvent(e,r,o,n){ne(e,se(e,{rendered_form_id:r},n,o))}setup(){return this.initialized?Promise.resolve():(D("predictive_offer","impression",e=>{this.sendEvent(y.PWO_IMPR,e.form_id)}),D("predictive_offer","submit",e=>{this.sendEvent(e.type==="sms"?y.PWO_SMS_LEAD:y.PWO_EMAIL_LEAD,e.form_id,e.email,e.phone_number)}),D("predictive_offer","close",e=>{this.sendEvent(y.PWO_CLOSE,e.form_id)}),ar(new Promise(e=>{window.onAliaReady=(window.onAliaReady||[]).concat(()=>{re(1e3).then(()=>{this.initialized=!0,e()})})}),1e4,A(`[${this.applicationName}] ${gr.getPlatformName()} failed to initialize in 10s`)))}isInitialized(){return this.initialized}triggerOverlay(e){this.isInitialized()&&aliaPopup.messages.open(e)}static getInstance(){return new gr}};var So=class{static getOverlayPlatformClassByName(e){return new Map([[Eo.getPlatformName(),Eo],[pr.getPlatformName(),pr],[yn.getPlatformName(),yn],[ht.getPlatformName(),ht],[Yr.getPlatformName(),Yr],[Ot.getPlatformName(),Ot],[Xe.getPlatformName(),Xe],[Gt.getPlatformName(),Gt],[Qe.getPlatformName(),Qe],[gr.getPlatformName(),gr]]).get(e.toLowerCase())?.getInstance()}constructor(e){if(!e)throw new Error("[PWO] No configured overlay renderer");let r=So.getOverlayPlatformClassByName(e);if(!r)throw new Error(`[PWO] Unrecognized overlay renderer: ${e}`);this.overlayPlatform=r,this.platformName=e}setup(){return this.overlayPlatform.isInitialized()?Promise.resolve():this.overlayPlatform.setup()}triggerOverlay(e){return this.overlayPlatform.triggerOverlay(e)}getOverlayNode(e){if(typeof this.overlayPlatform.getOverlayNode=="function")return this.overlayPlatform.getOverlayNode(e)}processEvent(e,r){return typeof this.overlayPlatform.processEvent!="function"?r:this.overlayPlatform.processEvent(e,r)}get name(){return this.platformName}},xo=class{static getOverlayPlatformClassByName(e){return new Map([[nr,Ne],[Dr.getPlatformName(),Dr],[Ne.getPlatformName(),Ne],[yt.getPlatformName(),yt],[mr.getPlatformName(),mr]]).get(e.toLowerCase())}constructor(e){if(!Array.isArray(e)||!e.length)throw new Error("[PWO] No configured identity platforms");if(this.identifierPlatforms=e.map(r=>{let o=xo.getOverlayPlatformClassByName(r?.toLowerCase());return o||a.error(new Error(`[PWO] Unrecognized identity platform: ${r}`)),o}).filter((r,o,n)=>!!r&&o===n.indexOf(r)).map(r=>r.getInstance()),!this.identifierPlatforms.length)throw ae("No configured valid platforms"),new Error("[PWO] No configured identity platforms")}setup(){return Promise.all(this.identifierPlatforms.map(e=>e.isInitialized()?Promise.resolve():e.setup()))}isUserIdentified(){let e=this.identifierPlatforms.map(async r=>{try{return await r.isIdentified()}catch(o){return ae(`Error checking if user is identified: ${o?.message}`),!0}});return Promise.all(e).then(r=>r.some(o=>o===!0),r=>(ae(`Error checking if user is identified: ${r?.message??r}`),!0)).then(r=>(Zr().setIdentified(r),r))}addAttributesToUserProfile(e){this.identifierPlatforms.forEach(r=>{typeof r.addAttributesToUserProfile=="function"&&r.addAttributesToUserProfile(e)})}};var Pv={subtree:!0,childList:!0};function lp(t,e){t.style.setProperty("z-index",e,"important")}function pp(t,e="relative"){t.style.setProperty("position",e)}async function fp(t,e,r){try{if(!t||!e||!r)return;let o=r.getOverlayNode(e);if(o){let n=window.getComputedStyle(o).position;(!n||n==="static")&&pp(o),lp(o,t);return}await new Promise((n,i)=>{let s=new MutationObserver(()=>{try{let c=r.getOverlayNode(e);if(c){let u=window.getComputedStyle(c).position;(!u||u==="static")&&pp(c),lp(c,t),s.disconnect(),n()}}catch(c){s.disconnect(),i(c)}});s.observe(document.body,Pv)})}catch(o){a.error(o)}}function mp(t,e,r){if(e&&r){let o=t?.filter(({zIndex:i})=>i).map(i=>i.zIndex).sort((i,s)=>parseInt(s,10)-parseInt(i,10))[0];return o&&Number.isNaN(parseInt(o,10))?Promise.resolve():fp(o||"2147483647",e,r)}return Promise.resolve()}var Xr=class{constructor(e,r,o){this.isIdentified=e,this._eventData=r,this.pwoSettings=o}static async createPWOEventData(e,r){let o=P({},{session_page_views:await He()});return new Xr(e,o,r)}buildOverlayBucketParams(){let e=this.pwoSettings?.overlayBuckets,r=this.pwoSettings?.extractRelevantFormConfig(),o=Po(this.pwoSettings?.scoreName);return e===void 0?void 0:{resolved_trigger_config:{...e},resolved_form_id:r?.formId,resolved_form_profile:r?.profile,resolved_score:o,version:this.pwoSettings?.version}}buildEligibilityParams(){return{closed_overlay:!!ke.overlayWasClosed(),identified:this.isIdentified,pii_submitted:!!ke.piiWasSubmitted(),channel_excluded:ke.isExcludedByChannel()}}get eventData(){return P({},this.buildOverlayBucketParams(),this.buildEligibilityParams(),this._eventData)}extendEventData(e){P(this._eventData,e)}get bucketName(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.name}get showOverlayOnATC(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.triggerBuckets?.showOverlayOnATC}};var vt=class{constructor(e){this.response=e}get delay(){return this.trigger_type!==ir.SESSION_VIEW_COUNT?this.response.trigger_count:0}get minimum_page_views(){return this.trigger_type===ir.SESSION_VIEW_COUNT?this.response.trigger_count:0}get form_id(){return this.response.form_id}get form_profile(){return this.response.form_profile}get overlay_eligible(){return this.response.overlay_eligible}get trigger_type(){return this.response.trigger_type}get trigger_count(){return this.response.trigger_count}_equals(e){return this.form_id===e.form_id&&this.form_profile===e.form_profile&&this.overlay_eligible===e.overlay_eligible&&this.trigger_type===e.trigger_type&&this.trigger_count===e.trigger_count}};var Ni="Add to Cart",To=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,D("platform",y.ADD_TO_CART,()=>{this.triggerOverlay()})}get triggerName(){return Ni}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Le()){let e=await He();if(this.minimumPageViews&&this.minimumPageViews>e){Z(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await re(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),ae(`Error delaying ${this.triggerName} overlay: ${e?.message}`)}}static buildTrigger(e,r,o,n,i){if(!e.showOverlayOnATC)return;let s=new vt(r),c=async()=>{try{if(!Le()&&!o.isEligibleForATCOverlay(s,n.eventData)){Z(`Not eligible for ${Ni} Overlay.`);return}Z(`Triggering ${Ni} overlay.`),o.setOverlayOpen("a"),await i(s)}catch(u){a.error(new Error("[PWO] Error triggering overlay"),u),ae(`Error triggering ${Ni} overlay: ${u?.message}`)}};return new To(s.delay,1,c)}};var vn="Exit Intent",Ao=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,dp(()=>this.triggerOverlay())}get triggerName(){return vn}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Le()){let e=await He();if(this.minimumPageViews&&this.minimumPageViews>e){Z(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await re(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),ae(`Error delaying ${this.triggerName} overlay: ${e?.message}`)}}static buildTrigger(e,r,o,n,i){if(!e.showSecondOverlayOnExitIntent&&r?.trigger_type!==ir.EXIT_INTENT)return;let s=new vt(r),c=new vt(P({},r,{trigger_type:ir.EXIT_INTENT})),u=async()=>{try{if(!Le()){if(!o.isEligibleForExitOverlay()){Z(`Not eligible for ${vn} overlay.`);return}if(n.eventData.identified){Z(`Not eligible for ${vn} overlay, identified user.`);return}}Z(`Triggering ${vn} overlay.`),o.setOverlayOpen("e"),await i(c)}catch(g){a.error(new Error("[PWO] Error triggering overlay"),g),ae(`Error triggering ${vn} overlay: ${g?.message}`)}};return new Ao(s.delay,1,u)}};var _n="Page View/ML",Io=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,this.triggerOverlay()}get triggerName(){return _n}get minimumPageViewsRequired(){return this.minimumPageViews}async triggerOverlay(){try{if(!Le()){let e=await He();if(this.minimumPageViews&&this.minimumPageViews>e){Z(`${this.triggerName} overlay not triggering, not enough page views.`);return}this.delay>0&&await re(this.delay*1e3)}await this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`)),ae(`Error delaying ${_n} overlay.: ${e?.message}`)}}static buildTrigger(e,r,o,n){let i=new vt(e);if(i.trigger_type===ir.EXIT_INTENT||!i.trigger_type)return;let s=async()=>{try{if(!Le()&&!await r.isEligibleForStandardOverlay(o)){Z(`Not eligible for ${_n} overlay.`);return}Z(`Triggering ${_n} overlay.`),r.setOverlayOpen("s"),await n(i)}catch(c){a.error(new Error("[PWO] Error triggering overlay"),c),ae(`Error triggering ${_n} overlay.: ${c?.message}`)}};return new Io(i.delay,i.minimum_page_views,s)}};var Qr=class{constructor(e){this.triggers=[];this.triggers=e}get triggerList(){return this.triggers}static buildTriggerManager(e,r,o,n,i,s){if(!r.overlay_eligible&&!Le()&&!wo())return ae("Triggers disabled as overlay not eligible."),new Qr([]);let c=[Io.buildTrigger(r,o,n,s),To.buildTrigger(e,r,o,i,s),Ao.buildTrigger(e,r,o,i,s)].filter(u=>u!==void 0);return Zr().setTriggers(c),new Qr(c)}};function gp(){let t=ju()?.filter(o=>o?.name==="request: view")||[];if(t.length===0)return{};let e=t[t.length-1],r=JSON.parse(e?.data?.body||"{}");return P({},{page_id:r?.page_id})}var Sv={subtree:!0,childList:!0,attributes:!0};function cc(t){let e=t.getAttribute("tabindex");return t.removeAttribute("tabindex"),()=>{t.setAttribute("tabindex",e||"0")}}function hp(t){let r=["x-trap","x-trap.noscroll","x-trap.noscroll.inert","x-trap.inert","x-trap.inert.noscroll"].map(o=>[...t.querySelectorAll(`[${CSS.escape(o)}]`)].map(i=>{let s=i.getAttribute(o);return i.removeAttribute(o),()=>{i.setAttribute(o,s||"")}})).flat().filter(o=>!!o);return()=>{r.forEach(o=>o())}}function xv(t){if(!(!t||window.themeCore===void 0))return re(1e3).then(()=>{window.themeCore?.utils?.removeTrapFocus()}),()=>{window.themeCore?.EventBus?.emit("cart:drawer:open")}}function Tv(t){if(t)return re(500).then(()=>{document.querySelector(".js-cartCloseV2")?.click()}),()=>{re(100).then(()=>{document.querySelector(".js-cartToggle")?.click()})}}var uc=class{constructor(e){this.isRunning=!0;this.focusTrap=e;let r=this.getActiveElement();if(r){this.handleActiveElement(r);return}this._promise=new Promise((o,n)=>{this.resolve=o,this.observer=new MutationObserver(()=>{try{r=this.getActiveElement(),r&&(this.handleActiveElement(r),o())}catch(i){this.observer?.disconnect(),this.isRunning=!1,n(i)}}),this.observer.observe(document.querySelector(e.elementToObserver??e.baseElement),Sv)})}getActiveElement(){return this.focusTrap.activeElements.reduce((e,r)=>{if(e)return e;let o=document.querySelector(r.selector);return o?{element:o,callback:r.callback}:void 0},void 0)}handleActiveElement(e){this.cleanup=e.callback(e.element),this.observer?.disconnect(),this.isRunning=!1}get isActive(){return this.isRunning}get promise(){return this._promise}cancel(){if(!this.isRunning){this.cleanup?.();return}this.isRunning=!1,this.observer?.disconnect(),this.resolve?.()}};function yp(t=[{baseElement:"[id=sidebar-cart]",activeElements:[{selector:"[id=sidebar-cart][aria-hidden=false]",callback:cc}]},{baseElement:"#CartDrawer",activeElements:[{selector:"#CartDrawer.drawer--is-open",callback:cc},{selector:"#CartDrawer.is-transitioning[tabIndex]",callback:cc},{selector:"#CartDrawer.is-active",callback:xv}]},{baseElement:".cart-drawer-v2",additionalElements:[".js-cartCloseV2",".js-cartToggle"],elementToObserver:"html",activeElements:[{selector:".state--cart-drawer-v2-open",callback:Tv}]},{baseElement:"#cart-drawer",activeElements:[{selector:'#cart-drawer:not([style="display: none;"])[x-show]',callback:hp}]},{baseElement:"#modals-rightDrawer",activeElements:[{selector:'#modals-rightDrawer:not([style="display: none;"])[x-show]',callback:hp}]}]){try{if(t.length===0)return;let e=t.find(({baseElement:r,additionalElements:o})=>[r,...o||[]].every(i=>document.querySelectorAll(i).length>0));return e?new uc(e):void 0}catch(e){a.error(e)}}function jt(t){let e=new Error(t);return e.name="InvalidResponseBodyError",e.status="warn",e.stack=ue(e.stack,1),e}var st,Ht,zt,Ct,Av,vp,Li=Zr(),Fe=new ke;async function Iv(){st=await Xr.createPWOEventData(!1,Ct)}async function kv(){try{Fe.closeOverlay(),await Iv()}catch(t){a.error(t)}}function Ov(t){a.push({trigger:y.PWO_OPEN_ATTEMPT}),Ht.triggerOverlay(t.form_id),zt.addAttributesToUserProfile({blackcrow_exposed_population_bucket:st?.bucketName,bcai_trigger:t.trigger_type,profile:t.form_profile})}function Cv(t){let e=t?.apps?.pwo;if(e){Li.setPwoResponse(new vt(e)),st?.extendEventData({resolved_form_id:e.form_id,resolved_form_profile:e.form_profile,trigger_type:e.trigger_type,trigger_count:e.trigger_count,pwo_response_overlay_eligible:e.overlay_eligible});let r=st?.bucketName;zt.addAttributesToUserProfile(P({},{blackcrow_all_population_bucket:r,blackcrow_eligible_population_bucket:e?.overlay_eligible?r:void 0})),Av=Qr.buildTriggerManager(Ct,e,Fe,zt,st,Ov)}else a.error(jt(`[${W.toUpperCase()}] missing "pwo" in response: ${JSON.stringify(t)} - PWO may be disabled for current URL pattern.`)),ae('PWO Decision response missing "pwo" node.')}function Nv(t,e){return ce(t,P({},e,gp()),r=>{Cv(r)})}async function Rv(t){try{if(t.renderer&&t.isIdentified&&$a()){await t.renderer;let e=await t.isIdentified;Li.setIdentified(e),st=await Xr.createPWOEventData(e,Ct);let r=st.eventData;await Nv(H.PWO_DECISION,r)}else ae("PWO Decision request skipped, invalid view response or setup incomplete")}catch(e){a.error(e),ae(`Error in renderer, identifier or PWO Decision Request: ${e?.message}`)}}function Ri(t,e=!1){let r=Fe.isOverlayOpen(),o=typeof t?.rendered_form_id=="number"?`${t?.rendered_form_id}`:t?.rendered_form_id?.trim(),n=r&&(o===t.resolved_form_id||e&&!o);return P(t,{bcai_triggered:n,overlay_triggered_by_atc:n&&Fe.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:n&&Fe.wasOverlayOpenedBy("e")})}function Lv(){D("platform",y.VIEW_RESPONSE,()=>{$a()&&(D("platform",y.PWO_CLOSE,t=>{let e=Ht.processEvent(y.PWO_CLOSE,t);if(Lr===e){Z("Blocking PWO_CLOSE event, should be replaced by another.");return}let r=Ri(P({},e,st?.eventData));ce(H.PWO_CLOSE,r),r.bcai_triggered&&(Fe.closeOverlay(!0),vp?.cancel())}),D("platform",y.PWO_EMAIL_LEAD,t=>{let e=Ht.processEvent(y.PWO_EMAIL_LEAD,t);if(Lr===e){Z("Blocking PWO_EMAIL_LEAD event, should be replaced by another.");return}Fe.submitPII();let r=Ri(P({},e,st?.eventData));ce(H.PWO_EMAIL_LEAD,r),r.bcai_triggered&&zt.addAttributesToUserProfile({blackcrow_identified:!0})}),D("platform",y.PWO_SMS_LEAD,t=>{let e=Ht.processEvent(y.PWO_SMS_LEAD,t);if(Lr===e){Z("Blocking PWO_SMS_LEAD event, should be replaced by another.");return}Fe.submitPII();let r=Ri(P({},e,st?.eventData));ce(H.PWO_SMS_LEAD,r),r.bcai_triggered&&zt.addAttributesToUserProfile({blackcrow_identified:!0})}),D("platform",y.PWO_IMPR,t=>{let e=Ht.processEvent(y.PWO_IMPR,t);if(Lr===e){Z("Blocking PWO_IMPR event, should be replaced by another.");return}let r=Ri(P({},e,st?.eventData),!0);Fe.overlayOpenedEvent(r),ce(H.PWO_IMPR,r),r.bcai_triggered&&(vp=yp()),r.bcai_triggered&&r.overlay_triggered_by_atc&&mp(Ct.styleSettings,r?.rendered_form_id,Ht)}),D("platform",y.PWO_OPEN_ATTEMPT,t=>{let e=P({},t,st?.eventData);Fe.openAttemptEvent(e),ce(H.PWO_OPEN_ATTEMPT,P(e,{bcai_triggered:!0,overlay_triggered_by_atc:Fe.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:Fe.wasOverlayOpenedBy("e")}))}))})}function Dv(){let t={isIdentified:void 0,renderer:void 0};try{if(Ye.isDisabled()||v())return ae("PO not initializing, disabled or in webpixel."),t;ke.isExcludedByChannel(),Ct=Ye.fromConfigJSON(),Li.setPwoSettings(Ct),Li.setAppState(Fe),Ht||(Ht=new So(Ct.rendererName)),zt||(zt=new xo(Ct.identifierNames)),Fe.setOverlayClosedDuration(Ct.overlayClosedCookieDuration),Fe.setMaxTotalOverlays(Ct.maxTotalOverlays),t.isIdentified=zt.setup().then(()=>zt.isUserIdentified()).catch(()=>(ae("Identifier failed to initialize, defaulting to identified."),!0)),t.renderer=Ht.setup(),Lv()}catch(e){a.error(e),ae("Error on initialization.")}return t}var _p={appName:W,init:Dv,sendAppScores:Rv,cleanup:kv};var dc="cordial";function Fv(t,e,r){let o=`${d}`,n=V([o,t.integration_product]),i=b(window,"crdl");if(typeof i=="function"){let s={app_name:e,integration_product:t.integration_product,conversion_product:t.conversion_product,conversion_type:t.conversion_type,comparison_population:t.comparison_population,comparison_group:t.comparison_group,comparison_type:t.comparison_type,threshold_setter:t.threshold_setter,threshold_group_count:t.threshold_group_count,score:j(t.score)};i("event",n,s),typeof r=="function"&&r(dc,n)}else throw new Error(B)}var lc={name:dc,send:oe(dc,Fv)};var wn=window.GoogleAnalyticsObject||"ga";window[wn]=window[wn]||function(){(window[wn].q=window[wn].q||[]).push(arguments)};var EB=window[wn];window.dataLayer=window.dataLayer||[];function Mv(){return typeof window.gtag=="function"?window.gtag.toString()!=="function () { }":!1}var Nt=Mv()?window.gtag:function(){window.dataLayer.push(arguments)};function wp(t,e){let r=document.createElement("script");r.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r),Nt("js",new Date),Nt("config",t,e)}function Ep(t,e,r=!1){Nt("event",t,{send_to:e,non_interaction:r})}async function En(){try{return(await I("_ga"))?.split(".")?.slice(-2).join(".")}catch(t){a.error(t);return}}async function pc(t,e){try{if(v()){let o=z(t,e).tracking_id,n=await En();return o!=null&&o.startsWith("UA-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return S(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("UA-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}async function fc(t,e){try{if(v()){let o=z(t,e).tracking_id,n=await En();return o!=null&&o.startsWith("G-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return S(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("G-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}function ko(t,e={}){!v()&&t&&wp(t,e)}async function Di(t,e,r,o=!1){try{let n=await ee(r),i=Cr(t,e),s=n.length?n[0].value:void 0;i.forEach(c=>{let u=c.pixelId,g=c.loadPixel===!0;u&&s&&g&&(ko(u,{user_id:s,send_page_view:!1}),o&&Ep("page_view_blackcrow",u))})}catch(n){a.error(n)}}var Fi="event",Me="google_analytics",$v="https://www.google-analytics.com/collect",Bv="https://www.google-analytics.com/g/collect";function bp(){return!!$("config.google_analytics.gtag_externally_configured")}function Uv(){return!!$("config.google_analytics.gtm_format")}function Vv(t,e){let r=z(t,Me);if(bp()){e();return}let o=r?.tracking_id;ko(o,{send_page_view:!1}),e()}async function Wv(t,e,r,o,n){try{let i=new URL($v);i.search=Ae({v:1,t:Fi,tid:t,cid:await En(),ec:e,ea:r,el:o,ua:ge(),dl:k(),dt:document.title,ni:1}),K(i.toString(),{method:"GET",mode:"cors"},n)}catch(i){a.error(new Error(`${Me} api call failed with ${i}`))}}async function qv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let E=new URL(Bv);E.search=Ae({v:2,tid:t,en:Fi,cid:await En(),dl:k(),dt:document.title,ep:{app_name:r,integration_product:o,conversion_product:n,comparison_population:g,comparison_type:s,conversion_type:i,threshold_setter:c,threshold_group_count:u,non_interaction:!0},epn:{score:h}}),K(E.toString(),{method:"POST",mode:"cors"},e)}catch(E){a.error(new Error(`${Me} api call failed with ${E}`))}}function Pp(t,e,r,o,n,i,s,c,u){let g={};return g.category=V([t,e,r,o]),g.action=V([n,i,s,c]),g.label=u,g}async function Gv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let ro=function(){typeof e=="function"&&e(Me,{eventCategory:Kt,eventAction:wr,eventLabel:Bo})};var E=ro;let q=z(t,Me);if(q.pageBlocked)return;let me=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,Zt=Pp(r,o,n,i,s,c,u,g,h),Kt=Zt.category,wr=Zt.action,Bo=Zt.label,fa=await pc(t,Me),Uo=await fc(),Vo;if(bp()&&(Vo={send_to:q.tracking_id}),Uv()){let Wo=V([r,o],"_");window.dataLayer.push({event:Wo,non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:g,comparison_type:s,threshold_setter:c,threshold_group_count:u,score:h,...Vo}),ro();return}if(Uo||Vo){let Wo=V([r,o],"_");Nt("event",Wo,{non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:g,comparison_type:s,threshold_setter:c,threshold_group_count:u,score:h,...Vo}),ro()}else if(fa)Nt("event",wr,{event_category:Kt,event_label:Bo,non_interaction:!0}),ro();else if(typeof me=="function"){let Wo=_.setTimeout(()=>{a.error(new A(`${Me} ready hook not fired`))},5e3);me(Ru=>{if(clearTimeout(Wo),!(Ru&&Ru.get("trackingId"))){let Rn=q.tracking_id;Rn||S(me.getAll(),Pm=>{let Lu=Pm.get("trackingId");if(Lu)return Rn=Lu,!1}),Rn?me("create",Rn,"auto"):a.error(new sn(`${Me} tracking id not found`))}me("send",{hitType:Fi,eventCategory:Kt,eventAction:wr,eventLabel:Bo,nonInteraction:!0}),ro()})}else throw new Error(B)}catch(q){a.error(q)}}async function jv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h}){try{let wr=function(){typeof e=="function"&&e(Me,{eventCategory:me,eventAction:Zt,eventLabel:Kt})};var E=wr;let q=Pp(r,o,n,i,s,c,u,g,h),me=q.category,Zt=q.action,Kt=q.label,Bo=await pc(t,Me);if(await fc(t,Me)){let Uo=z(t,Me).tracking_id;qv(Uo,{onSuccess:wr,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:s,thresholdSetter:c,thresholdGroupCount:u,comparisonPopulation:g,score:h})}else if(Bo){let Uo=z(t,Me).tracking_id;Wv(Uo,me,Zt,Kt,wr)}else throw new Error(B)}catch(q){a.error(q)}}function Hv(t,e,r){let o=`${d}_${e}`;function n(s){s.message===B?a.error(new A(`${Me} globals not found`),{appName:e}):a.error(s)}if(!t)return;let i=v()?jv:Gv;U(()=>i(e,{onSuccess:r,eventPrefix:o,integrationProduct:t.integration_product,conversionProduct:t.conversion_product,conversionType:t.conversion_type,comparisonType:t.comparison_type,thresholdSetter:t.threshold_setter,thresholdGroupCount:t.threshold_group_count,comparisonPopulation:t.comparison_population,score:j(t.score)}),n)}var mc={eventHitType:Fi,name:Me,setup:Vv,send:Hv};var Oo="google_ads",zv="www.googleadservices.com",Jv="_gcl_au";function Mi(t){return z(t,Oo)?.conversion_id}function Sp(t){return Mi(t)?.split("-").splice(-1).join()}async function Zv(){try{return(await I(Jv))?.split(".").splice(-2).join(".")}catch(t){a.error(t);return}}async function xp(t){try{let e=k(),r=Ce(),o=io(),n=Date.now(),i=await Zv(),s={data:`event=${t};non_interaction=true`,fst:n,random:n,auid:i,url:e,ref:r,tiba:o,hn:zv,rfmt:3,fmt:4,async:1,cv:11,guid:"ON"};return Ae(s)}catch(e){return a.error(e),Ae({})}}var Kv="event",Yv="https://googleads.g.doubleclick.net/pagead/viewthroughconversion";function Xv(t,e){let r=Mi(t);ko(r),e()}function Qv(){if(Array.isArray(window.dataLayer)){let t=!1;return S(window.dataLayer,e=>{e[0]==="config"&&e[1]&&e[1].indexOf("AW-")===0&&(t=!0)}),t}return!1}async function e_(t,e,r){try{let o=Sp(e),n=await xp(t);oo(`${Yv}/${o}/?${n}`),r()}catch(o){a.error(new Error(`${Oo} api call failed with ${o}`))}}function t_(t,e,r){if(Qv())Nt("event",t,{send_to:Mi(e),non_interaction:!0}),r();else throw new Error(B)}function r_(t,e,r){let o=`${d}_${e}`,n=V([o,t.integration_product,t.conversion_product,t.conversion_type,t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,`score_${j(t.score)}`]);function i(){typeof r=="function"&&r(Oo,{event:n})}v()?e_(n,e,i):t_(n,e,i)}var gc={eventHitType:Kv,name:Oo,setup:Xv,send:oe(Oo,r_)};var hc="heap";function o_(t,e,r){let o=b(window,"heap");if(o&&typeof o.addUserProperties=="function"){let i={[V([d,t.comparison_group,t.threshold_group_count])]:t.score};o.addUserProperties(i),typeof r=="function"&&r(hc,i)}else throw new Error(B)}var yc={name:hc,send:oe(hc,o_)};var bn="klaviyo";function n_(t,e){if(!v()){let r=z(t,bn).api_key,o=window.klaviyo?window.klaviyo.identify:null;if(r&&typeof o!="function"){let n=document.createElement("script");n.src=`https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=${r}`,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}e()}async function Tp(t,e,r,o){try{let s=function(){typeof o=="function"&&o(bn,e)},u=function(){let g=j(r.score),h={[e]:g};return c&&P(h,{email:c}),h};var n=s,i=u;let c=await Ee();if(v()){let g=z(t,bn).api_key;g&&K(`https://a.klaviyo.com/client/profiles/?company_id=${g}`,{body:JSON.stringify({data:{type:"profile",attributes:{properties:u()}}}),method:"POST",headers:{accept:"application/json",revision:"2025-01-15","content-type":"application/json"}},s())}else window.klaviyo||(window.klaviyo=[],a.error(new A(`${bn} globals not found`))),window.klaviyo.push(["identify",u()]),s()}catch(s){a.error(s)}}var Ap={},vc={};function i_(t){let e=Ap[t];return()=>{Tp(e.appName,e.eventName,e.scoreObj,e.onSuccess)}}function a_(t,e,r){if(!t)return;let o=V([`${d}`,"score",t.threshold_group_count,t.comparison_group]);t.name!==void 0&&(Ap[t.name]={appName:e,eventName:o,scoreObj:t,onSuccess:r},vc[t.name]===void 0&&(vc[t.name]=i_(t.name)),_.addListener(window,"beforeunload",vc[t.name])),_.setTimeout(()=>Tp(e,o,t,r),5e3)}var _c={name:bn,setup:n_,send:a_};var s_="event",$i="microsoft_ads";function c_(t,{onSuccess:e,eventCategory:r,eventAction:o,eventLabel:n,eventValue:i}){function s(){typeof e=="function"&&e($i,{event_category:r,event_action:o,event_label:n,event_value:i})}try{window.uetq=window.uetq||[],window.uetq.push("event",o,{event_category:r,event_label:n,event_value:i}),s()}catch{a.error(new A(`${$i} globals not found`),{appName:t})}}function u_(t,e){let o=z(t,$i).tracking_id;o?function(n,i,s,c,u){var g,h,E;n[u]=n[u]||[],g=function(){var q={ti:o};q.q=n[u],n[u]=new UET(q),n[u].push("pageLoad"),e()},h=i.createElement(s),h.src=c,h.async=1,h.onload=h.onreadystatechange=function(){var q=this.readyState;q&&q!=="loaded"&&q!=="complete"||(g(),h.onload=h.onreadystatechange=null)},E=i.getElementsByTagName(s)[0],E.parentNode.insertBefore(h,E)}(window,document,"script","//bat.bing.com/bat.js","uetq"):e()}function d_(t,e,r){let o=`${d}_${e}`;if(!t)return;let n=t.integration_product,i=V([o,n,t.conversion_product,t.conversion_type]),s=V([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]),c,u;if(n==="prospecting")u=t.raw_probability;else{c=j(t.score);let g=Number(t.score);g>=0&&(u=g)}c_(e,{onSuccess:r,eventCategory:i,eventAction:s,eventLabel:c,eventValue:u})}var wc={eventHitType:s_,name:$i,setup:u_,send:d_};var Ec="oracle_responsys";function l_(t,e,r){let o=b(window,"ORA.click");if(typeof o=="function"){let n=j(t.score);o({data:{bc_score:n,"wt.dl":99}}),typeof r=="function"&&r(Ec,n)}else throw new Error(B)}var bc={name:Ec,send:oe(Ec,l_)};var Ip="track";var Pc="outbrain";function p_(t,e,r){let o=b(window,"obApi");if(typeof o=="function"){let n=`${d}`,i=t.integration_product,s=V([n,i,t.threshold_group_count,j(t.score)]," ").replace(/[^0-9a-z\s]/gi,"");o(Ip,s),typeof r=="function"&&r(Pc,s)}else throw new Error(B)}var Sc={name:Pc,send:oe(Pc,p_)};var hr="pinterest",Bi=`${d}`;function xc(t){return{lead_type:t.integration_product,video_title:t.conversion_product,order_id:t.conversion_type,property:t.comparison_group,promo_code:t.comparison_type,search_query:t.threshold_setter,order_quantity:j(t.threshold_group_count),value:j(t.score)}}async function kp(t,e,r){try{let o=await I("_pin_unauth"),n=await I("_derived_epik"),i={event:Bi,ed:e,tid:t,pd:{...o&&{pin_unauth:o},...n&&{derived_epik:n}}};return r&&(i.ad={loc:k(),ref:document.referrer}),i}catch(o){a.error(o);let n={event:Bi,ed:e,tid:t};return r&&(n.ad={loc:k(),ref:document.referrer}),n}}async function Op(t,e,r){try{let o=z(e,hr).tracking_id;if(o){let n="https://ct.pinterest.com",i=xc(t),s=await kp(o,i,!1),c=Ae(s,!1);K(`${n}/user/?${c}`,{method:"GET"},r,()=>a.error(new Error(`${hr} api call failed`)));let u=await kp(o,i,!0),g=Ae(u,!1);K(`${n}/v3/?${g}`,{method:"GET"},r,()=>a.error(new Error(`${hr} api call failed`)))}}catch(o){a.error(o)}}async function f_(t,e){try{let r=xc(t);if(z(e,hr).advancedMatching){let n=await Ee();P(r,{em:n})}return r}catch(r){return a.error(r),xc(t)}}function m_(t,e,r){if(v())Op(t,e,r);else{let o=b(window,"pintrk");if(typeof o!="function"){if(z(e,hr).tracking_id===void 0)throw new Error(B);Op(t,e,r);return}f_(t,e).then(n=>{o("track",Bi,n),typeof r=="function"&&r(hr,Bi)}).catch(n=>a.error(n))}}var Tc={name:hr,send:oe(hr,m_)};var eo="snapchat",Ui="_scid",Vi="u_sclid",Wi="u_scsid",kc="snaptr",Ic={};function qi(t,{getItem:e,setItem:r},o,n=rn){return!e||!r?(a.error(new Error("Storage object is not valid")),Promise.resolve()):Promise.resolve(e(t)).then(i=>{let s=i;s||(s=n(),r(t,s)),o(s)}).catch(i=>{a.error(i)})}function Ac(t){return Ic[t]}function Gi(t,e){return Ic[t]=e,Ic[t]}function g_(t){return z(t,eo)?.pixel_id}function Cp(t,e){let r=g_(e),o=Yt("navigation")[0],n=Yt(kc)[0];return{pid:r,ev:t.score,pl:k(),rf:Ce(),ts:Date.now(),trackId:rn(),u_c1:Ac(Ui),u_sclid:Ac(Vi),u_scsid:Ac(Wi),m_dcl:o?.domContentLoadedEventEnd,m_pi:o?.domInteractive,m_pl:o?.loadEventEnd,m_pv:o?"v2":"v1",m_rd:Math.floor(Ln()),m_sl:n?.startTime,v:"2.0.0",bt:"1d53c387",if:!1}}function Co(t){if(typeof Promise.allSettled=="function")return Promise.allSettled(t);let e=t.map(r=>Promise.resolve(r).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o})));return Promise.all(e)}var h_="https://tr.snapchat.com/p";function Np(t,e){return v()?Co([qi(Ui,{getItem:globalThis.browser?.cookie?.get,setItem:globalThis.browser?.cookie?.set},r=>{Gi(Ui,r)}),qi(Vi,{getItem:ye,setItem:Ve},r=>{Gi(Vi,r)}),qi(Wi,{getItem:Q,setItem:Ie},r=>{Gi(Wi,r)})]).finally(e):e()}function y_(t,e,r){let o=Cp(t,e);K(`${h_}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Ae(o)},()=>{typeof r=="function"&&r(eo,`${d},${t.score}`)},()=>{a.error(`Unable to send scores to ${eo}.`)})}function v_(t,e,r){let o=b(window,kc);if(typeof o=="function"){if(o("track",t.score),typeof r=="function"){let n=`${d}`,i=V([n,t.score]);r(eo,i)}}else throw new Error(B)}function __(t,e,r){return v()?y_(t,e,r):v_(t,e,r)}var Pn={name:eo,identify:Np,setup:Np,send:oe(eo,__)};var Oc="taboola";function w_(t,e,r){if(!t)return;window._tfa===void 0&&(window._tfa=[],a.error(new A(`${Oc} globals not found`),{appName:e}));let o=`${d}`,n=t.integration_product,i=V([o,n,t.threshold_group_count,j(t.score)],"_");window._tfa.push({notify:"event",name:i}),typeof r=="function"&&r(Oc,i)}var Cc={name:Oc,send:w_};function E_(){return"product"}async function Nc(){try{let t={},e=await Ee();return e&&(e=e.toLowerCase()),t.email=e,t}catch(t){return a.error(t),{}}}function ji(t,e){let r=V([`${d}_${t}`,e]),o=E_();return{content_id:r,content_type:o}}async function Rp(t){try{let e={context:{page:{referrer:document.referrer,url:k()},pixel:{code:t},userAgent:ge()}},r={},o=await I("_ttp");o&&(r.anonymous_id=o);let n=await Nc(),i=await ui(n),s={...r,...i};return e.context.user=s,e}catch(e){a.error(e);return}}function Rc(t,e,r,o){return Rp(t).then(n=>(n.event=e,n.properties=ji(o,r),n))}function Lp(t){return Rp(t).then(e=>(e.event="EnrichAM",e))}var Sn="tiktok",b_="https://analytics.tiktok.com/api/v2/pixel";function P_(t){let e=window.ttq;return e&&e.instances()&&Array.isArray(e.instances())?!!e.instances().find(r=>t===r.pixelCode&&r.loaded):!1}function Lc(){return $("tiktokAccounts")||[]}function S_(t,e){v()||Lc().forEach(o=>{let n=o.pixelId;n&&!P_(n)&&function(i,s,c){i.TiktokAnalyticsObject=c;var u=i[c]=i[c]||[];u.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],u.setAndDefer=function(h,E){h[E]=function(){h.push([E].concat(Array.prototype.slice.call(arguments,0)))}};for(var g=0;g<u.methods.length;g++)u.setAndDefer(u,u.methods[g]);u.instance=function(h){for(var E=u._i[h]||[],q=0;q<u.methods.length;q++)u.setAndDefer(E,u.methods[q]);return E},u.load=function(h,E){var q="https://analytics.tiktok.com/i18n/pixel/events.js";u._i=u._i||{},u._i[h]=[],u._i[h]._u=q,u._t=u._t||{},u._t[h]=+new Date,u._o=u._o||{},u._o[h]=E||{},E=document.createElement("script"),E.type="text/javascript",E.async=!0,E.src=q+"?sdkid="+h+"&lib="+c,h=document.getElementsByTagName("script")[0],h.parentNode.insertBefore(E,h)},u.load(n),u.page()}(window,document,"ttq")}),e()}function Dc(){a.error(new Error(`${Sn} api call failed`))}async function Dp(t,e){try{let r=await Ee(),o=await Rr();if(r||o){let n=t.pixelId,i=b(window,"ttq.instance");typeof i=="function"&&typeof i(n).identify=="function"&&(i(n).identify({email:r,phone_number:o}),e&&typeof e=="function"&&e())}}catch(r){a.error(r)}}function Fc(t,e,r){K(b_,{body:JSON.stringify(t),method:"POST"},e,r)}async function Fp(t,e){try{let r=t.pixelId;if(r&&(await Nc()).email){let n=await Lp(r);Fc(n,e,Dc)}}catch(r){a.error(r)}}function x_(t,e){let r=v();function o(i,s){return()=>{let u=(nt(`${t}.integrations`)||[]).find(g=>Sn===g.platform);u&&u.scores&&u.scores.forEach(({score:g,integration_product:h})=>{r?Rc(s,g,h,t).then(E=>{Fc(E,e,Dc)}):i(s).track(g,ji(t,h))}),r||e&&typeof e=="function"&&e()}}Lc().forEach(i=>{let s=i.pixelId,c=b(window,"ttq.instance"),u=o(c,s);r?Fp(i,u):Dp(i,u)})}function Mp(t,e){return function(){if(typeof t=="function"){let o=`${d}`,n=V([o,e.score]);t(Sn,n)}}}function T_(t,e,r,o){let n=t.pixelId,i=b(window,"ttq.instance");if(n&&typeof i=="function")Dp(t),e.score&&i(n).track(e.score,ji(r,e.integration_product)),Mp(o,e)();else throw new Error(B)}function A_(t,e,r,o){let n=t.pixelId;if(n)Fp(t).then(()=>{let i=e.score,s=e.integration_product;i&&(o=typeof o=="function"?Mp(o,e):void 0,Rc(n,i,s,r).then(c=>{Fc(c,o,Dc)}))});else throw new Error(B)}function I_(t,e,r){Lc().forEach(n=>{v()?A_(n,t,e,r):T_(n,t,e,r)})}var xn={name:Sn,identify:x_,setup:S_,send:oe(Sn,I_)};function Mc({src:t,alt:e}){let r=document.createElement("img");return r.width=1,r.height=1,r.alt=e||"",r.src=t,r}var Hi="tradedesk";function k_(t,e,r){let n=z(e,Hi).pixel_id,i=j(t.score)-1,s=t.comparison_type,c=t.conversion_product,u=t.threshold_group_count;n&&!v()&&ie(()=>{if(Mc({src:`https://insight.adsrvr.org/track/pxl/?${n}&fmt=3&td1=blackcrow&td2=comparison_type|${s}&td3=comparison_product|${c}&td4=threshold_group_count|${u}&td5=score|${i}`}),typeof r=="function"){let g=`${d}`,h=V([g,t.score]);r(Hi,h)}else throw new Error(B)})}var $c={name:Hi,send:oe(Hi,k_)};var yr="target";var zi={[lc.name]:lc,[or.name]:or,[mc.name]:mc,[gc.name]:gc,[yc.name]:yc,[_c.name]:_c,[wc.name]:wc,[bc.name]:bc,[Sc.name]:Sc,[Tc.name]:Tc,[Pn.name]:Pn,[Cc.name]:Cc,[xn.name]:xn,[$c.name]:$c};function O_(t,e,r="score_push"){Mt(yr,t,r),fe(`${yr} ${r}: ${t}`,e)}function C_(t,e){e&&S(e,r=>{r.name&&zi[t].send(r,yr,O_)})}function N_(){let t=ni(yr),e={};return t.forEach(r=>{let o=zi[r];o!==void 0&&typeof o.setup=="function"?e[r]=new Promise(n=>o.setup(yr,n)).catch(n=>{a.error(n)}):e[r]=Promise.resolve()}),e}function R_(t){let e=nt(`${yr}.integrations`),r=[];return S(e,o=>{let n=o.platform,i=o.scores,s=zi[n];t[n]&&r.push(t[n].then(()=>{s!==void 0&&typeof s.send=="function"&&C_(n,i)}))}),Promise.all(r)}var $p={appName:yr,init:N_,platforms:zi,sendAppScores:R_};var No="identity";function Bc(){return{fb:window?.trekkie?.config?.S2S?.facebookCapiEnabled}}var Ro=/.*\/cart\/{1,2}add(\.js|\.json)?(\?.*)?$/gm;function L_(t,e){return new Promise((r,o)=>{K(t,e,r,o)}).catch(r=>a.error(r))}var Bp=/.*(\/cart(\.json|\.js)|\/cart\/(change|update)(\.js|\.json)?)(\?.*)?$/gm,Zi="_bcai_cs",Up=!1;function Ji(t){try{Ve(Zi,t)}catch(e){a.error(e)}}async function qp(){try{return await ye(Zi)}catch(t){a.error(t);return}}function D_(){return window?.Shopify?.routes?.root?L_(`${window.Shopify.routes.root}cart.js`):Promise.resolve()}function Vp(t){try{return JSON.parse(t)}catch(e){return a.error(new jt(e?.message)),null}}async function Wp(t){try{let e=[t];t.items?.length&&(e=t.items);let r=e.reduce((s,c)=>{let u={...s};return c?.id!==void 0&&(u[c.id]=c),u},{}),o=await qp();if(!o||!t||Object.keys(r).length===0)return;let n=(o.items??[]).map(s=>{let c={...s},u=r[c?.id];return c.quantityAdded=0,u&&(c.quantityAdded=u.quantity-c.quantity,c.quantity=u.quantity,delete r[c.id]),c});Object.keys(r).forEach(s=>{let c=r[s];n.push({...c,quantityAdded:c.quantity})});let i={...o,item_count:n.reduce((s,c)=>s+(c.quantity??0),0),total_price:(o.total_price??0)+n.reduce((s,c)=>s+c.quantityAdded*(c.price??0),0)};i.items=n.map(s=>(delete s.quantityAdded,s)),Ji(i)}catch(e){a.error(e)}}function F_(){v()||Up||(Up=!0,hn(Bp,t=>{try{t=Vp(t),t&&Ji(t)}catch(e){a.error(e)}}),fn(Bp,t=>{t.json().then(e=>Ji(e),e=>{a.error(new jt(e?.message))}).catch(e=>a.error(e))}),hn(Ro,t=>{try{return t=Vp(t),t?Wp(t):void 0}catch(e){a.error(e);return}}),fn(Ro,t=>t.json().then(Wp).catch(e=>a.error(e))))}function M_(){return v()?Promise.resolve():qp().then(t=>t||D_().then(e=>(e&&Ji(e),e)))}var Tn={setup:F_,getData:M_};async function Lo(t,e,r,o){try{let n=await ee(e),i=await I(Lt)||Ge(Lt),s=await I(ct)||Ge(ct),c={site_name:l,metadata:ri(),device_info:ge(),page_url:k(),page_referrer_url:Ce(),page_title:io(),platform_name:t,platform_event_name:r[0],platform_event_names:r,ids:n,user_data:{fbc:i,fbp:s,bcvid:(await ot())?.id,sh:{ct:await I("cart")||(await ye(Zi))?.token,ch:Fd(),locale:globalThis?.Shopify?.locale,country:globalThis?.Shopify?.country,root_route:globalThis?.Shopify?.routes?.root}},resolved_score:await Q(Ho),capi:Bc(),shop_name:globalThis?.Shopify?.shop?.replace(".myshopify.com","")||"ollypbc.js".toLowerCase().replace(".js","")},u={fb_test_event_code:await I("fb_test_event_code")};jd(P(c,o,u))}catch(n){a.error(n)}}var Gp="klaviyo",Ki;function $_(t){return t==="track"}function B_(t){return t.overrideSampling=!0,t.message=`identity: ${t.message}`,t}function U_(t){return e=>{e.message===`identity: ${B}`?a.error(new A(t)):a.error(e)}}function V_(t,e){let r=e?.ImageURL;return t==="Viewed Product"&&r?!r.startsWith("https:files/"):!0}function W_(t){try{return JSON.parse(JSON.stringify(t).replace("https:https:","https:"))}catch{return t}}function Uc(t,e){$_(e[0])&&V_(e[1],e[2])&&Lo(Gp,t,[e[1]],{data:W_(e[2])})}function q_(t){Array.isArray(window._learnq)&&window._learnq.forEach(e=>{Uc(t,e)})}function G_(t){if(typeof window._learnq.push=="function"){let e=window._learnq.push;window._learnq.push=function(...r){let o=e.apply(this,r);try{let n=r[0];return Uc(t,n),o}catch(n){return a.error(n),o}}}}function j_(t){function e(){let r=Ki.apply(this,arguments);try{let o=arguments?Array.prototype.slice.call(arguments[0]):[];return Uc(t,o),r}catch(o){return a.error(o),r}}window._learnq.push&&typeof Ki!="function"&&(Ki||(Ki=window._learnq.push),window._learnq.push=e)}function H_(t,e){window._learnq=window._learnq||[],!v()&&(window._learnq?._loaded||(q_(e),G_(e)),U(()=>{if(window._learnq?._loaded){j_(e);return}throw B_(new Error(B))},U_("Klaviyo platform load not detected."),500,10))}var Vc={name:Gp,setup:H_};var jp="google_ads";async function z_(t,e){try{await Di(t,jp,e,!1)}catch(r){a.error(r)}}var Wc={name:jp,setup:z_};var Hp="google_analytics";async function J_(t,e){try{await Di(t,Hp,e,!0)}catch(r){a.error(r)}}var qc={name:Hp,setup:J_};var zp="facebook_ads";async function Z_(t,e){try{let r=[];if(e?.length){let o=await nn(t);e.forEach(n=>{let i=n?.loadPixel===!0,s=n?.pixelId,c=r.includes(s);i&&s&&!c&&o&&(r.push(s),pi(s,o))})}}catch(r){a.error(r)}}async function K_(t,e){try{if(v())return;let r=Or(t).platforms?.filter(o=>o.platform?.toLowerCase()===zp);await Z_(e,r)}catch(r){a.error(r)}}var Gc={name:zp,setup:K_};var Jp="postscript",vr=class{constructor(e){this.userIdentifiers=e}handlePostscriptEvent(e,r){Lo(Jp,this.userIdentifiers,[e],{data:r}),vr.originalPostscriptEvent&&vr.originalPostscriptEvent(e,r)}interceptPostscriptEvents(){typeof window.postscript?.event=="function"&&(vr.originalPostscriptEvent===void 0&&(vr.originalPostscriptEvent=window.postscript.event),window.postscript.event=this.handlePostscriptEvent.bind(this))}};function Y_(t,e){if(v())return;let r=new vr(e);r.interceptPostscriptEvents(),_.addListener(window,"postscriptReady",()=>{r.interceptPostscriptEvents()})}var jc={name:Jp,setup:Y_};function X_(){return new Promise((t,e)=>U(()=>{if(window.Shopify.checkout)return t(window.Shopify.checkout);throw new A("Shopify checkout object missing")},r=>{a.error(r),e(r)},100))}function Q_(){if(!window.Shopify)throw new A("Shopify global missing")}function ew(t){U(()=>{Q_(),t()},r=>a.error(r),300,300)}var An={setup:ew,getShopifyCheckout:X_};var Hc="AddPaymentInfo";function tw(t,e){return t.target.matches(`${["#continue_button",...e].filter(r=>!!r).join(",")}`)}function Zp(){return $e()?.replace(/\/$/,"").split("/").pop()}function rw(t,e){za()&&t([Hc],{data:Kn(),platform_event_id:Zp()}),An.setup(()=>{Zn()==="payment"&&_.addListener(document,"click",r=>{tw(r,e?.additionalSelectors??[])&&Tn.getData().then(o=>{o=o||{};let n=JSON.parse(JSON.stringify(o)),i=Jn();i&&(n.total_price=i),t([Hc],{data:o,platform_event_id:Zp()})})},!0)})}var Kp={eventName:Hc,setup:rw};async function ow(){let t=sd();if(!t)throw new Error("Cart URL not available");let e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch cart: ${e.statusText}`);return await e.json()}var zc=class extends Error{constructor(){super("Root route or cart route not available"),this.status="warn"}},In=class{static async fromAPI(){try{await Et(()=>{if(!Ko()&&!ja())throw new zc})}catch{}try{let e=await Et(ow,2);return new In(e)}catch(e){throw e.status="warn",e}}constructor(e){this.cart=e}getEventDataForItem(e){let r=this.cart?.items?.find(o=>o?.id===e);return r&&(r={...r},delete r.sections,r.currency=so(),r.total_item_count=this.cart?.item_count,r.total_price=this.cart?.total_price),r}},Do=In;var Fo="AddToCart";function nw(t){return typeof t=="number"&&t>=0}var Jc=class{constructor(e){this.sendEvent=e}async sendAddToCartEvents(e){try{let r=e?.items||[e];r=r.filter(n=>n?.id&&nw(n?.quantity)?!0:(a.error(new jt(`SHOPIFY ${Fo} addToCart request did not return valid item: ${JSON.stringify(n)}`)),!1));let o=await Do.fromAPI();r.forEach(n=>{let i=o.getEventDataForItem(n.id);if(!i){a.error(new jt("SHOPIFY updated cart did not contain the item that was added to the cart"));return}this.sendEvent([Fo],{data:i})})}catch(r){a.error(r)}}interceptXhr(){hn(Ro,e=>{let r=JSON.parse(e);this.sendAddToCartEvents(r)})}interceptFetch(){fn(Ro,e=>{e.json().then(r=>{this.sendAddToCartEvents(r)})})}},Yp=Jc;var Zc=class{constructor(e){this.sendEvent=e}async logATCOnCartPage(){if(zn())try{let e=await Do.fromAPI();if(!e?.cart?.items?.length)return;let r=e.cart.items[0],o=e.getEventDataForItem(r.id);this.sendEvent([Fo],{data:o})}catch(e){a.error(e)}}},Xp=Zc;var iw={eventName:Fo,setup(t,e={}){v()||(this._interceptor||(this._interceptor=new Yp(t),this._interceptor.interceptXhr(),this._interceptor.interceptFetch()),e.logATCOnCartPage&&!this.cartPageLogger&&(this.cartPageLogger=new Xp(t),this.cartPageLogger.logATCOnCartPage()))},cleanup(){delete this._interceptor,delete this.cartPageLogger}},Qp=iw;var ef="CompleteRegistration";function aw(t){try{return t.target.matches('form:has(input[type="email"])')}catch(e){if(e?.message.includes("is not a valid selector"))return new RegExp(/<input.*type="email".*>/).test(t.target.innerHTML)}return!1}function sw(t){v()||_.addListener(document,"submit",e=>{aw(e)&&t([ef])},!0)}var tf={eventName:ef,setup:sw};var cw=['form[action="/cart"] button[type="submit"]','form[action="/cart"] button[type="submit"] *'],uw=["button#checkout[type=submit]","button#checkout[type=submit] *","button[name=checkout]","button[name=checkout] *","input[id*=checkout][type=submit]","input[id*=checkout][type=submit] *",'[href*="/checkout"]','[href*="/checkout"] *',"button.rebuy-cart__checkout-button","button.rebuy-cart__checkout-button *","i.rebuy-button-icon","i.rebuy-button-icon *",'form[action="/cart"] [name="checkout"]','form[action="/cart"] [name="checkout"] *','form[action="/checkout"] button','form[action="/checkout"] button *',"button.rebuy-cart__flyout-checkout-button","button.rebuy-cart__flyout-checkout-button *",".cart-drawer__action button",".cart-drawer__action button *",'button[class*="checkout"]','button[class*="checkout"] *','button[id*="checkout"]','button[id*="checkout"] *','a[class*="checkout"]','a[class*="checkout"] *','a[id*="checkout"]','a[id*="checkout"] *','a[name="checkout"]','a[name="checkout"] *',".checkout-btn",".checkout-btn *","button#simpl_buynow-button","button#simpl_buynow-button *",".c-button.rebuy-button",".c-button.rebuy-button *"],dw=["#dynamic-checkout-cart button","#dynamic-checkout-cart button *","#dynamic-checkout-cart [role=button]","#dynamic-checkout-cart [role=button] *",".additional-checkout-buttons button",".additional-checkout-buttons button *",".additional-checkout-buttons [role=button]",".additional-checkout-buttons [role=button] *"];function lw(t,e){let r=[...uw,...dw,...e];return l?.toLowerCase()!=="womaness"&&r.push(...cw),t.target.matches(`${r.filter(o=>!!o).join(",")}`)}function pw(t,e,r){if(lw(t,e?.additionalSelectors??[])&&t.isTrusted){let o=t.target.parentNode?.form;(!o||o.checkValidity())&&r()}}function fw(t,e){return new Promise(r=>{ie(()=>{["click",...e?.additionalListeners?.length?e.additionalListeners:[]].forEach(o=>_.addListener(document,o,n=>pw(n,e,t),!0)),r()})}).catch(r=>a.error(r))}var rf={setup:fw};function Kc(t){let e=new Error(t);return e.name="BadRenderError",e.status="warn",e.stack=ue(e.stack,1),e}var mw=new Promise(t=>{ie(t)}),gw="div.paypal-checkout-sandbox";function hw(t){return new MutationObserver(e=>{e.forEach(r=>{r.addedNodes.forEach(o=>{o instanceof Element&&o.matches(gw)&&t()})})})}async function yw(t){try{if(v())return;await mw;let e=hw(t);U(()=>{if(!(document.body instanceof Node))throw new Error;e.observe(document.body,{childList:!0})},()=>{a.error(new Kc(`document.body did not render in time and had value: ${document.body}`))})}catch(e){a.error(e)}}var of={setup:yw};async function vw(t){try{let e=t.filter(o=>o.status==="fulfilled").map(o=>o.value.json());return(await Co(e)).filter(o=>o.status==="fulfilled"&&o.value.product).map(o=>o.value)}catch(e){let r=new Error(`Error occurred while parsing json from promise results. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}async function _w({items:t}){try{let e=t.filter(o=>o.url).map(o=>{let n=new URL(`https://${qo()}${o.url}`);return n.pathname+=".json",wi(n.href)}),r=await Co(e);return await vw(r)}catch(e){let r=new Error(`Error occurred while fetching product info with tags. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}function ww(t,e){let r={...t},{items:o}=r;return e.forEach(n=>{let i=o.find(s=>s.product_id&&n.product?.id&&s.product_id===n.product.id);i&&n.product.tags&&(i.tags=n.product.tags)}),r}async function nf(t){try{if(t?.items?.length>0){let e=await _w(t);return ww(t,e)}}catch(e){let r=new Error(`Error occurred while including product tags. Sending event without tags. Error: ${e.message}`);r.status="warn",a.error(r)}return t}var af="InitiateCheckout";function Ew(t,e){if(ad())return Promise.resolve();Tn.setup();let r=async()=>{try{let o=await Tn.getData(),n=o;e?.loadProductTags===!0&&(n=await nf(o)),t([af],{data:n})}catch(o){a.error(o)}};return Promise.all([rf.setup(r,e),of.setup(r)])}var sf={eventName:af,setup:Ew};function cf(){let t=we(window.location.search).variant,e=t?t.split("?")[0]:null;if(e)return parseInt(e,10);let r=[...document.querySelectorAll('input[name="id"]')];if(r.length===1)return parseInt(r,10);let o=window.ShopifyAnalytics?.meta;if(o?.product?.id){let n=[...document.querySelectorAll(`input[name="id"][data-productid="${o?.product?.id}"]`)];if(n.length===1&&n[0]?.value)return parseInt(n[0].value,10)}if(o?.product?.variants&&o?.selectedVariantId){let n=parseInt(o?.selectedVariantId,10),i=o?.product?.variants.filter(c=>c.id===n);if(window.ReCharge&&window.ga&&document.querySelector('[name="properties[shipping_interval_frequency]"]')?.value){let c=window.ReCharge.products.filter(u=>typeof u.variant_to_duplicate[`${n}`]=="string");if(c.length===1)return c[0].variant_to_duplicate[`${n}`]}if(i.length)return n}return null}function bw(t){let e=JSON.parse(JSON.stringify(t));if(e.variants&&e.variants.length){let o=e?.variant_id??cf()??e.variants[0].id,n=e.variants.find(i=>i.id===o)??e.variants[0];n.name&&(e.title=n.name),e.variants=[n]}e.featured_image?.startsWith("//")&&(e.featured_image=`https:${e.featured_image}`),delete e.description,delete e.media;let r=so();return r&&(e.currency=r),{data:e}}async function uf(){try{let t=`${$e()}.js${window.location.search}`,r=await(await fetch(t,{}))?.json();return bw(r)}catch(t){return t.status="warn",a.error(t),{}}}var Yc="PageView",Pw="ActiveOnSite",Sw="ViewedProduct";async function xw(t){function e(i,s){i.length&&t([...new Set(i)],s)}let r=[],o={};if(ai()&&r.push(Yc),await Q(Ta)||(r.push(Pw),Ie(Ta,!0)),Wa()&&(o=await uf(),r.push(Sw)),!v()||Ja()){if(zn()&&!Ja()){r.push(Yc),Do.fromAPI().then(i=>{o.cart=i.cart,e(r,{data:o})}).catch(()=>{e(r,o)});return}e(r,o)}}var df={eventName:Yc,setup:xw};var pf="Purchase";function lf(t){return["order_id","line_items","total_price_set.shop_money.currency_code","total_price_set.shop_money.amount"].every(e=>b(t,e)!==void 0)}function Tw(t){if(window.cart_json){let{line_items:e,currency:r,total_price:o}=window.cart_json;return P({},t,{line_items:e,total_price_set:{shop_money:{currency_code:r,amount:o}}})}return t}function Aw(t){function e(r){t([pf],{data:{...r},platform_event_id:r.order_id||r?.order?.id})}Ha()?e(Kn()):D("platform",y.VIEW_RESPONSE,()=>{An.setup(()=>{$("page.log_purchase")&&An.getShopifyCheckout().then(r=>{if(lf(r))return e(r);let o=Tw(r);if(lf(o))return e(o);throw new A("Shopify checkout required fields are missing")}).catch(r=>a.error(r))})})}var ff={eventName:pf,setup:Aw};function mf(t,e){return P({},{content_ids:e?.map(r=>r?.product_id).filter(r=>r),currency:t?.currency,content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0)})}function gf(t){let e=t?.lineItems||[];return{content_ids:e?.map(r=>r?.variant?.product?.id).filter(r=>r),content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0),order_id:t?.order?.id,currency:t?.totalPrice?.currencyCode,value:t?.totalPrice?.amount,contents:e?.map(r=>({id:r?.variant?.product?.id,quantity:r?.quantity,item_price:r?.variant?.price?.amount,title:r?.title}))}}function Iw(t){if(v())return gf(t);let e=t?.line_items??[];return P(mf(t,e),{order_id:t?.order_id,currency:t?.total_price_set?.shop_money?.currency_code,value:t?.total_price_set?.shop_money?.amount,contents:e?.map(r=>({id:r?.product_id,quantity:r?.quantity,item_price:r?.price,title:r?.title}))})}function hf(t){function e(o){return P({},{id:o?.product_id,quantity:o.quantity,item_price:tr(o.price),title:o.product_title,description:o.product_description,category:o.product_type})}let r=t?.items??[];return P(mf(t,r),{value:Jn()||tr(t?.total_price),contents:r?.map(o=>e(o))})}function kw(t){let e={};return t?.items?.length?e=JSON.parse(JSON.stringify(t?.items[0])):t&&(e=JSON.parse(JSON.stringify(t))),{content_category:e.product_type,content_ids:e.product_id?[e.product_id]:[],content_name:e.title,content_type:"product_group",currency:e.currency||so(),num_items:e.quantity||1,value:e.price?tr(e.price):void 0}}function Ow(t){return{search_string:t?.search_string}}function Cw(t){let e=v()?{...gf(t)}:{...hf(t)};return delete e?.num_items,e}function Nw(t){return P({},{content_category:t?.type,content_ids:t?.id&&[t?.id],content_name:t?.title,content_type:"product_group",currency:t?.currency,value:tr(t?.price)})}var Rw={addtocart:{eventName:"AddToCart",convert:kw},purchase:{eventName:"Purchase",convert:Iw,isValid:t=>t?.total_price_set?.shop_money?.currency_code&&t?.total_price_set?.shop_money?.amount||t?.totalPrice?.currencyCode&&t?.totalPrice?.amount},addpaymentinfo:{eventName:"AddPaymentInfo",convert:Cw},viewedproduct:{eventName:"ViewContent",convert:Nw},pageview:{eventName:"PageView"},initiatecheckout:{eventName:"InitiateCheckout",convert:hf},search:{eventName:"Search",convert:Ow},completeregistration:{eventName:"CompleteRegistration"}};function yf(t,{data:e}={}){let r=Rw[t?.toLowerCase()];if(!r||r.isValid&&!r.isValid(e))return;let o=r.convert&&r.convert(e);return{eventName:r.eventName,data:o}}function Xc(t,e){return t.filter(r=>r.eventSource==="shopify"&&r.originalEventName===e)}var Xi="facebook_ads",vf=[],Yi,kn;function Lw(t,e){if(!il(e,Xi)||v()){Yi=!1;return}async function r(){try{Yi=!0;let o=Cr(e,Xi);kn=await nn(t),o.forEach(n=>{let i=n?.loadPixel===!0,s=n?.pixelId,c=vf.includes(s);i&&s&&!c&&kn&&(Yi=!0,vf.push(s),pi(s,kn))})}catch(o){a.error(o)}}r()}async function Dw(t){try{if(v())return kn=await nn(t),!0}catch(e){a.error(e)}return!1}async function Fw(t,e,r,o="identity"){let n=await Dw(r);if(Yi||n){let i=yf(t,e),s=kn?.external_id;Cr(o,Xi).forEach(c=>{let u=Xc(c?.eventTrackers||[],t);function g(h,E){return h&&E&&i&&c.pixelId}u.forEach(h=>{let E=h?.overrideEventName||h?.originalEventName;g(h,E)&&(v()?di(c.pixelId,e?.platform_event_id,s,E,i?.data):U(()=>{if(typeof window.fbq=="function")window.fbq("trackSingle",c.pixelId,E,i?.data,{eventID:e?.platform_event_id});else throw new Error("FBQ not loaded")},()=>a.error(new A("FBQ not loaded")),100))})})}}var Qc={name:Xi,setup:Lw,sendEvent:Fw};var _f={[Qc.name]:Qc},wf,Ef,Qi;function Mw(t,e,r){wf=t,Ef=e,Qi=r,["facebook_ads"].forEach(o=>{_f[o]?.setup(Qi,e)})}function $w(t,e={}){e.platform_event_id||(e.platform_event_id=rn()),Lo(wf,Qi,t,e),["facebook_ads"].forEach(r=>{t.forEach(o=>{_f[r]?.sendEvent(o,e,Qi,Ef)})})}var Jt={setup:Mw,sendEvent:$w};var bf="Search";function Bw(t){if(id()){let e=k(),r={search_string:we(e)?.q};t([bf],{data:r})}}var Pf={eventName:bf,setup:Bw};var eu="shopify";function Uw(t){let e=Or(t),[r]=e?.platforms?.filter(o=>o?.platform===eu.toUpperCase());return r}function Vw(t,e){let r=Uw(t),o=r?.eventTriggerSettings;Jt.setup(eu,t,e,r),Kp.setup(Jt.sendEvent,o?.AddPaymentInfo),tf.setup(Jt.sendEvent,o?.CompleteRegistration),Qp.setup(Jt.sendEvent,o?.AddToCart),sf.setup(Jt.sendEvent,o?.InitiateCheckout),df.setup(Jt.sendEvent,o?.PageView),Pf.setup(Jt.sendEvent,o?.Search),ff.setup(Jt.sendEvent,o?.Purchase)}var tu={name:eu,setup:Vw};var Ww="shopify_webhook";async function qw(t,e){try{if(v())return;let r={method:"POST",body:JSON.stringify({attributes:{_bcai:btoa(JSON.stringify({site_name:l,ids:await ee(e),user_data:{fbp:await I(ct),fbc:await I(Lt),bcvid:(await ot())?.id}})),_bcai_aid:await I("_shopify_y")}}),mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};U(()=>{let o=Ko();if(!o)throw Error("Shopify Root Route Not Found");ut(`${o}cart/update.js`,r)},()=>a.error(new Ue("Cart update failed","ShopifyCart",!1,"warn")))}catch(r){a.error(r)}}var ru={name:Ww,setup:qw};function Gw(){let t="https://api.blackcrow.ai/";return Rt(l)&&(t="https://api.sandbox.blackcrow.ai/"),`${t}v1/events/user?`}function jw(t={}){return{site_name:l,event_name:"user",ids:t,page_url:k(),device_info:ge()}}function ou(t){Te(No,y.IDENTIFY,P({},t),{})}async function Hw(t){t?.user&&(Ie(no,t.user),ou(t.user),!await I(zo)&&t.user?.ps_id&&Y(zo,t.user.ps_id))}function Oe(t=[]){let e=jw(t),o={servlet:"user",method:"POST",cache:"no-cache",body:JSON.stringify(e)};ut(Gw(),o,Hw,n=>{a.error(n)})}function zw(t){async function e(r){try{let o=await ee(t),n=We("e",Ar(r));o.length&&n.length&&Oe(o.concat(n))}catch(o){a.error(o)}}Td(e)}var nu={name:"email",setup:zw};function Jw(t){async function e(r){try{let o=await ee(t),n=We("p",Nr(r));o.length&&n.length&&Oe(o.concat(n))}catch(o){a.error(o)}}yl(e)}var iu={name:"phone",setup:Jw};async function to(t,e){try{return await Q(t)===e?!0:(Ie(t,e),!1)}catch(r){return a.error(r),!1}}var Zw="_kx";async function Kw(t){try{let o=function(s){let c=We("klx",s);r.length&&c.length&&Oe(r.concat(c))};var e=o;let r=await ee(t),n=await co();o(de(Zw)),await to("_bcai_s_keid",n)||o(n)}catch(r){a.error(r)}}var au={name:"klaviyo",setup:Kw};async function Yw(t){try{let i=function(){let E=de(Aa);return(!E||E.trim().length===0)&&(E=de(Aa,document?.referrer??"")),E?.trim().length>0?`fb.1.${Date.now()}.${E}`:n},c=function(E){let q=Object.entries(E).reduce((me,[Zt,Kt])=>me.concat(We(Zt,Kt)),[]);s.length&&q.length&&Oe(s.concat(q))};var e=i,r=c;if(!ai())return;let o=await I(ct),n=await I(Lt),s=await ee(t),u=i(),[g,h]=[await to("_bcai_s_fbc",u),await to("_bcai_s_fbp",o)];c({...!g&&{fbc:u},...!h&&{fbp:o}})}catch(o){a.error(o)}}var su={name:"facebook_ads",setup:Yw};async function Xw(t){try{let e=await ee(t),r=await I(zo);if(!await to("_bcai_s_pscid",r)&&r){let n=We("pscid",r);Oe(e.concat(n))}}catch(e){a.error(e)}}var cu={name:"postscript",setup:Xw};async function Qw(t){try{let e=await ee(t),r=bl();r&&e.length&&r.forEach(o=>{let n=[];n=n.concat(We("fn",ci(o.fn))),n=n.concat(We("ln",ci(o.ln))),n=n.concat(We("fln",ci(o.fln))),n.length&&Oe(e.concat(n))},[])}catch(e){a.error(e)}}var uu={name:"name",setup:Qw};async function eE(t){try{let e=await De(()=>[...document.querySelectorAll("iframe[srcdoc]")].find(u=>u.srcdoc?.includes("sendlane.com")),12e4);if(!e)return;let o=(await new Promise(c=>e.contentDocument?.addEventListener("submit",c,{once:!0,capture:!0}))).target;if(!o||o.constructor.name!=="HTMLFormElement")throw new Error("Sendlane form is not an HTMLFormElement");let n=await ee(t),i=o.querySelector('input[type="email"]');i&&(n=n.concat([{name:"e",value:Ar(i.value)}]));let s=o.querySelector('input[type="tel"]');s&&(n=n.concat([{name:"p",value:Nr(s.value)}])),Oe(n)}catch(e){a.error(e)}}var du={name:"sendlane",setup:eE};async function Sf(t=[]){try{let e=await Q(no);if(e)ou(e);else{let r=await ee(t);r.length&&Oe(r)}}catch(e){a.error(e)}}var tE={[Vc.name]:Vc,[Gc.name]:Gc,[tu.name]:tu,[ru.name]:ru,[Wc.name]:Wc,[qc.name]:qc,[jc.name]:jc},rE={[nu.name]:nu,[iu.name]:iu,[au.name]:au,[su.name]:su,[uu.name]:uu,[du.name]:du,[cu.name]:cu};function oE(t,e){e.forEach(r=>{let o=rE[r];o&&typeof o.setup=="function"&&o.setup(t)})}function lu(t,e){t.length!==0&&e&&e.forEach(r=>{let o=tE[r];o&&typeof o.setup=="function"&&o.setup(No,t)})}function nE(t){return t.filter(e=>e.source==="cookie"&&e.cookieLoadUrl)}async function iE(t){try{for(let e=0;e<t.length;e+=1)await I(t[e].value)||await pn(ut,t[e].cookieLoadUrl,{mode:"no-cors",credentials:"include"})}catch(e){a.error(e)}}async function aE(){try{let s=function(c){D("platform",y.VIEW_RESPONSE,()=>{let u=Po(e?.scoreName);Ie(Ho,u),c&&c(o,i)})};var t=s;let e=Or(No),r=e.userAttributes||[],o=e.userIdentifiers||[],n=nE(o),i=new Set((e.platforms||[]).map(c=>c?.platform?.toLowerCase()).filter(c=>c));n.length&&await iE(n),ie(()=>{oE(o,r)}),Sf(o),e?.scoreName?await Q(Ho)?(lu(o,i),s()):s(lu):lu(o,i)}catch(e){a.error(e)}}function sE(){return aE(),{}}var xf={appName:No,init:sE};var cE=C.object({name:C.string().optional(),percent:C.number().min(0).max(1).default(1),enabled:C.boolean().default(!0),platforms:C.object({googleAnalytics:C.object({variantName:C.string().regex(/^\S+-\S+-\S+$/)}).optional()}).optional()}),uE=C.object({experimentBuckets:C.array(cE)}),Mo=class{constructor(e){this.config=e}static fromAppSettings(){let e=lt("site_speed")?.appSetting?.siteSpeed||{},r=uE.parse(e);return new Mo(r)}get settingsBucket(){let e=this.config.experimentBuckets.map(r=>({name:r.name,percent:r.percent,value:r}));return le({name:"site_speed_enabled",allocations:e})}get enabled(){return this.settingsBucket.enabled}get googleAnalyticsVariantName(){return this.settingsBucket.platforms?.googleAnalytics?.variantName}get bucketName(){return this.settingsBucket.name}};var ea="bcai-speed-override";function Tf(){localStorage.setItem(ea,"force_disabled")}function Af(){localStorage.setItem(ea,"force_enabled")}function If(){localStorage.removeItem(ea)}function pu(){return localStorage.getItem(ea)}async function fu(){try{let t=await navigator?.serviceWorker?.getRegistration();t&&(t.active&&t.active.postMessage({message:"clear cache"}),await t.unregister())}catch(t){a.error(t)}}var _r,Cn,Lf,ta;var Df=-1,gu=function(t){addEventListener("pageshow",function(e){e.persisted&&(Df=e.timeStamp,t(e))},!0)},Ff=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Mf=function(){var t=Ff();return t&&t.activationStart||0},ra=function(t,e){var r=Ff(),o="navigate";return Df>=0?o="back-forward-cache":r&&(document.prerendering||Mf()>0?o="prerender":document.wasDiscarded?o="restore":r.type&&(o=r.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},$f=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var o=new PerformanceObserver(function(n){Promise.resolve().then(function(){e(n.getEntries())})});return o.observe(Object.assign({type:t,buffered:!0},r||{})),o}}catch{}},oa=function(t,e,r,o){var n,i;return function(s){e.value>=0&&(s||o)&&((i=e.value-(n||0))||n===void 0)&&(n=e.value,e.delta=i,e.rating=function(c,u){return c>u[1]?"poor":c>u[0]?"needs-improvement":"good"}(e.value,r),t(e))}},dE=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Bf=function(t){var e=function(r){r.type!=="pagehide"&&document.visibilityState!=="hidden"||t(r)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},Uf=function(t){var e=!1;return function(r){e||(t(r),e=!0)}},$o=-1,kf=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},na=function(t){document.visibilityState==="hidden"&&$o>-1&&($o=t.type==="visibilitychange"?t.timeStamp:0,lE())},Of=function(){addEventListener("visibilitychange",na,!0),addEventListener("prerenderingchange",na,!0)},lE=function(){removeEventListener("visibilitychange",na,!0),removeEventListener("prerenderingchange",na,!0)},Vf=function(){return $o<0&&($o=kf(),Of(),gu(function(){setTimeout(function(){$o=kf(),Of()},0)})),{get firstHiddenTime(){return $o}}},Wf=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()};var On={passive:!0,capture:!0},pE=new Date,Cf=function(t,e){_r||(_r=e,Cn=t,Lf=new Date,Gf(removeEventListener),qf())},qf=function(){if(Cn>=0&&Cn<Lf-pE){var t={entryType:"first-input",name:_r.type,target:_r.target,cancelable:_r.cancelable,startTime:_r.timeStamp,processingStart:_r.timeStamp+Cn};ta.forEach(function(e){e(t)}),ta=[]}},fE=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;t.type=="pointerdown"?function(r,o){var n=function(){Cf(r,o),s()},i=function(){s()},s=function(){removeEventListener("pointerup",n,On),removeEventListener("pointercancel",i,On)};addEventListener("pointerup",n,On),addEventListener("pointercancel",i,On)}(e,t):Cf(e,t)}},Gf=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,fE,On)})},Nf=[100,300],jf=function(t,e){e=e||{},Wf(function(){var r,o=Vf(),n=ra("FID"),i=function(u){u.startTime<o.firstHiddenTime&&(n.value=u.processingStart-u.startTime,n.entries.push(u),r(!0))},s=function(u){u.forEach(i)},c=$f("first-input",s);r=oa(t,n,Nf,e.reportAllChanges),c&&Bf(Uf(function(){s(c.takeRecords()),c.disconnect()})),c&&gu(function(){var u;n=ra("FID"),r=oa(t,n,Nf,e.reportAllChanges),ta=[],Cn=-1,_r=null,Gf(addEventListener),u=i,ta.push(u),qf()})})};var T3=1/0;var Rf=[2500,4e3],mu={},Hf=function(t,e){e=e||{},Wf(function(){var r,o=Vf(),n=ra("LCP"),i=function(u){var g=u[u.length-1];g&&g.startTime<o.firstHiddenTime&&(n.value=Math.max(g.startTime-Mf(),0),n.entries=[g],r())},s=$f("largest-contentful-paint",i);if(s){r=oa(t,n,Rf,e.reportAllChanges);var c=Uf(function(){mu[n.id]||(i(s.takeRecords()),s.disconnect(),mu[n.id]=!0,r(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return setTimeout(c,0)},!0)}),Bf(c),gu(function(u){n=ra("LCP"),r=oa(t,n,Rf,e.reportAllChanges),dE(function(){n.value=performance.now()-u.timeStamp,mu[n.id]=!0,r(!0)})})}})};var mE="site_speed";function gE(){return!!window?.navigator?.serviceWorker}async function hE(){try{let o=function(){let n=pu();return n==="force_enabled"?!0:n==="force_disabled"?!1:e.enabled};var t=o;if(v()||!gE())return;let e=Mo.fromAppSettings();ce(H.SITE_SPEED_BUCKETING,{bucketing:{bucket_name:e.bucketName}});let r=pe("web_vitals_metrics");if(r.get("FID")||(jf(({name:n,navigationType:i,value:s,delta:c,rating:u})=>{ce(H.SITE_SPEED_FID_METRIC,{web_vitals:{name:n,navigation_type:i,value:s,delta:c,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("FID",!0)),r.get("LCP")||(Hf(({name:n,navigationType:i,value:s,delta:c,rating:u})=>{ce(H.SITE_SPEED_LCP_METRIC,{web_vitals:{name:n,navigation_type:i,value:s,delta:c,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("LCP",!0)),window.blackcrowSpeed={async forceEnable(){Af(),location.reload()},async forceDisable(){Tf(),await fu(),location.reload()},async reset(){If(),location.reload()},get appStatus(){let n=e.enabled?"enabled":"disabled";return pu()??n}},e.googleAnalyticsVariantName&&Nt("event","experience_impression",{exp_variant_string:e.googleAnalyticsVariantName,event_label:e.googleAnalyticsVariantName}),o()){let n=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),i=n.installing??n.waiting??n.active;if(i){let{id:s}=await ot(),c=le({name:"error_sampling",allocations:[{percent:.02,value:!0}]});i.postMessage({message:"config",data:{SITE_NAME:l,VISITOR_ID:s,SAMPLE_ERRORS:!!c}})}}else await fu()}catch(e){a.error(e)}}var zf={appName:mE,init:hE};var ia={audience:cl,measure:Dl,pwo:_p,target:$p,identity:xf,site_speed:zf};var Nn={};function yE(t){let e=lt(t.appName);if(typeof t.init=="function"&&e.active)return t.init();let r=ni(t.appName),o={};return r.forEach(n=>{o[n]=Promise.resolve()}),o}function vE(t,e){let r=lt(t.appName);return typeof t.sendAppScores=="function"&&r.active?t.sendAppScores(e):Promise.resolve()}function Jf(){S(ia,(t,e)=>{lt(e).active&&(Nn[t.appName]=t)})}function Zf(){let t={};return S(Nn,e=>{t[e.appName]=yE(e)}),t}function hu(t){if(Rt(l))return Promise.resolve();let e=[];return S(Nn,r=>{e.push(vE(r,t[r.appName]))}),Promise.all(e)}function Kf(){S(Nn,t=>{typeof t.cleanup=="function"&&t.cleanup()}),Nn={}}function aa(t){D("platform",y.VIEW_RESPONSE,e=>t(e))}function Yf(t,e){return Zo(t),hu(e)}function sa(t,e){Zo(t),Od(t.history_id),zd(),Cs(),Vd(),hu(e),Te("platform",y.VIEW_RESPONSE,t)}var ca=`${d}_overrides`,Xf=!1,ua=null;function _E(){ua=null,Ie(ca,{})}async function Qf(t){try{let e=P({},ua||await Q(ca),t);ua=e,Ie(ca,e),Xf&&console.log(`Your <${d}> settings will apply on the next page load. Please refresh the page.`)}catch(e){a.error(e)}}function wE(){S(ia,(t,e)=>{D("platform",`force_${e}`,()=>{Qf({apps:{[e]:{active:!0}}})})})}function em(){D("platform",y.OVERRIDES,Qf),D("platform",y.CLEAR_OVERRIDES,_E),wE()}async function tm(){try{return Xf=!0,ua||await Q(ca)}catch(t){return a.error(t),{}}}function rm(){return Jf(),Zf()}var et={platforms:{attentive:{submitEvents:["EMAIL_LEAD"]},bounceExchange:{submitEvents:["input_submission","campaign_submit"]},justUno:{},klaviyo:{submitEvents:["submit"]},sleekNote:{submitEvents:["submit"]},wisePops:{submitEvents:["after-form-submit"]},generic:{}},platformIdentifiers:["kl-","klaviyo","attn","fieldcaptureform","sleeknote","justuno","bx","bounceexchange","wisepops"],platformIdentifierExceptions:["kmail"],metadataViolators:["phone","email","sentIdentifiers"],page_id:"EmailSubmit"};var{platformIdentifiers:EE,platformIdentifierExceptions:bE,metadataViolators:PE}=et,nm=(t,{qualified:e,resolveTarget:r})=>t?e(t)?r?t:!0:t.parentElement?nm(t.parentElement,{qualified:e,resolveTarget:r}):!1:!1,SE=t=>t.style.position==="fixed"||t.style.top==="0"||t.style.top==="0px",xE=t=>t.nodeName.toLowerCase()==="iframe",TE={form:{qualified:t=>t.nodeName.toLowerCase()==="form",resolveTarget:!0},footer:{qualified:t=>t.nodeName.toLowerCase()==="footer",resolveTarget:!1},overlay:{qualified:t=>SE(t)||xE(t),resolveTarget:!1}},yu=(t,e)=>nm(t,TE[e]),im=t=>yu(t,"form"),AE=t=>yu(t,"footer"),IE=t=>yu(t,"overlay"),kE=t=>{if(!t)return"unknown";try{if(IE(t))return"overlay";if(AE(t))return"footer";if(Ir()==="checkout")return"checkout"}catch{a.error(new A("email location failed"))}return"unknown"},am=()=>{let t=Ir()==="checkout",e=document.querySelector('input[type="checkbox"]');return t&&e&&!e.checked},OE=(t,e)=>t.some(r=>typeof r=="string"&&r.toLowerCase().includes(e)),om=(t,e)=>e.some(OE.bind(null,t)),sm=t=>{let e=[...Array.from(t.classList),t.action,t.id];return om(e,EE)&&!om(e,bE)},CE=t=>{window._learnq=window._learnq||[],window._learnq.push(["identify",{$email:t}])},NE=(t,e)=>{let r={...t};return S(Object.keys(r),o=>{S(e,n=>{o.includes(n)&&(r[o]="redacted")})}),r},RE=t=>{a.push({trigger:y.VIEW,data:{page_id:et.page_id,custom_dimensions:t}})},qe=(t,e)=>{let r=t.email||t.$email,o=as(r);ss(o)&&(J(o),CE(o),RE({...NE(t,PE),location:kE(e)}),ke.setPIISubmitCookie())};var cm=["checkout","account","login"],LE=Ir(),DE=$e(),um=t=>{if(cm.includes(LE)||cm.some(r=>DE.includes(r))||am())return;let e=t.value;e&&qe({email:e},document.activeElement)},FE=()=>{let t;S(cs(),e=>{if(t=im(e),t){if(sm(t))return;_.addListener(t,"submit",()=>{um(e)})}else _.addListener(e,"focusout",()=>{um(e)})})};function vu(){ie(()=>{_.setTimeout(FE,5e3)})}var{submitEvents:ME}=et.platforms.attentive;function _u(){_.addListener(window,"message",t=>{let{origin:e,data:r,target:o}=t;if(e.includes(".attn.tv")){let{__attentive:n}=r;ME.includes(n?.action)&&qe(n,o.document.activeElement)}})}var $E=(t,e)=>{if(e.isWrapped)return e;function r(){try{t.apply(this,arguments)}catch{}return e.apply(this,arguments)}return r.isWrapped=!0,r},da=(t,e)=>$E(t,typeof e=="function"?e:()=>{});var{submitEvents:BE}=et.platforms.bounceExchange;function wu(){_.setTimeout(()=>{window.bouncex=window.bouncex||{},window.bouncex&&typeof window.bouncex.push=="function"&&(window.bouncex.push=da((...t)=>{let{email:e,source:r}=t[0][1];BE.includes(r)&&qe({email:e})},window.bouncex.push))},8e3)}function Eu(){_.setTimeout(()=>{window.ju_callback=da((t,e)=>{qe({email:e})},window.ju_callback)},5e3)}var{submitEvents:UE}=et.platforms.klaviyo;function bu(){_.addListener(window,"klaviyoForms",t=>{let{detail:e,target:r}=t,{type:o,metaData:n}=e;UE.includes(o)&&qe(n,r.document.activeElement)})}var{submitEvents:VE}=et.platforms.sleekNote;function Pu(){_.addListener(window,"sleekNote",t=>{let{data:e,target:r}=t;VE.includes(e.type)&&qe(e.data,r.activeElement)})}var{submitEvents:WE}=et.platforms.wisePops;function Su(){_.setTimeout(()=>{WE.forEach(t=>{window[window.WisePopsObject]&&typeof window[window.WisePopsObject]=="function"&&window[window.WisePopsObject]("listen",t,e=>{let{target:r}=e,o=r.querySelector('input[type="email"]')?.value;qe({email:o},r)})})},5e3)}var qE={attentive:_u,bounce_exchange:wu,just_uno:Eu,klaviyo:bu,sleek_note:Pu,wise_pops:Su};function xu(){let t=$("config.emailFormTracking"),e=t?.active||!1,r=t?.platforms||[];e&&e===!0&&(vu(),r.map(o=>o.name).forEach(o=>{let n=qE[o];n&&n()}))}var dm=!1;function GE(t){let e="cart/add",r=y.ADD_TO_CART;Ci(e,()=>{a.push({trigger:r})}),bt(e,()=>{a.push({trigger:r})},t)}function jE(t){_.addListener(window,"click",e=>{let r=b(e,"target.className");(e.target?.getAttribute("name")==="checkout"||t&&typeof r=="string"&&r.match(t))&&a.push({trigger:"initiate_checkout"})})}function HE(t){let e=[];return t.items.forEach(r=>{e.push({sku:r.sku,id:r.id,quantity:r.quantity})}),t.items=e,t}function zE(t){return t.items&&(t=HE(t)),{cart_json:t}}function JE(t,e,r){ut("/cart.json",{servletName:"ShopifyCart"},o=>{let n={custom_dimensions:zE(o)};r?e(r,P({},t,n)):e(P({},t,n))})}function Tu(t){dm===!1&&(U(()=>{if(Be()&&$("config.shopify.add_to_cart.active"))return GE(!0);throw new Error("Shopify globals not found")}),$("config.shopify.checkout.active")&&jE($("config.shopify.checkout.class_name")),dm=!0),aa(()=>{Be()&&$("config.shopify.add_to_cart.active")&&D("platform",y.ADD_TO_CART,e=>{JE(P({},e,{page_id:"AddToCart"}),t,void 0)}),D("platform",y.INITIATE_CHECKOUT,e=>t(P({},e,{page_id:"checkout"})))})}var lm=[xu,Tu];var la="target",ZE=[or,Pn,xn];function Au(){function t(r){let o="advanced_matching";Mt(la,r,o),fe(`${la} ${o}: ${r}`,"update")}function e(r){let o=z(la,r.name);!o||Object.keys(o).length===0||typeof r.identify=="function"&&r.identify(la,()=>t(r.name))}ZE.forEach(r=>e(r))}function Iu(){function t(){Ad(Au),vl(Au),_l()}($("config.visitor.set_info")||li())&&ie(t)}var pm=!0;function KE(t){Kf(),Is(),Ra(),Ps(),Zo({}),Fa({}),t&&Object.keys(t).length>0&&jn(t)}async function ku(t={}){try{async function e(n){try{let u=function(g={}){Ps(),ce(H.VIEW,g,h=>{Yf(h,c)})};var i=u;em();let s=P(n,await tm());if(Fa(s),Te("platform",y.START,{build:"16437"}),D("platform",y.REFRESH,r),b(s,"page.ignored"))return;await Zl();let c=rm();aa(()=>{D("platform",y.VIEW,g=>u(g))}),lm.forEach(g=>g(u)),await ce(H.VIEW,{},g=>{sa(g,c)},()=>{sa({},c)})}catch(s){a.error(s)}}async function r(n={}){try{let i=t.pages||[],s=k(),c=Rd(i,s);if(fe(`page: ${c.id} ${c.isNewPage?"\u2714":"\xD7"}`,c),c.isNewPage){let u=P(t,c.config);pm?(Ra(),pm=!1):KE(n),await e(u)}Iu()}catch(i){a.error(i)}}async function o(n=0){try{await Xt(t)?await r():n<5?_.setTimeout(()=>{o(n+1)},400):(await r(),a.error(new A("vendor id not found (google id)")))}catch(i){a.error(i)}}b(t,"config.visitor.id_source")==="google"?await o():await r()}catch(e){a.error(e)}}var YE=le({name:"log_spa_refresh_sampling",allocations:[{percent:.01,value:!0}]});function fm(t,e){YE&&he(t,{url:e})}var mm={SPA_REFRESH_ENABLED:"config.spa.refresh.enabled",SPA_REFRESH_DELAY:"config.spa.refresh.delay"};function Ou(){if(!v()&&$(mm.SPA_REFRESH_ENABLED)){let t=$(mm.SPA_REFRESH_DELAY)||1e3;(e=>{if(e===void 0){a.error("Unable to setup SPA refresh: window.history is undefined");return}function r(i){fm("history_intercepted_initial",i),_.setTimeout(()=>{fm("history_intercepted_timeout",i),a.push({trigger:y.REFRESH})},t)}let o=e.pushState;e.pushState=function(){try{let s=arguments.length>=3?arguments[2]:"not passed";r(s)}catch(s){a.error(s)}return o.apply(e,arguments)};let n=e.replaceState;e.replaceState=function(){try{let s=arguments.length>=3?arguments[2]:"not passed";r(s)}catch(s){a.error(s)}return n.apply(e,arguments)}})(window.history)}}async function gm(){let t=await De(()=>window?.Shopify,12e4);if(t)return t.customerPrivacy||await new Promise(e=>{t.loadFeatures?t.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],e):e(void 0)}),window?.Shopify?.customerPrivacy}async function XE(){let t=await I("_cmp_a");if(!t)return!1;let e=JSON.parse(decodeURIComponent(t));return!!(e?.purposes?.a&&e?.purposes?.m)}function QE(t){return new Promise(e=>XE().then(r=>{r&&(t(),e(!0))})).catch(e=>{})}function eb(t){window?.Shopify?.customerPrivacy?.userCanBeTracked?.()?t():_.addListener(document,"visitorConsentCollected",()=>{window?.Shopify?.customerPrivacy?.userCanBeTracked?.()&&t()})}function tb(t){return new Promise(e=>gm().then(r=>{r&&(eb(t),e(!0))})).catch(e=>{})}async function hm(t){if(v())return t(),Promise.resolve(!0);let r=(o=>{let n=!1;return()=>{n||(n=!0,o())}})(t);return Promise.race([QE(r),tb(r),new Promise(o=>re(1e4).then(()=>{window?.Shopify?.customerPrivacy||(r(),o(!0))}))])}function ym(){let t=$("config.events");return t&&t.purchase&&t.purchase.fbEventsToIntercept&&t.purchase.fbEventsToIntercept.length>0?t.purchase.fbEventsToIntercept:null}function vm(){let t=$("config.events");return t&&t.view&&t.view.fbEventsToIntercept&&t.view.fbEventsToIntercept.length>0?t.view.fbEventsToIntercept:null}var rb=["load","error"],ob=le({name:"log_intercepted_fb_event",allocations:[{percent:.02,value:!0}]});function _m(t,e){let r="Interepted FB event - ".concat(t.event,". Event fired - ",e.type);ob&&he(r)}function wm(t,e){return t.find(r=>{let o=r.event,i=(r.filters||[]).map(c=>`.*${c}`).join(),s=`facebook.com/tr/\\?id=.*&ev=${o}${i}`;return e.src.match(s)})}function nb(t,e,r){let o=wm(e,r);o&&(_m(o,t),a.push({trigger:y.PURCHASE}))}function ib(t,e,r){let o=wm(e,r);o&&(_m(o,t),!Be()&&o.event==="AddToCart"&&a.push({trigger:y.ADD_TO_CART}),a.push({trigger:y.VIEW,data:{page_id:o.page_id}}))}var ab=(t,e,r,o)=>{r&&nb(e,r,t),o&&ib(e,o,t)};function Cu(){if(!v()){let t=ym(),e=vm();if(t||e){let r=Image;Image=function(...n){let i=new r(...n);return rb.forEach(s=>_.addListener(i,s,c=>{ab(i,c,t,e)})),i}}}}async function pa(t,e){try{if(await Q(t)===!1)return!1;await zl(e,!1)}catch(r){a.error(r)}return!0}async function Em(){try{if(!v())return Ga()?Promise.resolve(await pa("loadBundleOnThankYouPage","loadWebPixelOnThankYouPage")):qa()?Promise.resolve(await pa("loadBundleOnCheckoutPage","loadWebPixelOnCheckoutPage")):Promise.resolve(!0);let t=b(window,"shopifyEvent.name")==="checkout_completed";return Ga()||t?Promise.resolve(await pa("loadWebPixelOnThankYouPage","loadBundleOnThankYouPage")):qa()?Promise.resolve(await pa("loadWebPixelOnCheckoutPage","loadBundleOnCheckoutPage")):Promise.resolve(!1)}catch(t){return a.error(t),Promise.resolve(!0)}}var Nu=class extends Error{constructor(){super(`Failed to fetch config from CDN - ${Za()}`),this.status="warn"}},sb=8,cb=10;async function ub(){try{return await Et(cd,sb,cb,!0)}catch{throw new Nu}}async function db(t=()=>{},e=()=>{}){try{if(nd(),od()||!await Em())return;let o=await ub();if(await t(o),o?.config?.consentManager==="shopify"&&await new Promise(n=>{hm(n)}),a.SITE_NAME=l,rd(),Ts(),a.coreStarted){a.push({trigger:y.REFRESH});return}a.coreStarted=!0,As(),Ld(o.param_transforms),Jd(),await ku(o),Ou(),Cu(),Ud(),e()}catch(r){a.error(r)}}var bm=db;bm();})();
}catch(e){try{e.message=e.name+':'+e.message;e.name='ParseError';if(blackcrow&&blackcrow.BUILD_NUMBER==='DEV')(blackcrow.error||console.error||console.log)(e);else(blackcrow&&blackcrow.error&&blackcrow.error(e));}catch(_){}}})();
